(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},2:function(e,t){},"2Qx2":function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return c}));var r=n("W2Rx"),o=n("oj90");const s=n("33yf"),a=n("Iab2"),c={editingPath:e.observable(null),editingName:e.observable("NewFile"),editingType:e.observable("json"),editingFolder:e.observable(null),isDocumentDirty:e.observable(!1),lastStorageHost:e.observable("LOCAL"),editingFileFolder:function(e=""){const t=c.editingPath()?c.editingPath():"";return e.length>0?s.join(s.dirname(t),e):s.dirname(t)},setNewFile:function(){Swal.fire({title:"ðŸ“” Start a New file?",text:`Any unsaved ${c.editingName()} progress will be lost!`,icon:"warning",showCancelButton:!0,confirmButtonText:"New file",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&(c.editingPath(null),c.editingName("NewFile"),c.editingType("json"),c.editingFolder(null),app.workspace.selectedNodes=[],app.editing(null),app.nodes([app.newNode(!0).title("Start")]),app.tags([]),app.updateNodeLinks(),app.workspace.warpToNodeByIdx(0),c.lastStorageHost("LOCAL"),c.isDocumentDirty(!0),app.refreshWindowTitle())})},saveAppStateToLocalStorage:function(){const e=app.settings.storage;c.isDocumentDirty(!0),app.refreshWindowTitle(),e.setItem("appState",JSON.stringify({editingPath:c.editingPath(),editingName:c.editingName(),editingType:c.editingType(),editingFolder:c.editingFolder(),editingTitle:app.editing()?app.editing().title():null,nodes:c.getNodesAsObjects(),tags:app.tags(),editorSelection:app.editor?app.editor.selection.getRange():null,transform:app.workspace.transform,scale:app.workspace.scale,lastStorageHost:c.lastStorageHost()}))},loadAppStateFromLocalStorage:function(){const e=app.settings.storage,t=JSON.parse(e.getItem("appState"));if(t){const{editingPath:e,lastStorageHost:n,editingName:i,editingType:r,editingFolder:o,editingTitle:s,editorSelection:a,nodes:l,tags:u,transform:d,scale:f}=t;c.editingPath(e),c.editingName(i),c.editingType(r),c.editingFolder(o),c.lastStorageHost(n),app.nodes([]),c.getNodesFromObjects(l).forEach(e=>app.nodes.push(e)),app.tags(u),app.updateNodeLinks(),app.workspace.setTranslation(d.x,d.y),app.workspace.setZoom(4*f),s&&(app.editNode(app.nodes().find(e=>e.title()===s)),a&&app.editor.selection.setRange(a)),c.isDocumentDirty(!0),app.refreshWindowTitle()}},readFile:function(e,t,n){var i=new FileReader;i.onload=function(r){var s=c.getFileType(t);s==o.FILETYPE.UNKNOWN?alert("Unknown filetype!"):(c.editingPath(e.path),c.editingType(s),c.loadData(i.result,s,n))},i.readAsText(e)},openFile:function(e,t){c.editingPath()&&!confirm("Are you sure you want to close \n"+c.editingPath()+"\nAny unsaved progress will be lost...")||(c.editingName(t.replace(/^.*[\\\/]/,"")),c.readFile(e,t,!0),c.isDocumentDirty(!1),c.editingPath(e.path),c.lastStorageHost("LOCAL"),app.refreshWindowTitle())},openFiles:function(e,t){const n=document.getElementById("open-file").files;Object.entries(n).forEach(([e,t])=>{"0"===e?c.openFile(t,t.name):c.appendFile(t,t.name)})},openFolder:function(e,t){editingFolder=t,alert("openFolder not yet implemented e: "+e+" foldername: "+t)},appendFile:function(e,t){c.readFile(e,t,!1)},getFileType:function(e){const t=e.toLowerCase();return t.endsWith(".json")?o.FILETYPE.JSON:t.endsWith(".yarn.txt")||t.endsWith(".yarn")?o.FILETYPE.YARN:t.endsWith(".xml")?o.FILETYPE.XML:t.endsWith(".txt")?o.FILETYPE.TWEE:t.endsWith(".tw2")||t.endsWith(".twee")?o.FILETYPE.TWEE2:o.FILETYPE.UNKNOWN},loadData:function(e,t,n){const i=[];if(t==o.FILETYPE.JSON){if(!(e=JSON.parse(e)))return;for(let t=0;t<e.length;t++)i.push(e[t])}else if(t==o.FILETYPE.YARN){var r=e.split(/\r?\n/),s=null,a=0,l=!1;for(let e=0;e<r.length;e++)if("==="===r[e].trim())l=!1,null!=s&&(i.push(s),s=null);else if(l)s.body+=r[e]+"\n";else if(r[e].indexOf("title:")>-1)null==s&&(s={}),s.title=r[e].substr(7,r[e].length-7);else if(r[e].indexOf("position:")>-1){null==s&&(s={});var u=r[e].substr(9,r[e].length-9).split(",");s.position={x:Number(u[0].trim()),y:Number(u[1].trim())}}else r[e].indexOf("colorID:")>-1?(null==s&&(s={}),s.colorID=Number(r[e].substr(9,r[e].length-9).trim())):r[e].indexOf("tags:")>-1?(null==s&&(s={}),s.tags=r[e].substr(6,r[e].length-6)):"---"==r[e].trim()&&(l=!0,s.body="");null!=s&&i.push(s)}else if(t==o.FILETYPE.TWEE||t==o.FILETYPE.TWEE2){r=e.split("\n"),s=null,a=0;for(var d=0;d<r.length;d++)if(r[d]=r[d].trim(),"::"==r[d].substr(0,2)){null!=s&&i.push(s),s={};var f="",p="",h={x:80*++a,y:80*a},g=r[d].indexOf("["),m=r[d].indexOf("]");g>0&&m>0&&(p=r[d].substr(g+1,m-g-1));var v=r[d].indexOf("<"),y=r[d].indexOf(">");if(v>0&&y>0){var w=r[d].substr(v+1,y-v-1).split(",");h.x=parseInt(w[0]),h.y=parseInt(w[1])}var b=0;g>0?b=g:v>0&&(b=v),f=(f=b?r[d].substr(3,b-3):r[d].substr(3)).trim(),s.title=f,s.tags=p,s.body="",s.position=h}else null!=s&&(s.body.length>0&&(r[d]+="\n"),s.body+=r[d]);null!=s&&i.push(s)}else if(t==o.FILETYPE.XML){var x=(new DOMParser).parseFromString(e,"text/xml");if(null!=(e=o.Utils.xmlToObject(x)))for(let t=0;t<e.length;t++)i.push(e[t])}app.limitNodesUpdate(()=>{n&&app.nodes.removeAll(),c.getNodesFromObjects(i).forEach(e=>app.nodes.push(e))}),app.updateNodeLinks(),app.workspace.warpToNodeByIdx(0);var E=new CustomEvent("yarnLoadedData");E.document=document,E.data=c,E.app=app,window.parent.dispatchEvent(E)},getNodeFromObject:function(e){return new r.a({title:e.title,body:e.body,tags:e.tags,colorID:e.colorID,x:parseInt(e.position.x),y:parseInt(e.position.y)})},getNodeAsObject:function(e){return{title:e.title(),tags:e.tags(),body:e.body(),position:{x:e.x(),y:e.y()},colorID:e.colorID()}},getNodesFromObjects:function(e){const t=[];return e?(e.forEach(e=>{t.push(c.getNodeFromObject(e))}),t):[]},getNodesAsObjects:function(){const e=[],t=app.nodes();for(var n=0;n<t.length;n++)e.push(c.getNodeAsObject(t[n]));return e},getSaveData:function(e){var t="",n=c.getNodesAsObjects();if(e==o.FILETYPE.JSON)t=JSON.stringify(n,null,"\t");else if(e==o.FILETYPE.YARN)for(let e=0;e<n.length;e++){t+="title: "+n[e].title+"\n",t+="tags: "+n[e].tags+"\n",t+="colorID: "+n[e].colorID+"\n",t+="position: "+n[e].position.x+","+n[e].position.y+"\n",t+="---\n",t+=n[e].body;var i=n[e].body;i.length>0&&"\n"==i[i.length-1]||(t+="\n"),t+="===\n"}else if(e==o.FILETYPE.TWEE)for(let e=0;e<n.length;e++){var r="";n[e].tags.length>0&&(r=" ["+n[e].tags+"]"),t+=":: "+n[e].title+r+"\n",t+=n[e].body+"\n\n"}else if(e==o.FILETYPE.TWEE2)for(let e=0;e<n.length;e++){r="";n[e].tags.length>0&&(r=" ["+n[e].tags+"]");var s=" <"+n[e].position.x+","+n[e].position.y+">";t+=":: "+n[e].title+r+s+"\n",t+=n[e].body+"\n\n"}else if(e==o.FILETYPE.XML){t+="<nodes>\n";for(let e=0;e<n.length;e++)t+="\t<node>\n",t+="\t\t<title>"+n[e].title+"</title>\n",t+="\t\t<tags>"+n[e].tags+"</tags>\n",t+="\t\t<body>"+n[e].body+"</body>\n",t+='\t\t<position x="'+n[e].position.x+'" y="'+n[e].position.y+'"></position>\n',t+="\t\t<colorID>"+n[e].colorID+"</colorID>\n",t+="\t</node>\n";t+="</nodes>\n"}return c.isDocumentDirty(!1),app.refreshWindowTitle(),t},saveTo:function(e,t,n=null){null!=app.fs&&app.fs.writeFile(e,t,{encoding:"utf-8"},(function(t){c.editingPath(e),n&&n(),t&&alert("Error Saving Data to "+e+": "+t)}))},openFileDialog:function(e,t){e.bind("change",(function(n){t(n.currentTarget.files[0],e.val());var i="";null!=e.attr("nwsaveas")&&(i='nwsaveas="'+e.attr("nwsaveas")+'"'),null!=e.attr("accept")&&(i='accept="'+e.attr("accept")+'"'),e.parent().append('<input type="file" id="'+e.attr("id")+'"  '+i+">"),e.unbind("change"),e.remove()})),e.trigger("click")},saveFileDialog:function(e,t,n){var i=new Blob([n],{type:"text/plain;charset=utf-8"});a(i,(c.editingName()||"").replace(/\.[^/.]+$/,"")+"."+t)},insertImageFileName:function(){c.openFileDialog(i("#open-image"),(function(e,t){app.insertTextAtCursor(e.path?e.path:e.name)}))},tryOpenFile:function(){c.openFileDialog(i("#open-file"),c.openFiles)},promptFileNameAndFormat:function(e,t=null){Swal.fire({title:"ðŸ’¾ Save file - enter file name",html:`<input id="swal-input1" list="select-file-name" name="select" placeholder="${c.editingName()}">\n      <datalist class="form-control" id="select-file-name">    \n        ${t&&t.map(e=>`<option value="${e}" />`).join("")}\n      </datalist>`,onOpen:()=>{"NewFile"!==c.editingName()&&(document.getElementById("swal-input1").value=c.editingName())},showCancelButton:!0,preConfirm:()=>document.getElementById("swal-input1").value}).then(({value:t})=>{if(t&&""!==t){c.editingName(t);const n=c.editingType(),i=(c.editingName()||"").replace(/\.[^/.]+$/,"")+"."+n,r=c.getSaveData(n);e({editingName:i,yarnData:r})}})},tryShareFilePwa:function(e){c.promptFileNameAndFormat(({editingName:e,yarnData:t})=>{const n=[new Blob([t],{type:"text/plain"})],i=new File(n,e,{});navigator.canShare&&navigator.canShare({files:[i]})?navigator.share({title:e,text:t,file:[i]}).then(()=>console.log("Successful share")).catch(e=>console.log("Error sharing",e)):alert("Web Share API is not supported in your browser.\nTry using it on your smartphone or tablet...")})},trySaveGist:function(e){e&&e.file&&e.file.length>0?e.get(e.file).then(t=>{const n=Object.keys(t.body.files);console.log(n),c.promptFileNameAndFormat(({editingName:t,yarnData:n})=>{e.edit(e.file,{files:{[t]:{content:n}}}),Swal.fire("Saved!","The Yarn has been saved to gitst "+e.file,"success"),c.lastStorageHost("GIST"),c.isDocumentDirty(!1),app.refreshWindowTitle()},n)}):(Swal.fire("Not configured","Your github settings are not configured","warning"),app.ui.openSettingsDialog())},tryOpenGist:function(e){e&&e.file&&e.file.length>0?e.get(e.file).then(e=>{const t=e.body.files,n={};Object.keys(t).forEach(e=>{n[e]=e}),Swal.fire({title:"ðŸ™ Open file from a gist",input:"select",inputOptions:n,inputAttributes:{autocomplete:"off"},inputPlaceholder:"Select a file from the gist",showCancelButton:!0}).then(({value:e})=>{if(e){const n=t[e].content,i=c.getFileType(e);c.loadData(n,i,!0),c.isDocumentDirty(!1),c.lastStorageHost("GIST"),c.editingPath(null),c.editingName(e),app.refreshWindowTitle()}})}):(Swal.fire("Not configured","Your github settings are not configured","warning"),app.ui.openSettingsDialog())},tryOpenFolder:function(){c.openFileDialog(i("#open-folder"),c.openFolder)},tryAppend:function(){c.openFileDialog(i("#open-file"),c.appendFile)},save:function(){app.editingVisualStudioCodeFile()||(c.editingPath()?c.trySaveCurrent():c.trySave(o.FILETYPE.JSON))},trySave:function(e){c.editingType(e),c.saveFileDialog(i("#save-file"),e,c.getSaveData(e))},trySaveCurrent:function(){if("GIST"===c.lastStorageHost()){const e=app.gists;e.get(e.file).then(t=>{const n=c.getSaveData(c.editingType());console.log(c.editingName()),e.edit(e.file,{files:{[c.editingName()]:{content:n}}}),c.lastStorageHost("GIST"),c.isDocumentDirty(!1),app.refreshWindowTitle()})}else c.editingPath().length>0&&c.editingType().length>0&&c.saveTo(c.editingPath(),c.getSaveData(c.editingType()))},doesFileExist:function(e){return!1},triggerPasteClipboard:function(){if(app.electron){const e=app.electron.clipboard.readText();app.clipboard=e,document.execCommand("paste")}else navigator.clipboard&&navigator.clipboard.readText().then(e=>{app.clipboard=e}).catch(e=>{app.clipboard=app.editor.getSelectedText(),console.log("No clipboard access",e,"using local instead")}),setTimeout(()=>app.insertTextAtCursor(app.clipboard),100)},triggerCopyClipboard:function(){if(app.electron)app.electron.clipboard.writeText(app.editor.getSelectedText()),app.clipboard=app.editor.getSelectedText();else{const e=app.editor.getSelectedText();app.clipboard=e,navigator.clipboard&&e.length>0&&navigator.clipboard.writeText(e).then(()=>{app.clipboard=e})}}}}).call(this,n("Z1dp"),n("EVdn"))},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5dEm":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var i=n("oj90");const r=function(t){const n=this;this.canvas=e(".arrows")[0],this.context=n.canvas.getContext("2d"),this.updateArrowsThrottle=50,this.updateArrowsInterval=void 0,this.deferredArrowsDrawInterval=void 0,this.nextArrowsUpdate=Number.NEGATIVE_INFINITY,this.isDrawingArrows=!1,this.selectedNodes=[],this.scale=1,this.offset={x:0,y:0},this.transform={x:0,y:0},this.isMarqueeEnabled=!1,this.marqueeSelection=[],this.marqueeRect={x1:0,y1:0,x2:0,y2:0},this.marqueeOffset=[0,0],this.zoomSpeed=.005,this.zoomLimitMin=.05,this.zoomLimitMax=1,this.setThrottle=function(e,t){const r=t?t.target.value:e;n.updateArrowsThrottle=i.Utils.clamp(r,16,250)},this.setTranslation=function(e,t,i=0){n.transform.x=e,n.transform.y=t,n.translate(i)},this.shiftTranslation=function(e,t,i=0){n.setTranslation(n.transform.x+e,n.transform.y+t,i)},this.translate=function(t){t&&n.startUpdatingArrows(),e(".nodes-holder").finish().transition({transform:"matrix("+n.scale+",0,0,"+n.scale+","+n.transform.x+","+n.transform.y+")"},t||0,"easeInQuad",(function(){t&&n.stopUpdatingArrows(),n.updateArrows()}))},this.toWorkspaceCoordinates=(e,i)=>({x:(e-t.workspace.transform.x)/n.scale,y:(i-t.workspace.transform.y)/n.scale}),this.onPanLeft=function(){n.shiftTranslation(n.getPanAmount(),0,100)},this.onPanRight=function(){n.shiftTranslation(-n.getPanAmount(),0,100)},this.onPanUp=function(){n.shiftTranslation(0,n.getPanAmount(),100)},this.onPanDown=function(){n.shiftTranslation(0,-n.getPanAmount(),100)},this.getPanAmount=function(){return t.input.isShiftDown?100*n.scale:500*n.scale},this.setZoom=function(e){n.scale=e/4,n.translate(200)},this.onZoom=function(e,t,r){const o=n.scale,s=r*n.zoomSpeed*n.scale;n.scale=i.Utils.clamp(n.scale+s,n.zoomLimitMin,n.zoomLimitMax);const a=e-n.transform.x,c=t-n.transform.y,l=a-a*(n.scale/o),u=c-c*(n.scale/o);n.shiftTranslation(l,u)},this.onDragStart=function(e){n.offset.x=e.x,n.offset.y=e.y},this.onDragUpdate=function(e){n.isMarqueeEnabled&&t.workspace.onMarqueeEnd(),t.workspace.shiftNodes(e)},this.onDragEnd=function(){t.data.saveAppStateToLocalStorage()},this.onMarqueeStart=function(e){n.isMarqueeEnabled=!0,n.offset.x=e.x,n.offset.y=e.y,n.marqueeSelection=[],n.marqueeOffset[0]=0,n.marqueeOffset[1]=0,n.marqueeRect={x1:0,y1:0,x2:0,y2:0}},this.onMarqueeUpdate=function(e){n.isMarqueeEnabled&&(n.updateMarqueeRect(e),n.selectNodesInsideMarquee())},this.updateMarqueeRect=function(t){t.x>n.offset.x&&t.y<n.offset.y?(n.marqueeRect.x1=n.offset.x,n.marqueeRect.y1=t.y,n.marqueeRect.x2=t.x,n.marqueeRect.y2=n.offset.y):t.x>n.offset.x&&t.y>n.offset.y?(n.marqueeRect.x1=n.offset.x,n.marqueeRect.y1=n.offset.y,n.marqueeRect.x2=t.x,n.marqueeRect.y2=t.y):t.x<n.offset.x&&t.y<n.offset.y?(n.marqueeRect.x1=t.x,n.marqueeRect.y1=t.y,n.marqueeRect.x2=n.offset.x,n.marqueeRect.y2=n.offset.y):(n.marqueeRect.x1=t.x,n.marqueeRect.y1=n.offset.y,n.marqueeRect.x2=n.offset.x,n.marqueeRect.y2=t.y),e("#marquee").css({display:"block",x:n.marqueeRect.x1,y:n.marqueeRect.y1,width:Math.abs(n.marqueeRect.x1-n.marqueeRect.x2),height:Math.abs(n.marqueeRect.y1-n.marqueeRect.y2)})},this.selectNodesInsideMarquee=function(){const e=n.toWorkspaceCoordinates(n.marqueeRect.x1,n.marqueeRect.y1),r=n.toWorkspaceCoordinates(n.marqueeRect.x2,n.marqueeRect.y2),o={left:e.x,right:r.x,top:e.y,bottom:r.y};t.nodes().forEach(e=>{const t=n.marqueeSelection.indexOf(e),r=t>=0,s=e.x(),a=e.y(),c={left:s,right:s+e.width,top:a,bottom:a+e.height},l=i.Utils.rectanglesOverlap(o,c);l&&!r&&(n.selectNodes(e),n.marqueeSelection.push(e)),!l&&r&&(n.deselectNodes(e),n.marqueeSelection.splice(t,1))})},this.onMarqueeEnd=function(){n.isMarqueeEnabled&&(0==n.marqueeSelection.length&&n.deselectAll(),n.isMarqueeEnabled=!1,n.marqueeSelection=[],n.marqueeRect={x1:0,y1:0,x2:0,y2:0},e("#marquee").css({display:"none",x:0,y:0,width:0,height:0}))},this.shiftNodes=function(e){const t={x:e.x-n.offset.x,y:e.y-n.offset.y};n.shiftTranslation(t.x,t.y),n.offset=e},this.startUpdatingArrows=function(){n.stopUpdatingArrows(),n.updateArrowsInterval=setInterval(n.updateArrows,n.updateArrowsThrottle)},this.stopUpdatingArrows=function(){n.updateArrowsInterval&&(window.clearInterval(n.updateArrowsInterval),n.updateArrowsInterval=void 0)},this.updateArrows=function(){if(n.isDrawingArrows)return;const i=(new Date).getTime();if(i<n.nextArrowsUpdate)return void(n.deferredArrowsDrawInterval||(n.deferredArrowsDrawInterval=window.setTimeout(n.updateArrows,n.nextArrowsUpdate+n.updateArrowsThrottle-i)));n.isDrawingArrows=!0,window.clearInterval(n.deferredArrowsDrawInterval),n.deferredArrowsDrawInterval=void 0,n.nextArrowsUpdate=i+n.updateArrowsThrottle;const r=t.nodes(),o=e(".nodes-holder").offset(),s=n.scale,a=3*s,c=8*s,l=6*s,u=[],d=[];n.canvas.width=e(window).width(),n.canvas.height=e(window).height(),n.context.lineWidth=a,n.context.strokeStyle=n.context.fillStyle="rgba(0, 0, 0, 1)";for(let t of r)if(t.halfWidth=e(t.element).width()/2,t.halfHeight=e(t.element).height()/2,t.linkedTo().length){const e=(t.x()+t.halfWidth)*s+o.left,n=(t.y()+t.halfHeight)*s+o.top;for(let i of t.linkedTo()){const t=(i.x()+i.halfWidth)*s+o.left,r=(i.y()+i.halfHeight)*s+o.top,a=Math.sqrt((e-t)*(e-t)+(n-r)*(n-r)),f={x:(t-e)/a,y:(r-n)/a},p=(110+160*(1-Math.max(Math.abs(f.x),Math.abs(f.y))))*s,h={x:e+f.x*p,y:n+f.y*p},g={x:t-f.x*p,y:r-f.y*p};u.push({x1:h.x,y1:h.y,x2:g.x,y2:g.y}),d.push({x1:g.x+10*f.x,y1:g.y+10*f.y,x2:g.x-f.x*c-f.y*l,y2:g.y-f.y*c+f.x*l,x3:g.x-f.x*c+f.y*l,y3:g.y-f.y*c-f.x*l})}}n.context.beginPath();for(let e of u)n.context.moveTo(e.x1,e.y1),n.context.lineTo(e.x2,e.y2);n.context.stroke(),n.context.beginPath();for(let e of d)n.context.moveTo(e.x1,e.y1),n.context.lineTo(e.x2,e.y2),n.context.lineTo(e.x3,e.y3);n.context.fill(),n.isDrawingArrows=!1},this.bringToFront=function(t){const n=e(t),r=i.Utils.getHighestZ(n.parent());n.css("z-index",r+1)},this.selectAll=function(){n.selectNodes(t.nodes())},this.deselectAll=function(){n.deselectNodes(t.nodes())},this.selectNodes=function(e){const t=Array.isArray(e)?e:[e];for(let e of t)n.selectedNodes.includes(e)||(n.selectedNodes.push(e),e.setSelected(!0))},this.deselectNodes=function(e){const t=Array.isArray(e)?e:[e];for(let e of t){const t=n.selectedNodes.indexOf(e);t>=0&&(n.selectedNodes.splice(t,1),e.setSelected(!1))}},this.getSelectedNodes=function(){return 1===n.selectedNodes.length?[n.selectedNodes[0]]:Array.apply(this,n.selectedNodes)},this.warpToNodeByIdx=function(e){n.warpToNode(t.nodes()[e]),t.focusedNodeIdx=e},this.warpToSelectedNodeByIdx=function(e){n.warpToNode(n.getSelectedNodes()[e]),t.focusedNodeIdx=e},this.warpToNode=function(e){e&&n.warpToXY(e.x()||e.createX,e.y()||e.createY)},this.warpToXY=function(t,i){const r=-t*n.scale,o=-i*n.scale,s=e(window).width()/2,a=e(window).height()/2,c=100*n.scale/2,l=100*n.scale/2;n.setTranslation(r+s-c,o+a-l,100)},this.alignY=function(){const e=t.nodes().filter(e=>e.selected).sort((e,t)=>e.y()>t.y()?1:e.y()<t.y()?-1:0),n=e.shift();e.length?e.forEach((e,t)=>{const i=n.y()+210*(t+1);e.moveTo(n.x(),i)}):alert("Select nodes to align")},this.alignX=function(){const e=t.nodes().filter(e=>e.selected).sort((e,t)=>e.x()>t.x()?1:e.x()<t.x()?-1:0),n=e.shift();e.length?e.forEach((e,t)=>{const i=n.x()+210*(t+1);e.moveTo(i,n.y())}):alert("Select nodes to align")},this.arrangeSpiral=function(){n.getSelectedNodes().forEach((e,t)=>{e.moveTo(Math.cos(.5*t)*(600+30*t),Math.sin(.5*t)*(600+30*t))})},this.sortAlphabetical=function(){const t=n.getSelectedNodes().sort((e,t)=>e.title().localeCompare(t.title()));if(!t.length)return;let i=Math.round(t.length/2),r=0,o=0;const s=e(t[0].element).width()+30,a=e(t[0].element).height()+30;t.forEach((e,n)=>{n%i?r+=1:(o+=1,r=0),1===n&&(o=0),e.moveTo(t[0].x()+r*s,t[0].y()+o*a)}),n.warpToNode(t[0])}}}).call(this,n("EVdn"))},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},INAQ:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return o}));var r=n("oj90");const o=function(t){const n=this,o=Object.freeze({Left:0,Middle:1,Right:2}),s=Object.freeze({Enter:13,Escape:27,Space:32,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,C:67,D:68,O:79,S:83,V:86,W:87,X:88,Y:89,Z:90});this.mouse={x:0,y:0},this.isDragging=!1,this.isScreenTouched=!1,this.isMiddleButtonDown=!1,this.isLeftButtonDown=!1,this.isShiftDown=!1,this.trackMouseEvents=function(){e(document).on("pointerdown",e=>{if(n.isDragging="nodes"===e.target.className,n.mouse.x=e.pageX,n.mouse.y=e.pageY,n.isMiddleButtonDown=e.button===o.Middle,this.isLeftButtonDown=e.button===o.Left,t.inWorkspace())switch(e.altKey||e.shiftKey||t.workspace.deselectAll(),e.button){case o.Left:t.workspace.onMarqueeStart({x:e.pageX,y:e.pageY});break;case o.Middle:t.workspace.onDragStart({x:e.pageX,y:e.pageY})}else t.inEditor()&&e.button===o.Right&&(t.guessPopUpHelper(),e.preventDefault())}),window.addEventListener("touchstart",()=>{n.isScreenTouched=!0}),e(document).on("pointermove",e=>{n.mouse.x=e.pageX,n.mouse.y=e.pageY}),e(document).on("mousemove touchmove",e=>{if(n.isDragging){t.focusedNodeIdx=-1;const i=n.isScreenTouched&&e.changedTouches?e.changedTouches[0].pageX:e.pageX,r=n.isScreenTouched&&e.changedTouches?e.changedTouches[0].pageY:e.pageY;t.inWorkspace()&&(e.altKey||n.isMiddleButtonDown||n.isScreenTouched?t.workspace.onDragUpdate({x:i,y:r}):t.workspace.onMarqueeUpdate({x:i,y:r}))}}),e(document).on("pointerup touchend",e=>{n.isScreenTouched=!1,n.isDragging=!1,e.button===o.Left&&(n.isLeftButtonDown=!1),e.button===o.Middle&&(n.isMiddleButtonDown=!1),t.inWorkspace()&&(t.workspace.onDragEnd(),t.workspace.onMarqueeEnd())}),e(".nodes").mousewheel(e=>{e.altKey||t.inWorkspace()&&(t.workspace.onZoom(e.pageX,e.pageY,e.deltaY),e.preventDefault())}),e(document).contextmenu(n=>{if(!t.inWorkspace())return;const i=e(n.target).hasClass("nodes")||e(n.target).parents(".nodes").length;if(n.button===o.Right&&i){const{x:e,y:i}=t.workspace.toWorkspaceCoordinates(n.pageX,n.pageY);t.newNodeAt(e,i)}return!i})},this.trackKeyboardEvents=function(){e(document).on("keyup keydown",e=>{n.isShiftDown=e.shiftKey}),e(document).on("keyup",(function(e){if(e.keyCode===s.Space){if(t.inWorkspace()&&e.altKey||t.inEditor()&&!e.altKey)return;t.workspace.scale=1;const n=t.workspace.getSelectedNodes(),i=n.length>0,r=i>0?n:t.nodes();++t.focusedNodeIdx,(t.focusedNodeIdx<0||t.focusedNodeIdx>=r.length)&&(t.focusedNodeIdx=0),t.inWorkspace()?i?t.workspace.warpToSelectedNodeByIdx(t.focusedNodeIdx):t.workspace.warpToNodeByIdx(t.focusedNodeIdx):t.inEditor()&&t.editNode(t.nodes()[t.focusedNodeIdx])}else e.keyCode===s.Z&&(t.previewStory.changeTextScrollSpeed(200),-1!=t.previewStory.vnSelectedChoice&&t.previewStory.vnSelectChoice())})),e(document).on("keydown",e=>{if(t.inWorkspace()){if((e.metaKey||e.ctrlKey)&&e.shiftKey)switch(e.keyCode){case s.S:t.data.trySave(r.FILETYPE.JSON);break;case s.A:t.data.tryAppend()}if((e.metaKey||e.ctrlKey)&&e.altKey)switch(e.keyCode){case s.S:t.data.trySave(r.FILETYPE.YARN)}else if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.C:t.nodeClipboard=t.cloneNodeArray(t.workspace.getSelectedNodes());break;case s.D:t.workspace.deselectAll();break;case s.O:t.data.tryOpenFile();break;case s.S:t.data.trySaveCurrent();break;case s.X:const e=t.workspace.getSelectedNodes();t.nodeClipboard=t.cloneNodeArray(e),t.deleteNodes(e);break;case s.Y:t.historyDirection("redo");break;case s.Z:t.historyDirection("undo")}else e.keyCode===s.Delete||"Delete"===e.key?t.confirmDeleteNodes(t.workspace.getSelectedNodes()):t.$searchField.is(":focus")||e.ctrlKey||e.metaKey||(e.keyCode===s.A||e.keyCode===s.Left?t.workspace.onPanLeft():e.keyCode===s.D||e.keyCode===s.Right?t.workspace.onPanRight():e.keyCode===s.W||e.keyCode===s.Up?t.workspace.onPanUp():e.keyCode!==s.S&&e.keyCode!==s.Down||t.workspace.onPanDown())}}),e(document).on("keyup",e=>{if(t.inWorkspace())if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.A:t.workspace.selectAll();break;case s.V:t.pasteNodes()}else if(e.keyCode===s.Enter||"Enter"===e.key){const e=t.nodes()[t.focusedNodeIdx];e?t.editNode(e):t.editNode(t.nodes()[0])}}),e(document).on("keydown",(function(e){if(t.inEditor())if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.C:n.clipboard=t.editor.getSelectedText();break;case s.X:document.execCommand("copy"),t.clipboard=t.editor.getSelectedText(),t.insertTextAtCursor("")}else switch(e.keyCode){case s.Escape:t.saveNode()}})),e(document).on("keyup",(function(e){if(t.inEditor()&&(e.metaKey||e.ctrlKey)&&e.altKey)switch(e.keyCode){case s.Enter:t.saveNode()}})),e(document).on("keydown",(function(e){if(t.ui.settingsDialogVisible())switch(e.keyCode){case s.Escape:t.ui.closeSettingsDialog()}})),e(document).on("keyup keydown pointerdown pointerup",(function(e){t.inEditor()&&t.updateEditorStats()})),e(document).on("keydown",e=>{if(t.editing()&&!t.previewStory.finished)switch(e.keyCode){case s.Z:t.previewStory.changeTextScrollSpeed(10),-1!=t.previewStory.vnSelectedChoice&&t.previewStory.vnSelectChoice();break;case s.Up:-1!=t.previewStory.vnSelectedChoice&&t.previewStory.vnUpdateChoice(-1);break;case s.Down:-1!=t.previewStory.vnSelectedChoice&&t.previewStory.vnUpdateChoice(1)}})},this.initKnockoutBindings=function(){i.bindingHandlers.preventBubble={init:function(e,t){var n=i.utils.unwrapObservable(t());i.utils.registerEventHandler(e,n,(function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))}},i.bindingHandlers.mousedown={init:function(t,n,r,o,s){var a=i.unwrap(n());e(t).mousedown((function(){a()}))}}};n.initKnockoutBindings(),n.trackMouseEvents(),n.trackKeyboardEvents()}}).call(this,n("EVdn"),n("Z1dp"))},P0sH:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return h}));var r=n("owJe"),o=n("W2Rx"),s=n("5dEm"),a=n("INAQ"),c=n("pYPP"),l=n("fkuv"),u=n("2Qx2"),d=n("P3rc"),f=n("oj90"),p=n("l8+o"),h=function(t,h){const g=this;this.setTheme=function(e,t){let n=t?t.target.value:e;document.getElementById("theme-stylesheet").href=f.Utils.getPublicPath(`themes/${n}.css`)},this.setLanguage=function(e,t){const n=t?t.target.value:e;spoken.recognition.lang=n,Object(r.load_dictionary)(g.settings.language().split("-")[0])},this.setMarkupLanguage=function(e,t){t&&t.target.value;g.richTextFormatter=new p.a(g),g.mustRefreshNodes.notifySubscribers()},this.setPlaytestStyle=function(e,t){const n=t?t.target.value:e;g.playtestStyle=n},this.setGistCredentials=function(e,t){const{token:i,file:r}=e,o=new(n("XZLo"))({token:i});g.gists=o,g.gists.file=r},this.input=new a.a(g),this.settings=new c.a(g),this.workspace=new s.a(g),this.ui=new l.a(g),this.previewStory=new d.a,this.richTextFormatter=new p.a(g),this.data=u.a,this.name=e.observable(t),this.version=e.observable(h),this.editing=e.observable(null),this.nodes=e.observableArray([]),this.tags=e.observableArray([]),this.mustRefreshNodes=e.observable(),this.mustUpdateTags=!0,this.nodeHistory=[],this.nodeFuture=[],this.editingHistory=[],this.editingSaveHistoryTimeout=null,this.focusedNodeIdx=-1,this.isElectron=!1,this.editor=null,this.nodeVisitHistory=[],this.clipboard="",this.nodeClipboard=[],this.speachInstance=null,this.editingPath=e.observable(null),this.$searchField=i(".search-field"),this.isEditorInPreviewMode=!1,this.inEditor=()=>g.editing()&&!g.ui.isDialogOpen(),this.inWorkspace=()=>!g.editing()&&!g.ui.isDialogOpen(),this.run=function(){var t="Unknown OS";-1!=navigator.platform.indexOf("Win")&&(t="Windows"),-1!=navigator.platform.indexOf("Mac")&&(t="MacOS"),-1!=navigator.platform.indexOf("X11")&&(t="UNIX"),-1!=navigator.platform.indexOf("Linux")&&(t="Linux"),-1!=navigator.platform.indexOf("Linux")&&(t="Linux"),g.isElectron=navigator.userAgent.toLowerCase().includes("electron");var n=navigator.userAgent||navigator.vendor||window.opera;let r;/android|iPad|iPhone|iPod/.test(n.toLowerCase())&&!window.MSStream&&(t="mobile"),"Windows"==t&&(g.workspace.zoomSpeed=.1),window.addEventListener("beforeunload",e=>(this.data.saveAppStateToLocalStorage(),null)),window.addEventListener("DOMContentLoaded",e=>{this.data.loadAppStateFromLocalStorage();const t=new URL(window.location),n=t.searchParams.get("text")||t.searchParams.get("url");null!==n&&g.insertTextAtCursor(n),console.log(g.settings)});const o=i("#addPwa")[0];o.style.display="none",window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),r=e,o.style.display="block",o.addEventListener("click",e=>{o.style.display="none",r.prompt(),r.userChoice.then(e=>{"accepted"===e.outcome?(console.log("User accepted the A2HS prompt"),o.style.display="none"):console.log("User dismissed the A2HS prompt"),r=null})})}),i("#app").show(),e.applyBindings(g,i("#app")[0]),g.editingVisualStudioCodeFile()||g.newNode().title("Start"),g.settings.apply(),i(".search-title input").click(g.updateSearch),i(".search-body input").click(g.updateSearch),i(".search-tags input").click(g.updateSearch),g.$searchField.on("input",g.updateSearch),g.$searchField.on("keyup",(function(e){27==e.keyCode?g.clearSearch():g.searchWarp()})),"mobile"===t&&g.workspace.setZoom(3),i(window).on("resize",g.workspace.updateArrows),this.guessPopUpHelper=function(){/color=#([a-zA-Z0-9]{3,6})$/.test(g.getTagBeforeCursor())&&g.insertColorCode()},this.insertEmoji=function(){this.emPicker.toggle(),g.togglePreviewMode(!0),i("#emojiPicker-container").css({left:g.input.mouse.x-200,top:g.input.mouse.y-125}),i("#emojiPicker-container").show()},this.insertColorCode=function(){i("#colorPicker-container").is(":visible")||(i("#colorPicker").spectrum("set",g.editor.getSelectedText()),i("#colorPicker").spectrum("toggle"),i("#colorPicker-container").css({left:g.input.mouse.x-70,top:g.input.mouse.y-50}),i("#colorPicker-container").show(),g.togglePreviewMode(!0),setTimeout(()=>{const e=i("#colorPicker").spectrum("get");g.applyPickerColorEditor(e)},100))},this.applyPickerColorEditor=function(e){const t=JSON.parse(JSON.stringify(g.editor.selection.getRange()));g.editor.selection.setRange(t);const n=e.toHexString().replace("#","");g.editor.session.replace(t,n),g.editor.selection.setRange({start:g.editor.getCursorPosition(),end:{row:g.editor.getCursorPosition().row,column:g.editor.getCursorPosition().column-n.length}}),g.togglePreviewMode(!0)},document.addEventListener("contextmenu",(function(e){g.editing()&&e.preventDefault()}),!1),this.speakText=function(){const e=g.editor.getSelectedText(),t=e||g.editor.getSession().getValue();spoken.voices().then(e=>{const n=g.settings.language().split("-")[0],i=e.filter(e=>!e.lang.indexOf(n));i.length?(console.log("Loaded voice",i[0]),spoken.say(t,i[0])):spoken.say(t)})},this.startCapture=function(){spoken.listen({continuous:!0}).then(e=>{if(console.log(e),g.editing())g.insertTextAtCursor(e+". "),document.getElementById("speakTextBtnBubble").title="Transcribe";else if("open"===e){console.log("try open...");var t=g.getFirstFoundNode(g.$searchField.val().toLowerCase()).title();console.log("try open:",t),g.openNodeByTitle(t)}else"clear"===e?(g.$searchField.val(""),g.updateSearch()):(g.$searchField.val(e),g.updateSearch());spoken.listen.stop().then(()=>{g.editing()&&(document.getElementById("speakTextBtnBubble").style.visibility="hidden"),this.continueCapture()})}).catch(e=>spoken.listen.stop().then(()=>this.continueCapture()))},this.continueCapture=function(){spoken.delay(500).then(()=>{spoken.recognition.continuous&&g.startCapture()})},this.toggleTranscribing=function(){const e=spoken.listen.available();var t=document.getElementById("speakTextBtnBubble");e&&g.settings.transcribeEnabled()?(spoken.listen.on.partial(e=>{g.editing()?(t.style.visibility="visible",t.title=`ðŸ—£ï¸ ${e} ðŸ¦œ`):g.$searchField.val(`ðŸ—£ï¸ ${e} ðŸ¦œ`)}),g.startCapture()):(t.style.visibility="hidden",spoken.recognition.continuous=!1,spoken.listen.stop())},this.hearText=function(){spoken.listen.available()?(spoken.listen.on.partial(e=>{console.log(e),document.getElementById("speakTextBtnBubble").title=`ðŸ—£ï¸ ${e} ðŸ¦œ`}),spoken.listen().then(e=>{g.insertTextAtCursor(e+" "),document.getElementById("speakTextBtnBubble").title="Transcribe"}).catch(e=>console.warn(e.message))):alert("Speech recognition not avaiilable!")},document.ondragover=document.ondrop=e=>{e.preventDefault()},document.body.ondrop=e=>{e.preventDefault();for(var t=0;t<e.dataTransfer.files.length;t++)u.a.appendFile(e.dataTransfer.files[t],e.dataTransfer.files[t].name,!1)},window.addEventListener("message",e=>{const t=e.data;switch(t.type){case"UpdateNode":g.nodes().forEach(e=>{e.title().trim()===t.payload.originalNodeTitle.trim()&&(e.title(t.payload.title),e.tags(t.payload.tags),e.body(t.payload.body),g.setYarnDocumentIsDirty())})}});var s=new CustomEvent("yarnReady");s.document=document,s.data=u.a,s.app=this,window.parent.dispatchEvent(s)},this.limitNodesUpdate=function(e){g.nodes.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:250}}),e(),g.nodes.limit(e=>()=>e())},this.getNodesConnectedTo=function(e){var t=[],n=g.nodes();for(var i in n)if(n[i]!=e&&n[i].isConnectedTo(e,!0)){var r=!1;for(var o in t)if(t[o]==n[i]){r=!0;break}r||t.push(n[i])}return t},this.matchConnectedColorID=function(e){var t=g.getNodesConnectedTo(e);for(var n in t)t[n].colorID(e.colorID())},this.quit=function(){g.isElectron},this.validateTitle=function(){var e=document.getElementById("editorTitle").value;g.getOtherNodeTitles().includes(e)||g.titleExistsTwice(e)?(i("#editorTitle").css({color:"red"}),i("#editorTitle").attr("title","Another node has the same title")):(i("#editorTitle").css({color:"#666"}),i("#editorTitle").attr("title",""))},this.refreshWindowTitle=function(){let e="";"LOCAL"===u.a.lastStorageHost()?e="Yarn - "+(u.a.editingPath()||u.a.editingName())+" "+(u.a.isDocumentDirty()?"*":""):"GIST"===u.a.lastStorageHost()&&(e="Gist - "+(u.a.editingPath()||u.a.editingName())+" "+(u.a.isDocumentDirty()?"*":"")),g.electron?g.electron.remote.getCurrentWindow().setTitle(e):document.title=e},this.usingVisualStudioCodeExtension=function(){return!!window.vsCodeApi},this.editingVisualStudioCodeFile=function(){return!0===window.editingVsCodeFile},this.setYarnDocumentIsDirty=function(){g.usingVisualStudioCodeExtension()&&g.editingVisualStudioCodeFile()&&window.vsCodeApi.postMessage({type:"DocumentEdit",payload:u.a.getSaveData(u.a.editingType())})},this.recordNodeAction=function(e,t){if(g.nodeFuture.length>0){for(var n=0;n<g.nodeFuture.length;n++){delete g.nodeFuture.pop().node}delete g.nodeFuture,g.nodeFuture=[]}var i={action:e,node:t,lastX:t.x(),lastY:t.y()};"removed"==e&&(i.lastY+=80),g.nodeHistory.push(i),g.setYarnDocumentIsDirty()},this.historyDirection=function(e){function t(e){var t=g.nodes.indexOf(e);t>=0&&g.nodes.splice(t,1),g.updateNodeLinks()}var n=null;if(n="undo"==e?g.nodeHistory.pop():g.nodeFuture.pop()){var i=n.action,r=n.node;"undo"==e?("created"==i?(n.lastX=r.x(),n.lastY=r.y(),t(r)):"removed"==i&&g.recreateNode(r,n.lastX,n.lastY),g.nodeFuture.push(n),g.setYarnDocumentIsDirty()):("created"==i?g.recreateNode(r,n.lastX,n.lastY):"removed"==i&&t(r),g.nodeHistory.push(n),g.setYarnDocumentIsDirty())}},this.recreateNode=function(e,t,n){g.nodes.push(e),e.moveTo(t,n),g.updateNodeLinks()},this.setSelectedColors=function(e){var t=g.workspace.getSelectedNodes();for(var n in t.splice(t.indexOf(e),1),t)t[n].colorID(e.colorID())},this.pasteNodes=function(){g.nodeClipboard.length&&(g.workspace.deselectAll(),g.nodeClipboard.forEach((function(e){var t=new o.a({title:g.getUniqueTitle(e.title()),body:e.body(),tags:e.tags(),colorID:e.colorID(),x:e.createX,y:e.createY});g.nodes.push(t),g.workspace.selectNodes(t),g.recordNodeAction("created",t)})),g.updateNodeLinks())},this.confirmDeleteNodes=function(e){const t=Array.isArray(e)?void 0:e,n=Array.isArray(e)?[...e]:t&&t.selected?[...g.workspace.getSelectedNodes()]:[e];n.length&&Swal.fire({title:"Are you sure?",text:`${n.length} ${1===n.length?"node":"nodes"} will be deleted.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&g.deleteNodes(n)})},this.deleteNodes=function(e){const t=Array.isArray(e)?e:[e],n=[];for(let e=t.length-1;e>=0;--e)n.push(t[e].remove());Promise.all(n).then(()=>{g.limitNodesUpdate(()=>{for(let e=t.length-1;e>=0;--e)g.deleteNode(t[e]);g.updateNodeLinks(),g.workspace.deselectNodes(t),g.workspace.updateArrows()})})},this.deleteNode=function(e){const t=g.nodes.indexOf(e);t>=0&&(g.recordNodeAction("removed",e),g.nodes.splice(t,1)),g.setYarnDocumentIsDirty()},this.cloneNodeArray=function(e){return e.map((function(e){return new o.a({title:e.title(),body:e.body(),tags:e.tags(),colorID:e.colorID(),x:e.x()+10,y:e.y()+10})}))},this.newNode=function(e=!0){var t=new o.a;return g.nodes.push(t),e&&g.updateNodeLinks(),g.recordNodeAction("created",t),t},this.newNodeAt=function(e,t){var n=new o.a({x:e-100,y:t-100});return g.nodes.push(n),g.updateNodeLinks(),g.recordNodeAction("created",n),n},this.searchTextInEditor=function(e=!0){e?g.editor.execCommand("find"):g.editor.searchBox&&g.editor.searchBox.hide()},this.showRandomQuote=function(){i.ajax({url:"https://api.forismatic.com/api/1.0/?",dataType:"jsonp",data:"method=getQuote&format=jsonp&lang=en&jsonp=?",success:function(e){alert(e.quoteText+"\n\n-"+e.quoteAuthor)}})},this.editNode=function(e){if(!e.active())return;if(g.settings.alwaysOpenNodesInVisualStudioCodeEditor())return void g.editNodeInVisualStudioCodeEditor(e);g.editing()&&g.editing()!==e&&g.saveNode(!1),e.oldTitle=e.title(),g.editing(e),g.mustUpdateTags=!0,i(".node-editor").css({opacity:0}).transition({opacity:1},250),i(".node-editor .form").css({y:"-100"}).transition({y:"0"},250),g.editor=ace.edit("editor"),g.editor.navigateFileEnd(),i("#colorPicker").spectrum({flat:!0,showButtons:!1,showInput:!0,showPalette:!0,preferredFormat:"hex",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"]],move:function(e){g.applyPickerColorEditor(e)},clickoutFiresChange:!0});const t=ace.require("ace/ext/language_tools"),n=f.Utils.createAutocompleter(["string.llink","string.rlink"],g.getOtherNodeTitles(),"Node Link");t.setCompleters([n,t.keyWordCompleter,t.textCompleter,t.snippetCompleter]);let r=void 0;g.editor.getSession().on("change",(function(e){const t=i("#toglAutocomplete").prop("checked");"insert"===e.action&&t&&(r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,g.richTextFormatter.completableTags.forEach(e=>{g.getTagBeforeCursor()===e.Start&&(e.Completion&&g.insertTextAtCursor(e.Completion),e.Offset&&g.moveEditCursor(e.Offset),e.Func&&e.Func())})},200))})),this.emPicker=new EmojiPicker(document.getElementById("emojiPickerDom"),e=>{g.insertTextAtCursor(e.char),this.emPicker.toggle(),g.togglePreviewMode(!1)}),g.toggleTranscribing(),g.toggleNightMode(),g.toggleShowCounter(),g.toggleWordCompletion(),g.toggleSpellCheck(),g.validateTitle(),g.updateEditorStats(),g.$searchField.val().length>0&&i(".search-body input").is(":checked")&&g.editor.findAll(g.$searchField.val())},this.editNodeInVisualStudioCodeEditor=function(e){g.usingVisualStudioCodeExtension()?(g.setYarnDocumentIsDirty(),window.vsCodeApi.postMessage({type:"OpenNode",payload:{title:e.title().trim(),tags:e.tags().trim(),body:g.trimBodyLinks(e.body().trim())}})):console.error("Tried to open node in Visual Studio Code text editor but we're not in the Visual Studio Code extension")},this.chooseRelativePathImage=function(e){g.insertTextAtCursor(e)},this.openNodeByTitle=function(e){g.makeNodeWithName(e),g.nodes().forEach(t=>{t.title().trim().toLowerCase()===e.trim().toLowerCase()&&g.editNode(t)})},this.openLastEditedNode=function(){if(0===g.nodeVisitHistory.length)g.saveNode();else{const e=g.nodeVisitHistory.pop();g.propagateUpdateFromNode(g.editing()),g.openNodeByTitle(e)}},this.getSpellCheckSuggestionItems=function(){var e=Object(r.suggest_word_for_misspelled)(g.editor.getSelectedText());if(e){var t={};return e.forEach(e=>{t[e]={name:e,icon:"edit",callback:e=>{g.insertTextAtCursor(e)}}}),t}return!1},this.getThesaurusItems=function(){var e=n("GLdW")(g.editor.getSelectedText());if(!e)return!1;var t=[];if(Object.keys(e).forEach((function(n){e[n].forEach((function(e){t.includes(e)||e===n||t.push(e)}))})),t.length>0){var i={};return t.forEach(e=>{i[e]={name:e,icon:"edit",callback:e=>{g.insertTextAtCursor(e)}}}),i}return!1},this.toggleSpellCheck=function(){g.settings.spellcheckEnabled()?Object(r.enable_spellcheck)():Object(r.disable_spellcheck)()},this.toggleNightMode=function(){const e=g.settings.nightModeEnabled()?{filter:"invert(100%)"}:{filter:"invert(0%)"};i("#app").css(e),i("#app-bg").css(e),i(".tooltip").css(e),i(".node .body").css(e),i(".node-editor .form .editor-container .editor-preview").css(e)},this.toggleShowCounter=function(){g.settings.editorStatsEnabled()?i(".node-editor .form .bbcode-toolbar .editor-counter").css({display:"initial"}):i(".node-editor .form .bbcode-toolbar .editor-counter").css({display:"none"})},this.toggleWordCompletion=function(){g.editor.setOptions({enableBasicAutocompletion:app.settings.completeWordsEnabled(),enableLiveAutocompletion:app.settings.completeWordsEnabled()})},this.advanceStoryPlayMode=function(e=5){g.previewStory.finished?g.togglePlayMode(!1):(g.previewStory.changeTextScrollSpeed(e),-1!=g.previewStory.vnSelectedChoice&&5===e&&g.previewStory.vnSelectChoice())},this.togglePlayMode=function(e=!1){var t=i(".editor")[0],n=document.getElementById("storyPlayButton"),r=document.getElementById("editor-play");e?(g.togglePreviewMode(!1),t.style.display="none",r.style.display="flex",n.className="bbcode-button disabled",g.previewStory.emiter.on("finished",(function(){g.togglePlayMode(!1)})),g.previewStory.initYarn(JSON.parse(u.a.getSaveData(f.FILETYPE.JSON)),g.editing().title().trim(),"NVrichTextLabel",!1,"commandDebugLabel",g.playtestStyle)):(g.editor.session.setScrollTop(r.scrollTop),r.style.display="none",t.style.display="flex",n.className="bbcode-button",g.previewStory.terminate(),setTimeout(()=>{g.editing()&&g.editing().title()!==g.previewStory.node.title&&g.openNodeByTitle(g.previewStory.node.title),g.editor.focus()},1e3))},this.togglePreviewMode=function(e){const t=i(".editor")[0],n=i("#editor-preview")[0];g.isEditorInPreviewMode=e,e?(g.togglePlayMode(!1),t.style.display="none",n.style.display="block",n.innerHTML=g.richTextFormatter.richTextToHtml(g.editing().body(),!0),n.scrollTop=g.editor.renderer.scrollTop):(g.editor.session.setScrollTop(n.scrollTop),n.innerHTML="",n.style.display="none",t.style.display="flex",g.editor.focus(),g.editor.resize(),i("#colorPicker-container").is(":visible")&&i("#colorPicker-container").hide(),i("#emojiPicker-container").is(":visible")&&i("#emojiPicker-container").hide())},this.appendText=function(e){g.editing().body(g.editing().body()+e);var t=g.editor.session.getLength()-1,n=g.editor.session.getLine(t).length;g.editor.gotoLine(t+1,n)},this.moveEditCursor=function(e){var t=g.editor.getCursorPosition();g.editor.gotoLine(t.row+1,t.column+e),g.editor.focus()},this.insertTextAtCursor=function(e){g.editing()&&(g.editor.session.replace(g.editor.selection.getRange(),""),g.editor.session.insert(g.editor.getCursorPosition(),e),g.editor.focus())},this.getTagBeforeCursor=function(){const e=g.editor.getSelectionRange(),t=e.end.column,n=e.start.row,i=g.editor.session.getLine(n).substring(0,t);return i?g.richTextFormatter.identifyTag(i):""},this.saveNode=function(e=!0){const t=g.editing();if(t){const n=i("#editorTitle")[0];g.previewStory.terminate();const r=g.getFutureEditedNodeTitle();n.value=r,t.title(r),t.body(g.trimBodyLinks(t.body().trim())),g.makeNewNodesFromLinks(),g.propagateUpdateFromNode(t),g.workspace.updateArrows(),setTimeout(g.updateSearch,600),e&&(i(".node-editor").transition({opacity:0},250),i(".node-editor .form").transition({y:"-100"},250,(function(e){g.editing(null)}))),g.setYarnDocumentIsDirty()}},this.convertMarkup=function(){g.nodes().forEach(e=>{e.body(g.richTextFormatter.convert(e.body()))})},this.updateSearch=function(){for(var e=g.$searchField.val().toLowerCase(),t=i(".search-title input").is(":checked"),n=i(".search-body input").is(":checked"),r=i(".search-tags input").is(":checked"),o=0;o<g.nodes().length;o++){var s=g.nodes()[o],a=i(s.element);if(e.length>0&&(t||n||r)){var c=t&&s.title().toLowerCase().indexOf(e)>=0,l=n&&s.body().toLowerCase().indexOf(e)>=0,u=r&&s.tags().toLowerCase().indexOf(e)>=0;c||l||u?(s.active({title:c,body:l,tags:u}),a.clearQueue(),a.transition({opacity:1},500)):(s.active(!1),a.clearQueue(),a.transition({opacity:.25},500))}else s.active(!0),a.clearQueue(),a.transition({opacity:1},500)}},this.trimBodyLinks=function(e){return e.replace(/\[\[(.+?)\|\s*(.+?)\s*\]\]/g,"[[$1|$2]]")},this.updateNodeLinks=function(){for(let e of g.nodes())e.updateLinks()},this.propagateUpdateFromNode=function(e){var t=[],n=[];for(t.push(e);e=t.pop();)n.includes(e)||(n.push(e),e.updateLinks(),e.linkedTo().forEach(e=>{n.includes(e)||t.push(e)}),e.linkedFrom().forEach(e=>{n.includes(e)||t.push(e)}))},this.updateTagsRepository=function(){if(!g.mustUpdateTags)return;g.mustUpdateTags=!1;g.tags().forEach(e=>e.count=0),g.nodes().forEach(e=>{f.Utils.uniqueSplit(e.tags()," ").forEach(e=>{const t=g.tags().find(t=>t.text==e);if(t)++t.count;else{const t=(()=>{const e=g.tags().map(e=>e.id);for(let t=1;;++t)if(!e.includes(t))return t})();g.tags.push({id:t,style:"tag-style-"+t,text:e,count:1})}})});let e=g.tags().length;for(;e--;)0===g.tags()[e].count&&g.tags().splice(e,1)},this.makeNewNodesFromLinks=function(){if(!g.settings.createNodesEnabled())return console.info("Autocreate new nodes disabled");var e=g.editing().getLinksInNode();if(null!=e)for(var t=0;t<e.length;t++){const i=e[t].trim();var n=220*(t+1);g.makeNodeWithName(i,n)}},this.makeNodeWithName=function(e,t=220){const n=g.getOtherNodeTitles();e&&e.length>0&&!n.includes(e)&&e!=g.editing().title()&&g.newNodeAt(g.editing().x()+t,g.editing().y()-120).title(e)},this.titleExistsTwice=function(e){return g.nodes().filter(t=>t.title().trim()===e.trim()).length>1},this.getFutureEditedNodeTitle=function(){const e=i("#editorTitle")[0];return g.getUniqueTitle(e.value.trim())},this.getOtherNodeTitles=function(){var e=[];return g.nodes().forEach(t=>{g.editing()&&t.title()===g.editing().title()||e.push(t.title().trim())}),e},this.getHighlightedText=function(e){e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(/\&lt;\&lt;(.*?)\&gt;\&gt;/g,'<p class="conditionbounds">&lt;&lt;</p><p class="condition">$1</p><p class="conditionbounds">&gt;&gt;</p>')).replace(/\[\[([^\|]*?)\]\]/g,'<p class="linkbounds">[[</p><p class="linkname">$1</p><p class="linkbounds">]]</p>')).replace(/\[\[([^\[\]]*?)\|([^\[\]]*?)\]\]/g,'<p class="linkbounds">[[</p>$1<p style="color:red"><p class="linkbounds">|</p><p class="linkname">$2</p><p class="linkbounds">]]</p>')).replace(/[^:]\/\/(.*)?($|\n)/g,'<span class="comment">//$1</span>\n')).replace(/\/\*((.|[\r\n])*)?\*\//gm,'<span class="comment">/*$1*/</span>')).replace(/\/\%((.|[\r\n])*)?\%\//gm,'<span class="comment">/%$1%/</span>');var t=i("<div>");return t[0].innerHTML=e,t.find(".comment").each((function(){i(this).find("p").each((function(){i(this).removeClass()}))})),t.find(".linkname").each((function(){var e=i(this).text(),t=!1;for(var n in g.nodes())if(g.nodes()[n].title().toLowerCase()==e.toLowerCase()){t=!0;break}t||i(this).removeClass("linkname")})),e=t[0].innerHTML},this.updateLineNumbers=function(e){for(var t=e.split("\n"),n="",r=0;r<Math.max(1,t.length);r++)(0==r||r<t.length-1||t[r].length>0)&&(n+=r+1+"<br />");i(".editor-container .lines").html(n)},this.moveNodes=function(e,t){for(var n in g.nodes()){var i=g.nodes()[n];i.moveTo(i.x()+e,i.y()+t)}},this.getFirstFoundNode=function(e){return g.nodes().find(t=>t.title().toLowerCase().includes(e))},this.searchWarp=function(){var e=g.$searchField.val().toLowerCase().trim();if(""===e)g.workspace.warpToNodeByIdx(0);else{const t=g.getFirstFoundNode(e);g.workspace.warpToNodeByIdx(g.nodes.indexOf(t))}},this.clearSearch=function(){g.$searchField.val(""),g.updateSearch()},this.updateEditorStats=function(){var e=g.editor.getSession().getValue(),t=g.editor.getCursorPosition(),n=e.split("\n");i(".editor-counter .character-count").html(e.length),i(".editor-counter .line-count").html(n.length),i(".editor-counter .row-index").html(t.row),i(".editor-counter .column-index").html(t.column),u.a.saveAppStateToLocalStorage()},this.getUniqueTitle=function(e){var t=g.getOtherNodeTitles();if(e&&!t.includes(e))return e;var n=e||"Node",i=2;const r=n.match(/^(.*)(_([0-9]+))$/);if(r&&4===r.length&&(n=r[1],i=Number(r[3])),!t.includes(n))return n;for(;;++i){var o=n+"_"+i;if(!t.includes(o))return o}}}}).call(this,n("Z1dp"),n("EVdn"))},P3rc:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const i=n("Wd8k"),r=n("L8pc"),o=new i.Runner,s=n("+qE3").EventEmitter;var a=function(){this.visitedNodes=[];this.node={title:""};let e=new s;this.emiter=e;let t=[];this.commandsPassedLog=t;this.commandPassed="";let n=!0;this.finished=n,this.scrollTextStyle=!1,this.visitedChapters=[],this.self=this,this.vnChoiceSelectionCursor=">",this.startTimeWait,this.vnSelectedChoice=-1,this.vnTextScrollInterval,this.storyChapter="",this.choices={};let i,a,c,l,u,d,f,p,h=null;this.vnSelectChoice=()=>{(new Date).getTime()-this.startTimeWait<1e3||(this.choices[this.storyChapter].push(l.options[this.vnSelectedChoice]),l.select(this.vnSelectedChoice),this.emiter.emit("choiceMade",l.options[this.vnSelectedChoice]),a="",i=void 0,l=self.goToNext(),this.vnSelectedChoice=-1,this.changeTextScrollSpeed(111))},this.vnUpdateChoice=(t=0)=>{if(this.vnSelectedChoice<0)return;let n=this.vnSelectedChoice+t;n>l.options.length-1?n=0:n<0&&(n=l.options.length-1),this.vnSelectedChoice=n,i=document.createElement("DIV"),l.options.forEach((e,t)=>{const n=document.createElement("DIV");t==this.vnSelectedChoice?n.innerHTML=`${this.vnChoiceSelectionCursor} [${e}]`:n.innerHTML=`${this.vnChoiceSelectionCursor.replace(/.*/gm,"&nbsp;")} [${e}]`,n.onclick=e=>{e.stopPropagation(),this.vnSelectedChoice=t,this.vnUpdateChoice()},n.ondblclick=e=>{e.stopPropagation(),this.vnSelectedChoice=t,this.vnSelectChoice()},n.className="storyPreviewChoiceButton",i.appendChild(n)}),e.emit("choiceUpdated",this.vnSelectedChoice),self.updateVNHud()},this.changeTextScrollSpeed=(t=0)=>{if(t!==this.vnTextScrollInterval){if(this.vnTextScrollInterval=t,clearInterval(d),h<0){if(this.isFinishedParsing(l))return void e.emit("finished");if("TextResult"===l.constructor.name)return a=l.text,h=0,e.emit("textResult",a),void this.changeTextScrollSpeed(220);"OptionsResult"===l.constructor.name&&-1===this.vnSelectedChoice&&(this.vnSelectedChoice=0,this.vnUpdateChoice(),this.startTimeWait=(new Date).getTime())}0!==t&&(d=setInterval(this.scrollUpdateText,t))}},self.goToNext=()=>{const e=u.next().value;if(!this.isFinishedParsing(e))return"TextResult"===e.constructor.name&&e.data&&this.node.title!==e.data.title&&(a="",h=-1,this.node=self.jsonCopy(e.data),this.visitedNodes.push(e.data.title),this.emiter.emit("startedNode",this.node)),e},this.isFinishedParsing=e=>(void 0===e||null===l)&&(n||(n=!0,h=-1),n=!0,n),this.runCommand=()=>{e.emit("commandCall",l.text),t.push(l.text),l=self.goToNext(),this.isFinishedParsing(l)||("TextResult"===l.constructor.name&&(a+="\n"+l.text,e.emit("textResult",l.text)),"OptionsResult"===l.constructor.name&&(h=-1))},this.scrollUpdateText=()=>{if(!this.isFinishedParsing(l))if(h<0)"CommandResult"===l.constructor.name&&this.runCommand();else if(h>a.length){if("TextResult"===l.constructor.name){if(l=self.goToNext(),this.isFinishedParsing(l))return;"CommandResult"===l.constructor.name?this.runCommand():("TextResult"===l.constructor.name||"OptionsResult"===l.constructor.name)&&(h=-1)}}else"TextResult"===l.constructor.name&&(h+=1,c=a.substring(0,h),self.updateVNHud())},self.updateVNHud=()=>{if("TextResult"===l.constructor.name){for(;c.lastIndexOf("[img]")>c.lastIndexOf("[/img]");)h+=1,c=a.substring(0,h);for(;c.lastIndexOf("[")>c.lastIndexOf("]");)h+=1,c=a.substring(0,h)}this.scrollTextStyle&&(document.getElementById(f).innerHTML=r.parse(c)+"<br>"),void 0!==i&&(this.scrollTextStyle||(document.getElementById(f).innerHTML=""),document.getElementById(f).appendChild(i))},this.terminate=()=>{try{let t=document.getElementById(f);t&&(t.innerHTML=""),t=document.getElementById(p),t&&(t.innerHTML=""),i=void 0,e.removeAllListeners(),this.finished=!0}catch(e){console.warn(e)}},this.initYarn=(t,i,s,a,c,l)=>{const u=["#f5ff6f","#44fe66","#e00ec0","#e93ecf","#0ec0e0","#3ecfe9","#e4dbcb","#978e7e","#666","#2f919a","deeppink","black","#97E1E9","#576574","#6EA5E0","#9EDE74","#FFE374","#F7A666","#C47862"],d=["__Ì´Ä±Ì´Ì´Ì¡Ì¡Ì¡ Ì¡ÍŒlÌ¡Ì¡Ì¡ Ì¡ÍŒlÌ¡*Ì¡Ì¡ Ì´Ì¡Ä±Ì´Ì´Ì¡ Ì¡Ì¡Í¡| Ì²â–«Ì²Í¡ Ì²Ì²Í¡â–«Ì²Ì²Í¡Í¡ Ì²|Ì¡Ì¡Ì¡ Ì¡, Ì´Ì¡Ä±Ì´Ì¡Ì¡ Ì¡ÍŒlÌ¡Ì¡Ì¡Ì¡.___","Â°ÂºÂ¤Ã¸,Â¸Â¸,Ã¸Â¤ÂºÂ°`Â°ÂºÂ¤Ã¸,Â¸,Ã¸Â¤Â°ÂºÂ¤Ã¸,Â¸Â¸,Ã¸Â¤ÂºÂ°`Â°ÂºÂ¤Ã¸,Â¸","(===||:::::::::::::::>","Â¸.Â·Â´Â¯`Â·.Â´Â¯`Â·.Â¸Â¸.Â·Â´Â¯`Â·.Â¸><(((Âº>","=^..^=","|==|iiii|>-----"," Â¦ÌµÌ± ÌµÌ± ÌµÌ± ÌµÌ± ÌµÌ±(Ì¢ Ì¡Ì…Í‡â””Ì…Í‡â”˜Í‡Ì… (â–¤8×›âˆ’â—¦","(â™¥_â™¥)","é¾´â†€â—¡â†€é¾´","â˜ â–…â–’â–‘â˜¼â€¿â˜¼â–‘â–’â–… â˜,","â–“âš—_âš—â–“","<:3 )~~~","(â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ â”»â”â”»","â—â–¬â–¬â–¬â–¬à¹‘Û©Û©à¹‘â–¬â–¬â–¬â–¬â–¬â—","(/)(Ã–,,,,Ã–)(/)","/)^3^(\\","( . Y . )","< )))) ><","(ãƒŽà² ç›Šà² )ãƒŽå½¡","d(^o^)bÂ¸Â¸â™¬Â·Â¯Â·â™©Â¸Â¸â™ªÂ·Â¯Â·â™«Â¸Â¸","O=('-'Q)","-`áƒ¦Â´-","Ë(â¦¿á´¥â¦¿)Ë€","(â•¥ï¹â•¥)","âœ²Â´*ã€‚.â„Â¨Â¯`*âœ²ã€‚â„ã€‚*ã€‚Â¨Â¯`*âœ²","â–‚â–ƒâ–…â–‡â–ˆâ–“â–’â–‘Û©ÛžÛ©        Û©ÛžÛ©â–‘â–’â–“â–ˆâ–‡â–…â–ƒâ–‚","( â€¢_â€¢)O*Â¯`Â·.Â¸.Â·Â´Â¯`Â°Q(â€¢_â€¢ )","â”»â”â”»ï¸µ  (Â°â–¡Â°)/ ï¸µ â”»â”â”»","|Ì²Ì²Ì²Í¡Í¡Í¡ Ì²â–«Ì²Í¡ Ì²Ì²Ì²Í¡Í¡Ï€Ì²Ì²Í¡Í¡ Ì²Ì²Í¡â–«Ì²Ì²Í¡Í¡ Ì²|Ì¡Ì¡Ì¡ Ì¡ Ì´Ì¡Ä±Ì´Ì¡Ì¡ Ì¡ÍŒlÌ¡ Ì´Ì¡Ä±Ì´Ì´Ì¡ Ì¡lÌ¡*Ì¡Ì¡ Ì´Ì¡Ä±Ì´Ì´Ì¡ Ì¡Ì¡Í¡|Ì²Ì²Ì²Í¡Í¡Í¡ Ì²â–«Ì²Í¡ Ì²Ì²Ì²Í¡Í¡Ï€Ì²Ì²Í¡Í¡ Ì²Ì²Í¡â–«Ì²Ì²Í¡Í¡ |","â¤â—¦.Â¸Â¸.  â—¦âœ¿","Ê•Ê˜Ì…ÍœÊ˜Ì…Ê”","( à¹ Y à¹ )","Ê•â€¢Í¡Ì«â€¢Ê•*Í¡Ì«*Ê•â€¢Í¡Í“â€¢Ê”-Í¡Ì«-Ê•â€¢Í¡Ì«â€¢Ê”*Í¡Ì«*Ê”-Í¡Ì«-Ê”","(ã£â—•â€¿â—•)ã£","âšâ–ˆâ•â•â–ˆâš","â”€=â‰¡Î£((( ã¤â—•Ù„Íœâ—•)ã¤","^â†€á´¥â†€^","à¼¼ ã¤ Í¡â—• Ñ¾ Í¡â—• à¼½ã¤","á•¦(Ã²_Ã³Ë‡)á•¤","â”¬â”´â”¬â”´â”¤ ÍœÊ– Í¡Â°) â”œâ”¬â”´â”¬â”´","[Ì²Ì…$Ì²Ì…(Ì²Ì…5)Ì²Ì…$Ì²Ì…]","(êˆâŒ“êˆâœ¿)","(à¹‘â€¢Ì â‚ƒ â€¢Ì€à¹‘) â™¡","( â€¢ )( â€¢ )Ô…(â‰–âŒ£â‰–Ô…)","ï¼ˆã€‚ã€…Â°ï¼‰","âŠ‚(Â´ï½¥â—¡ï½¥âŠ‚ )âˆ˜ËšË³Â°","( ã…… )","(ï¾‰â˜‰ãƒ®âš†)ï¾‰ âŒ’*:ï½¥ï¾Ÿâœ§","(ï¼â€¸áƒš)","(â€¿|â€¿)","(ã‡(â€¢Ì€áµ¥áµ¥â€¢Ì)ãƒŽ)","ÊšâœŸâƒ›Éž","(â€²êˆÏ‰êˆâ€µ)","â™š â™› â™œ â™ â™ž â™Ÿ â™” â™• â™– â™— â™˜ â™™","(Â´á´—`)(Â´á´—`)","â™¥(Â´âˆ€ï½€)","à¸…(Ëµâ—ï»Œâ—Ëµ)à¸…"];p=c,f=s,this.yarnDataObject=t,this.startChapter=i,this.resourcesPath=a,this.finished=!1,this.scrollTextStyle="npc"===l,document.getElementById(p).innerHTML="<br/><font color='red'>ðŸš¥Press/Hold Z or ðŸ“±Double-click/Tap to advance</font><br/>",e.on("startedNode",(function(e){document.getElementById(p).innerHTML+="<br/><br/><font color='#581845'>ðŸ“œ --- Loaded next node ---</font>",document.getElementById(p).innerHTML+=`<font color='${u[Math.floor(Math.random()*u.length)]}'>  ${d[Math.floor(Math.random()*d.length)]}</font>`,document.getElementById(p).innerHTML+="<br/><font color='CADETBLUE'>&ensp;&ensp;&ensp;Title: "+e.title+"</font>",e.tags.length>0&&e.tags[0].length>0&&(document.getElementById(p).innerHTML+="<br/><font color='deeppink'>&ensp;&ensp;&ensp;Tags: "+e.tags+"</font>")})),e.on("choiceMade",(function(e){this.scrollTextStyle?document.getElementById(p).innerHTML+="<br/><font color='fuchsia'>ðŸ™Player chose: >"+e+"</font>":document.getElementById(p).innerHTML+=`<p class="story-playtest-bubble story-playtest-answer answer-post">${r.parse(e)}</p>`})),e.on("commandCall",(function(e){document.getElementById(p).innerHTML+=`<br/><font color='green'>ðŸ£Command call:</font> <font color='red'>&lt;&lt;${e}&gt;&gt;</font>`})),this.scrollTextStyle||(e.on("textResult",(function(e){document.getElementById(p).innerHTML+=`<p class="story-playtest-bubble">${r.parse(e)}</p>`,document.getElementById(f).innerHTML='<span class="story-animated-dots"><p>.</p><p>.</p><p>.</p></span>',document.getElementById(f).className="story-playtest-bubble",document.getElementById(p).scrollTo({top:document.getElementById(p).scrollHeight,left:0,behavior:"smooth"})})),e.on("choiceUpdated",(function(e){document.getElementById(f).className="story-playtest-answer"}))),e.on("finished",(function(){n=!0,e.removeAllListeners()})),o.load(t),this.loadYarnChapter(i)},this.loadYarnChapter=e=>{n=!1,this.storyChapter=e,this.choices[this.storyChapter]=[],this.visitedChapters.push(e),u=o.run(e),l=self.goToNext(),a=l.text,this.changeTextScrollSpeed(100)},this.wasChoiceMade=(e,t=this.storyChapter)=>!!this.choices[t].includes(e),this.timesNodeWasVisited=e=>{let t=0;return this.visitedNodes.forEach((n,i)=>{n===e&&(t+=1)}),t},self.jsonCopy=e=>JSON.parse(JSON.stringify(e))}},Q0t6:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="Q0t6"},W2Rx:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return s}));var r=n("oj90");let o=0;let s=function(t={}){const n=this;this.titleStyles=["title-style-1","title-style-2","title-style-3","title-style-4","title-style-5","title-style-6","title-style-7","title-style-8","title-style-9"],this.index=e.observable(o++),this.title=e.observable(t.title||app.getUniqueTitle()),this.tags=e.observable(t.tags||""),this.body=e.observable(t.body||"Empty Text"),this.active=e.observable(t.active||!0),this.width=200,this.height=200,this.tempOpacity=null,this.style=null,this.colorID=e.observable(t.colorID||0),this.checked=!1,this.selected=!1,this.createX=t.x||null,this.createY=t.y||null,this.clippedTags=e.computed((function(){return app.updateTagsRepository(),r.Utils.uniqueSplit(n.tags()," ").map(e=>app.tags().find(t=>t.text===e)).filter(e=>e)}),this),this.clippedBody=e.computed((function(){if(app.editing())return;app.mustRefreshNodes();let e=app.getHighlightedText(this.body());return e=app.richTextFormatter.richTextToHtml(e),e=e.substr(0,1024),e}),this),this.linkedTo=e.observableArray(),this.linkedFrom=e.observableArray(),this.element=null,this.canDoubleClick=!0,this.create=function(){if(n.style=window.getComputedStyle(i(n.element).get(0)),n.createX&&n.createY)n.x(n.createX),n.y(n.createY);else{let e=i(n.element).parent();n.x(-e.offset().left+i(window).width()/2-100),n.y(-e.offset().top+i(window).height()/2-100)}app.workspace.bringToFront(n.element),app.workspace.startUpdatingArrows(),i(n.element).css({opacity:0,scale:.8,y:"-=80px",rotate:"45deg"}).transition({opacity:1,scale:1,y:"+=80px",rotate:"0deg"},250,"easeInQuad",(function(){app.workspace.stopUpdatingArrows(),app.workspace.updateArrows()})),n.drag(),i(n.element).on("dblclick",(function(){n.canDoubleClick&&app.editNode(n)})),r.Utils.addDoubleTapDetector(n.element,(function(){n.canDoubleClick&&app.editNode(n)})),i(n.element).on("click",(function(e){e.ctrlKey&&(n.selected?app.workspace.deselectNodes(n):app.workspace.selectNodes(n))}))},this.setSelected=function(e){n.selected=e,n.selected?i(n.element).addClass("selected"):i(n.element).removeClass("selected")},this.toggleSelected=function(){n.setSelected(!n.selected)},this.x=function(e){if(null!=e&&i(n.element).css({x:Math.floor(e)}),n.style)return Math.floor(new WebKitCSSMatrix(n.style.webkitTransform).m41)},this.y=function(e){if(null!=e&&i(n.element).css({y:Math.floor(e)}),n.style)return Math.floor(new WebKitCSSMatrix(n.style.webkitTransform).m42)},this.resetDoubleClick=function(){n.canDoubleClick=!0},this.cycleColorDown=function(){n.doCycleColorDown(),setTimeout(n.resetDoubleClick,500),n.canDoubleClick=!1,app.input.isShiftDown&&app.matchConnectedColorID(n),n.selected&&app.setSelectedColors(n),app.setYarnDocumentIsDirty()},this.cycleColorUp=function(){n.doCycleColorUp(),setTimeout(n.resetDoubleClick,500),n.canDoubleClick=!1,app.input.isShiftDown&&app.matchConnectedColorID(n),n.selected&&app.setSelectedColors(n),app.setYarnDocumentIsDirty()},this.doCycleColorDown=function(){n.colorID(n.colorID()-1),n.colorID()<0&&n.colorID(8)},this.doCycleColorUp=function(){n.colorID(n.colorID()+1),n.colorID()>8&&n.colorID(0)},this.remove=async function(){return new Promise((e,t)=>{i(n.element).transition({opacity:0,scale:.8,y:"-=80px",rotate:"-45deg"},250,"easeInQuad",e)})},this.drag=function(){const e={x:0,y:0};let t=!1,r=!1;i(document.body).on("mousemove touchmove",(function(i){if(t){const t=app.input.isScreenTouched&&i.changedTouches?i.changedTouches[0].pageX:i.pageX,o=app.input.isScreenTouched&&i.changedTouches?i.changedTouches[0].pageY:i.pageY;let{x:s,y:a}=app.workspace.toWorkspaceCoordinates(t,o);s-=e.x,a-=e.y;let c=s-n.x(),l=a-n.y();const u=app.workspace.getSelectedNodes();if(("mousemove"===i.originalEvent.type||u.includes(n)&&"touchmove"===i.originalEvent.type)&&(n.x(s),n.y(a)),r&&(n.selected?u.splice(u.indexOf(n),1):u=app.getNodesConnectedTo(n),u.length>0))for(let e in u)u[e].active()&&(u[e].x(u[e].x()+c),u[e].y(u[e].y()+l));app.workspace.updateArrows()}})),i(n.element).on("pointerdown",(function(i){if(!t&&n.active()&&0===i.button){t=!0,(app.input.isShiftDown||n.selected)&&(r=!0);const{x:o,y:s}=app.workspace.toWorkspaceCoordinates(i.pageX,i.pageY);e.x=o-n.x(),e.y=s-n.y()}})),i(n.element).on("pointerdown",(function(e){e.stopPropagation()})),i(n.element).on("touchend",(function(e){app.workspace.selectNodes(n)})),i(n.element).on("pointerup touchend",(function(e){t=!1,r=!1,app.setYarnDocumentIsDirty()}))},this.moveTo=function(e,t){app.workspace.startUpdatingArrows(),i(n.element).clearQueue(),i(n.element).transition({x:e,y:t},app.stopUpdatingArrows,500)},this.isConnectedTo=function(e,t){if(t&&e.isConnectedTo(n,!1))return!0;let i=n.linkedTo();for(let t in i){if(i[t]==e)return!0;if(i[t].isConnectedTo(e,!1))return!0;if(e.isConnectedTo(i[t],!1))return!0}return!1},this.getLinksInNode=function(e){let t=(e||n).body().match(/\[\[(.*?)\]\]/g);if(null!=t){let e={};for(let n=t.length-1;n>=0;n--)t[n]=t[n].substr(2,t[n].length-4).trim(),t[n].indexOf("|")>=0&&(t[n]=t[n].split("|")[1]),null!=e[t[n]]&&t.splice(n,1),e[t[n]]=!0;return t}},this.updateLinks=function(){n.resetDoubleClick(),n.updateLinksFromParents(),n.updateLinksToChildren()},this.updateLinksFromParents=function(){n.oldTitle&&n.oldTitle!==n.title()&&(n.linkedFrom.removeAll(),app.nodes().forEach(e=>{const t=n.getLinksInNode(e);if(t)if(t.includes(n.oldTitle)){const t=RegExp("\\|\\s*"+n.oldTitle+"\\s*\\]\\]","g"),i=e.body().replace(t,"|"+n.title()+"]]");e.body(i),n.linkedFrom.push(e)}else t.includes(n.title())&&n.linkedFrom.push(e)}),n.oldTitle=void 0)},this.updateLinksToChildren=function(){n.linkedTo.removeAll();let e=n.getLinksInNode();if(e)for(let t in app.nodes()){let i=app.nodes()[t];for(let t=0;t<e.length;t++)i!=n&&i.title().trim()===e[t].trim()&&n.linkedTo.push(i)}}};e.bindingHandlers.nodeBind={init:function(e,t,n,i,r){r.$rawData.element=e,r.$rawData.create()},update:function(e,t,n,r,o){i(e).on("pointerdown",(function(){app.workspace.bringToFront(e)}))}}}).call(this,n("Z1dp"),n("EVdn"))},e6Wu:function(e,t,n){"use strict";n.r(t);n("hZTp");var i=n("oj90"),r=n("0h2I"),o=n.n(r),s=(n("5uVa"),n("si6p"),n("bU/s")),a=n.n(s),c=(n("A8C4"),n("VEX6"),n("jF1P"),n("YhK8"),n("vvJZ"),n("Ab/9"),n("KDOe"),n("XfCI"),n("PSD3")),l=n.n(c),u=n("P0sH"),d=n("pLxK");window.ko=o.a,window.$=window.jQuery=n("EVdn"),window.ace=a.a,a.a.config.set("basePath",i.Utils.getPublicPath()),window.define=a.a.define,window.Swal=l.a,"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})}),window.app=new u.a("Yarn",d.a),window.app.run()},fkuv:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return r}));const r=function(t){const n=this;this.settingsDialogVisible=e.observable(!1),this.availableMarkupLanguages=[{id:"bbcode",name:"Bbcode"},{id:"html",name:"Html"}],this.availableThemes=[{id:"classic",name:"Classic"},{id:"blueprint",name:"Blueprint"}],this.availablePlaytestStyles=[{id:"npc",name:"Npc bubble"},{id:"chat",name:"Chat messages"}],this.availableLanguages=[{name:"Afrikaans",id:"af-ZA"},{name:"Bahasa Indonesia",id:"id-ID"},{name:"Bahasa Melayu",id:"ms-MY"},{name:"CatalÃ ",id:"ca-ES"},{name:"ÄŒeÅ¡tina",id:"cs-CZ"},{name:"Deutsch",id:"de-DE"},{name:"English",id:"en-GB"},{name:"EspaÃ±ol",id:"es-ES"},{name:"Euskara",id:"eu-ES"},{name:"FranÃ§ais",id:"fr-FR"},{name:"Galego",id:"gl-ES"},{name:"Hrvatski",id:"hr_HR"},{name:"IsiZulu",id:"zu-ZA"},{name:"Ãslenska",id:"is-IS"},{name:"Italiano",id:"it-IT"},{name:"Magyar",id:"hu-HU"},{name:"Nederlands",id:"nl-NL"},{name:"Norsk bokmÃ¥l",id:"nb-NO"},{name:"Polski",id:"pl-PL"},{name:"PortuguÃªs",id:"pt-BR"},{name:"RomÃ¢nÄƒ",id:"ro-RO"},{name:"SlovenÄina",id:"sk-SK"},{name:"Suomi",id:"fi-FI"},{name:"Svenska",id:"sv-SE"},{name:"TÃ¼rkÃ§e",id:"tr-TR"},{name:"Ð±ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸",id:"bg-BG"},{name:"PÑƒÑÑÐºÐ¸Ð¹",id:"ru-RU"},{name:"Ð¡Ñ€Ð¿ÑÐºÐ¸",id:"sr-RS"},{name:"í•œêµ­ì–´",id:"ko-KR"},{name:"ä¸­æ–‡",id:"cmn-Hans-CN"},{name:"æ—¥æœ¬èªž",id:"ja-JP"},{name:"Lingua latÄ«na",id:"la"}],this.openSettingsDialog=function(){n.settingsDialogVisible(!0),i(".settings-dialog").css({opacity:0}).transition({opacity:1},250),i(".settings-dialog .form").css({y:"-100"}).transition({y:"0"},250)},this.closeSettingsDialog=function(){i(".settings-dialog").css({opacity:1}).transition({opacity:0},250,e=>{n.settingsDialogVisible(!1)}),i(".settings-dialog .form").css({y:"0"}).transition({y:"-100"},250),setTimeout(()=>t.settings.apply(),100)},this.isDialogOpen=function(){return n.settingsDialogVisible()||i(".swal2-popup").length>0},this.confirmMarkupConversion=function(){Swal.fire({title:"Are you sure?",text:"Markup on all nodes will be modified. This can rarely result in broken texts. This operation can't be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, convert it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&(t.convertMarkup(),Swal.fire("Converted!","The markup on the nodes has been converted.","success"))})},this.openNodeListMenu=function(e){const n="link"===e?document.getElementById("linkHelperMenuFilter").value.toLowerCase():document.getElementById("nodeSearchInput").value.toLowerCase(),r=document.getElementById(e+"HelperMenu");r.innerHTML="",t.nodes().forEach((o,s)=>{if(o.title().toLowerCase().indexOf(n)>=0||0==n.length){const a=document.createElement("span");a.innerHTML=o.title(),i(a).addClass("item "+t.nodes()[s].titleStyles[t.nodes()[s].colorID()]),"link"==e?o.title()!==t.editing().title()&&(a.setAttribute("onclick","app.insertTextAtCursor(' [[Answer:"+o.title()+"|"+o.title()+"]]')"),r.appendChild(a)):"open"==e&&(o.title().toLowerCase().indexOf(n)>=0||0==n.length)&&(a.setAttribute("onclick",`app.openNodeByTitle("${o.title()}")`),a.setAttribute("onmouseenter",`app.workspace.warpToNodeByIdx(${t.nodes.indexOf(o)})`),r.appendChild(a))}})}}}).call(this,n("Z1dp"),n("EVdn"))},hZTp:function(e,t,n){},jF1P:function(e,t,n){(function(e){var t,n;t={},n=0,e.bindingHandlers.ace={init:function(i,r,o,s,a){var c=o().aceOptions||{},l=e.utils.unwrapObservable(r());i.id||(i.id="knockout-ace-"+n,n+=1);var u=ace.edit(i.id);c.theme&&u.setTheme("ace/theme/"+c.theme),c.mode&&u.getSession().setMode("ace/mode/"+c.mode),u.setValue(l),u.gotoLine(0),u.setShowPrintMargin(!1),u.getSession().setUseWrapMode(!0),u.getSession().on("change",(function(t){e.isWriteableObservable(r())&&r()(u.getValue())})),t[i.id]=u,e.utils.domNodeDisposal.addDisposeCallback(i,(function(){try{u.destroy()}catch(e){}delete t[i.id]}))},update:function(n,i,r,o,s){var a=e.utils.unwrapObservable(i()),c=n.id;if(void 0!==c&&""!==c&&t.hasOwnProperty(c)){var l=t[c];l.getValue()!==a&&(l.setValue(a),l.gotoLine(0))}}},e.aceEditors={resizeAll:function(){for(var e in t)t.hasOwnProperty(e)&&t[e].resize()},get:function(e){return t[e]}}}).call(this,n("Z1dp"))},"l8+o":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mIo7"),r=n("mqgS");const o=function(e){return"html"===e.settings.markupLanguage()?new r.a(e):new i.a(e)}},mIo7:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BbcodeRichTextFormatter}));const bbcode=__webpack_require__("L8pc"),BbcodeRichTextFormatter=function(app){const self=this;this.completableTags=Object.freeze([{Start:"[[",Completion:" answer: | ]] ",Offset:-4},{Start:"<<",Completion:" >> ",Offset:-3},{Start:"[colo",Completion:"r=#][/color] ",Offset:-10,Func:()=>{app.insertColorCode()}},{Start:"[b",Completion:"][/b] ",Offset:-5},{Start:"[i",Completion:"][/i] ",Offset:-5},{Start:"[img",Completion:"][/img] ",Offset:-7},{Start:"[u",Completion:"][/u] ",Offset:-5},{Start:"[url",Completion:"][/url] ",Offset:-7},{Start:"[tweet",Completion:"][/tweet] ",Offset:-9}]),this.getTagOpen=function(e){switch(e){case"cmd":return"<<";case"opt":return"[[";case"color":return"[color=#]";default:return`[${e}]`}},this.getTagClose=function(e){switch(e){case"cmd":return">>";case"opt":return"|]]";default:return`[/${e}]`}},this.identifyTag=function(e){let t=-1!==e.lastIndexOf("[")?e.substring(e.lastIndexOf("["),e.length):"";return"[["===e.substring(e.length-2,e.length)?t="[[":"<<"===e.substring(e.length-2,e.length)&&(t="<<"),t},this.insertTag=function(e){const t=self.getTagOpen(e),n=self.getTagClose(e),i=JSON.parse(JSON.stringify(app.editor.selection.getRange()));app.editor.session.insert(i.start,t),app.editor.session.insert({column:i.end.column+t.length,row:i.end.row},n),"color"===e&&(0===app.editor.getSelectedText().length?app.moveEditCursor(-9):app.editor.selection.setRange({start:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1},end:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1}}),app.insertColorCode()),"img"===e?0===app.editor.getSelectedText().length&&(app.moveEditCursor(-6),app.data.triggerPasteClipboard(),setTimeout(()=>app.moveEditCursor(6),300)):0===app.editor.getSelectedText().length?app.isEditorInPreviewMode||app.moveEditCursor(-n.length):app.editor.selection.setRange({start:app.editor.selection.getRange().start,end:{row:app.editor.selection.getRange().end.row,column:app.editor.selection.getRange().end.column-n.length}}),app.editor.focus()},this._convertTag=function(inPattern,outPattern,text){const globalRegex=new RegExp(inPattern,"gi"),localRegex=new RegExp(inPattern,"i");return text.replace(globalRegex,m=>{const match=m.match(localRegex),template=eval("`"+outPattern+"`");return match.length?template:null})},this.convert=function(e){let t=e;return t=self._convertTag("<b>(.*?)<\\/b>","[b]${match[1]}[/b]",t),t=self._convertTag("<u>(.*?)<\\/u>","[u]${match[1]}[/u]",t),t=self._convertTag("<i>(.*?)<\\/i>","[i]${match[1]}[/i]",t),t=self._convertTag("<img>(.*?)<\\/img>","[img]${match[1]}[/img]",t),t=self._convertTag("<color=#(.*?)>(.*?)<\\/color>","[color=#${match[1]}]${match[2]}[/color]",t),t=self._convertTag("<url>(.*?)<\\/url>","[url]${match[1]}[/url]",t),t=self._convertTag("<tweet>(.*?)<\\/tweet>","[tweet]${match[1]}[/tweet]",t),t},this.richTextToHtml=function(e,t=!1){let n=1,i=t?'<font color="pink">'+n+". </font>"+e:e;return i=i.replace(/<</gi,"<font color='violet'>(run:"),i=i.replace(/>>/gi,")</font>"),i=i.replace(/\[color=#[A-Za-z0-9]+\]/gi,(function(e){const t=e.match(/\[color=#([A-Za-z0-9]+)\]/i);if(t&&t.length>1)return"[color=#"+t[1]+"]<font color=#"+t[1]+">&#9751</font>"})),i=i.replace(/\[img\][^\[]+\[\/img\]/gi,(function(e){const n=e.match(/\[img\](.*)\[\/img\]/i);if(n.length>1){const e=app.data.editingFileFolder(n[1]);return app.data.doesFileExist(e)?t?'<img src="'+e+'"> </img>':'<img src="'+e+'" width="128" height="auto"> </img>':t?'<img src="'+n[1]+'"> </img>':'<img src="'+n[1]+'" width="128" height="auto"> </img>'}})),i=i.replace(/[\n\r]/g,(function(e){let i="<br/>";return n+=1,t&&(i+='<font color="pink">'+n+". </font>"),i})),i=bbcode.parse(i),i=i.replace(/https:\/\/twitter.com\/.*\/status\/[0-9a-z\?=]+/gi,(function(e){const n=e.match(/https:\/\/twitter.com\/.*\/status\/([0-9]+)/i);if(console.log(e),n.length>1)return console.log(n),t?'\n        <div>\n        errssd\n<blockquote class="twitter-tweet" data-lang="en">\n<a href="https://twitter.com/ohilin/status/1306947009748840450"></a>\n</blockquote>\n=======\n</div>\n         ':"rt"})),i}}},mqgS:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HtmlRichTextFormatter}));const HtmlRichTextFormatter=function(app){const self=this;this.completableTags=Object.freeze([{Start:"[[",Completion:" answer: | ]] ",Offset:-4},{Start:"<<",Completion:" >> ",Offset:-3},{Start:"<colo",Completion:"r=#></color> ",Offset:-10,Func:()=>{app.insertColorCode()}},{Start:"<b",Completion:"></b> ",Offset:-5},{Start:"<img",Completion:"></img> ",Offset:-7},{Start:"<i",Completion:"></i> ",Offset:-5},{Start:"<u",Completion:"></u> ",Offset:-5}]),this.getTagOpen=function(e){switch(e){case"cmd":return"<<";case"opt":return"[[";case"color":return"<color=#>";default:return`<${e}>`}},this.getTagClose=function(e){switch(e){case"cmd":return">>";case"opt":return"|]]";default:return`</${e}>`}},this.identifyTag=function(e){let t=-1!==e.lastIndexOf("<")?e.substring(e.lastIndexOf("<"),e.length):"";return"[["===e.substring(e.length-2,e.length)?t="[[":"<<"===e.substring(e.length-2,e.length)&&(t="<<"),t},this.insertTag=function(e){const t=self.getTagOpen(e),n=self.getTagClose(e),i=JSON.parse(JSON.stringify(app.editor.selection.getRange()));app.editor.session.insert(i.start,t),app.editor.session.insert({column:i.end.column+t.length,row:i.end.row},n),"color"===e&&(0===app.editor.getSelectedText().length?app.moveEditCursor(-9):app.editor.selection.setRange({start:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1},end:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1}}),app.insertColorCode()),"img"===e?navigator.clipboard.readText().then(e=>{0===app.editor.getSelectedText().length&&(app.moveEditCursor(-7),app.insertTextAtCursor(` src="${e}"`))}):0===app.editor.getSelectedText().length?app.isEditorInPreviewMode||app.moveEditCursor(-n.length):app.editor.selection.setRange({start:app.editor.selection.getRange().start,end:{row:app.editor.selection.getRange().end.row,column:app.editor.selection.getRange().end.column-n.length}}),app.editor.focus()},this._convertTag=function(inPattern,outPattern,text){const globalRegex=new RegExp(inPattern,"gi"),localRegex=new RegExp(inPattern,"i");return text.replace(globalRegex,m=>{const match=m.match(localRegex),template=eval("`"+outPattern+"`");return match.length?template:null})},this.convert=function(e){let t=e;return t=self._convertTag("\\[b\\](.*?)\\[\\/b\\]","<b>${match[1]}</b>",t),t=self._convertTag("\\[u\\](.*?)\\[\\/u\\]","<u>${match[1]}</u>",t),t=self._convertTag("\\[i\\](.*?)\\[\\/i\\]","<i>${match[1]}</i>",t),t=self._convertTag("\\[img\\](.*?)\\[\\/img\\]","<img>${match[1]}</img>",t),t=self._convertTag("\\[color=#(.*?)\\](.*?)\\[\\/color\\]","<color=#${match[1]}>${match[2]}</color>",t),t},this.richTextToHtml=function(e,t=!1){let n=1,i=t?'<font color="pink">'+n+". </font>"+e:e;return i=i.replace(/<</gi,"<font color='violet'>(run:"),i=i.replace(/>>/gi,")</font>"),[/&lt;color=#(.*?)&gt;(.*?)&lt;\/color&gt;/,/<color=#(.*?)>(.*?)<\/color>/].forEach(e=>{const t=new RegExp(e,"gi"),n=new RegExp(e,"i");i=i.replace(t,(function(e){const t=e.match(n);if(t&&t.length>2)return`<font color=#${t[1]}>&#9751${t[2]}</font>`}))}),i=i.replace(/&lt;img&gt;[^\[]+&lt;\/img&gt;/gi,(function(e){const n=e.match(/&lt;img&gt;(.*?)&lt;\/img&gt;/i);if(n.length>1){const e=app.data.editingFileFolder(n[1]);return app.data.doesFileExist(e)?t?'<img src="'+e+'"> </img>':'<img src="'+e+'" width="128" height="auto"> </img>':t?'<img src="'+n[1]+'"> </img>':'<img src="'+n[1]+'" width="128" height="auto"> </img>'}})),i=i.replace(/&lt;b&gt;.*&lt;\/b&gt;/gi,e=>{const t=e.match(/&lt;b&gt;(.*)&lt;\/b&gt;/i);if(t.length)return`<b>${t[1]}</b>`}),i=i.replace(/&lt;u&gt;.*&lt;\/u&gt;/gi,e=>{const t=e.match(/&lt;u&gt;(.*)&lt;\/u&gt;/i);if(t.length)return`<u>${t[1]}</u>`}),i=i.replace(/&lt;i&gt;.*&lt;\/i&gt;/gi,e=>{const t=e.match(/&lt;i&gt;(.*)&lt;\/i&gt;/i);if(t.length)return`<i>${t[1]}</i>`}),i=i.replace(/[\n\r]/g,(function(e){let i="<br/>";return n+=1,t&&(i+='<font color="pink">'+n+". </font>"),i})),i}}},oj90:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"FILETYPE",(function(){return i})),n.d(t,"Utils",(function(){return r}));var i={JSON:"json",XML:"xml",TWEE:"twee",TWEE2:"tw2",UNKNOWN:"none",YARN:"yarn"},r={createAutocompleter:function(e,t,n,i=1){return{getCompletions:function(r,o,s,a,c){var l=r.session.getTokenAt(s.row,s.column);a.length<i||!e.includes(l.type)?c(null,[]):c(null,t.map((function(e){return{caption:e,value:e,meta:n}})))}}},addDoubleTapDetector:function(e,t){e.lastTap=0,e.tapTimeout=0,e.addEventListener("touchend",(function(n){var i=(new Date).getTime(),r=i-e.lastTap;clearTimeout(e.tapTimeout),r<500&&r>0?(t(),n.preventDefault()):e.tapTimeout=setTimeout((function(){clearTimeout(e.tapTimeout)}),500),e.lastTap=i}))},uniqueSplit:function(e,t=" "){return[...new Set(e.split(t).filter(e=>e))]},getHighestZ:function(t){let n=Number.NEGATIVE_INFINITY;return e(t).children().each((function(){let t=parseInt(e(this).css("z-index"))||0;t>n&&(n=t)})),n},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},rectanglesOverlap:function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},stripHtml:function(e){for(;e.indexOf("<")>=0;)e=e.replace("<","&lt;");for(;e.indexOf(">")>=0;)e=e.replace(">","&gt");return e},xmlToObject:function(e){var t=[];if((e=e.childNodes.item(0)).hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);if(i.hasChildNodes()){for(var r={},o=!1,s=0;s<i.childNodes.length;s++){var a=i.childNodes.item(s);if("#text"!=a.nodeName&&(o=!0,a.hasChildNodes()?r[a.nodeName]=a.childNodes.item(0).nodeValue:r[a.nodeName]="",a.attributes.length>0)){r[a.nodeName]={};for(var c=0;c<a.attributes.length;c++){var l=a.attributes.item(c);r[a.nodeName][l.nodeName]=l.nodeValue}}}o&&t.push(r)}}return t},now:Date.now||function(){return(new Date).getTime()},getPublicPath:function(e){return window.getPublicVsCodeWebviewUri?window.getPublicVsCodeWebviewUri(e):"public"+(e?"/"+e:"")}}}.call(this,n("EVdn"))},owJe:function(e,t,n){(function(e){var i=n("jXEy"),r=n("oj90"),o=r.Utils.getPublicPath("dictionaries/en/index.dic"),s=r.Utils.getPublicPath("dictionaries/en/index.aff");e("<style type='text/css'>.ace_marker-layer .misspelled { position: absolute; z-index: -2; border-bottom: 1px solid red; margin-bottom: -1px; }</style>").appendTo("head"),e("<style type='text/css'>.misspelled { border-bottom: 1px solid red; margin-bottom: -1px; }</style>").appendTo("head");var a=null;function c(e){var t=e.split(/\s+|\.|\,|\?|\\|\/|\!|\[|\]|"|'|;|:|`|\+|\-|\&|\$|@|~|#|>|<|_|\)|\(|Â£|\^|%|\*|â€ž|â€œ|\||[0-9]+/g),n=0,i=[];for(word in t){var r=t[word];a.correct(r)||(i[i.length]=[n,n+t[word].length]),n+=t[word].length+1}return i}t.load_dictionary=function(t){console.info(`Loading ${t} hunspell dictionary locally`),o=r.Utils.getPublicPath(`dictionaries/${t}/index.dic`),s=r.Utils.getPublicPath(`dictionaries/${t}/index.aff`),e.get(o,(function(e){dicData=e})).fail((function(){console.error(t+" not found locally. Loading dictionary from server instead..."),o=`https://raw.githubusercontent.com/wooorm/dictionaries/master/dictionaries/${t}/index.dic`,s=`https://raw.githubusercontent.com/wooorm/dictionaries/master/dictionaries/${t}/index.aff`,e.get(o,(function(e){dicData=e})).done((function(){e.get(s,(function(e){affData=e})).done((function(){console.log("Dictionary loaded from server"),a=new i(affData,dicData),l=!0}))}))})).done((function(){e.get(s,(function(e){affData=e})).done((function(){console.log("Dictionary loaded locally"),a=new i(affData,dicData),l=!0}))}))},t.misspelled=c;var l=!0,u=!1,d=[];function f(){if(null!=a&&!u&&l){u=!0;var e=ace.edit("editor").getSession();h();try{var t=ace.require("ace/range").Range,n=e.getDocument().getAllLines();for(var i in n){var r=c(n[i]);for(var o in r){var s=new t(i,r[o][0],i,r[o][1]);d[d.length]=e.addMarker(s,"misspelled","typo",!0)}}}finally{u=!1,l=!1}}}t.spell_check=f;var p=!1;function h(){var e=ace.edit("editor").getSession();for(var t in d)e.removeMarker(d[t]);d=[];var n=e.getDocument().getAllLines();for(var t in n)e.removeGutterDecoration(t,"misspelled")}t.enable_spellcheck=function(){p=!0,ace.edit("editor").getSession().on("change",(function(e){p&&(l=!0,f())})),l=!0,f()},t.disable_spellcheck=function(){p=!1,h()},t.clear_spellcheck_markers=h,t.suggest_word_for_misspelled=function(e){var t=a.suggest(e);return 0!==t.length&&t}}).call(this,n("EVdn"))},pLxK:function(e){e.exports=JSON.parse('{"a":"0.4.97"}')},pYPP:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));const i=function(t){const n=this,i=window.vsCodeApi?{getItem:()=>{},setItem:()=>{}}:window.localStorage;this.storage=i,e.extenders.persist=function(e,t){return e.subscribe((function(e){i.setItem(t,e)})),e},this.apply=function(){t.setTheme(n.theme()),t.setLanguage(n.language()),t.toggleNightMode(),t.setMarkupLanguage(n.markupLanguage()),t.workspace.setThrottle(n.redrawThrottle()),t.setGistCredentials({token:n.gistToken(),file:null!==n.gistFile()?n.gistFile().split("/").pop():null})},this.theme=e.observable(i.getItem("theme")||"classic").extend({persist:"theme"}),this.language=e.observable(i.getItem("language")||"en-GB").extend({persist:"language"}),this.redrawThrottle=e.observable(parseInt(i.getItem("redrawThrottle")||"50")).extend({persist:"redrawThrottle"}),this.gistToken=e.observable(i.getItem("gistToken")).extend({persist:"gistToken"}),this.gistFile=e.observable(i.getItem("gistFile")).extend({persist:"gistFile"}),this.spellcheckEnabled=e.observable(null===i.getItem("spellcheckEnabled")||"true"===i.getItem("spellcheckEnabled")).extend({persist:"spellcheckEnabled"}),this.transcribeEnabled=e.observable(!1),this.completeTagsEnabled=e.observable(null===i.getItem("completeTagsEnabled")||"true"===i.getItem("completeTagsEnabled")).extend({persist:"completeTagsEnabled"}),this.completeWordsEnabled=e.observable(null===i.getItem("completeWordsEnabled")||"true"===i.getItem("completeWordsEnabled")).extend({persist:"completeWordsEnabled"}),this.nightModeEnabled=e.observable(null!==i.getItem("nightModeEnabled")&&"true"===i.getItem("nightModeEnabled")).extend({persist:"nightModeEnabled"}),this.createNodesEnabled=e.observable(null===i.getItem("createNodesEnabled")||"true"===i.getItem("createNodesEnabled")).extend({persist:"createNodesEnabled"}),this.editorStatsEnabled=e.observable(null!==i.getItem("editorStatsEnabled")&&"true"===i.getItem("editorStatsEnabled")).extend({persist:"editorStatsEnabled"}),this.markupLanguage=e.observable(i.getItem("markupLanguage")||"bbcode").extend({persist:"markupLanguage"}),this.playtestStyle=e.observable(i.getItem("playtestStyle")||"chat").extend({persist:"playtestStyle"}),this.alwaysOpenNodesInVisualStudioCodeEditor=e.observable(null!==i.getItem("alwaysOpenNodesInVisualStudioCodeEditor")&&"true"===i.getItem("alwaysOpenNodesInVisualStudioCodeEditor")).extend({persist:"alwaysOpenNodesInVisualStudioCodeEditor"})}}).call(this,n("Z1dp"))},vvJZ:function(e,t,n){(function(e,t,n){Function&&Function.prototype&&Function.prototype.bind&&(/(MSIE ([6789]|10|11))|Trident/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(e){function t(t){for(var n,r,o=t[0],s=t[1],a=0,l=[];a<o.length;a++)r=o[a],i[r]&&l.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={1:0};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=o);var s,a=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(e){return r.p+"js/"+({0:"moment~timeline~tweet",2:"dm_button",3:"button",4:"moment",5:"periscope_on_air",6:"timeline",7:"horizon_tweet",8:"tweet"}[e]||e)+"."+{0:"2e5232162202896d50461b242819754e",2:"2493a92b8ef97a28d8aff20ad8cbb830",3:"e24f3bcdec527b80b9c80e88b62047c3",4:"8c3501be2bae1d05889f9a35595ddb20",5:"3ab5afdc5a0d0b84eebd8b1fa7013a79",6:"610564c46865d0bb1eccdd42c0dc6ea7",7:"890a062bcacdb49527deac08bf9879da",8:"0a9a95faed8deb04c681a0b30ac41524"}[e]+".js"}(e),s=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");s.type=r,s.request=o,n[1](s)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,a.appendChild(c)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://platform.twitter.com/",r.oe=function(e){throw console.error(e),e};var o=window.__twttrll=window.__twttrll||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var c=s;r(r.s=93)}([function(e,t,n){var i=n(1);function r(e,t){var n;for(n in e)e.hasOwnProperty&&!e.hasOwnProperty(n)||t(n,e[n]);return e}function o(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function s(e){return e===Object(e)}function a(e){var t;if(!s(e))return!1;if(Object.keys)return!Object.keys(e).length;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function c(e){return e?Array.prototype.slice.call(e):[]}e.exports={aug:function(e){return c(arguments).slice(1).forEach((function(t){r(t,(function(t,n){e[t]=n}))})),e},async:function(e,t){i.setTimeout((function(){e.call(t||null)}),0)},compact:function e(t){return r(t,(function(n,i){s(i)&&(e(i),a(i)&&delete t[n]),null!=i&&""!==i||delete t[n]})),t},contains:function(e,t){return!(!e||!e.indexOf)&&e.indexOf(t)>-1},forIn:r,isObject:s,isEmptyObject:a,toType:o,isType:function(e,t){return e==o(t)},toRealArray:c}},function(e,t){e.exports=window},function(e,t,n){var i=n(6);e.exports=function(){var e=this;this.promise=new i((function(t,n){e.resolve=t,e.reject=n}))}},function(e,t,n){var i=n(11),r=/(?:^|(?:https?:)?\/\/(?:www\.)?twitter\.com(?::\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,o=/(?:^|(?:https?:)?\/\/(?:www\.)?twitter\.com(?::\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,s=/^http(s?):\/\/(\w+\.)*twitter\.com([:/]|$)/i,a=/^http(s?):\/\/(ton|pbs)\.twimg\.com/,c=/^#?([^.,<>!\s/#\-()'"]+)$/,l=/twitter\.com(?::\d{2,4})?\/intent\/(\w+)/,u=/^https?:\/\/(?:www\.)?twitter\.com\/\w+\/timelines\/(\d+)/i,d=/^https?:\/\/(?:www\.)?twitter\.com\/i\/moments\/(\d+)/i,f=/^https?:\/\/(?:www\.)?twitter\.com\/(\w+)\/(?:likes|favorites)/i,p=/^https?:\/\/(?:www\.)?twitter\.com\/(\w+)\/lists\/([\w-%]+)/i,h=/^https?:\/\/(?:www\.)?twitter\.com\/i\/live\/(\d+)/i,g=/^https?:\/\/syndication\.twitter\.com\/settings/i,m=/^https?:\/\/(localhost|platform)\.twitter\.com(?::\d+)?\/widgets\/widget_iframe\.(.+)/i,v=/^https?:\/\/(?:www\.)?twitter\.com\/search\?q=(\w+)/i;function y(e){return"string"==typeof e&&r.test(e)&&RegExp.$1.length<=20}function w(e){if(y(e))return RegExp.$1}function b(e,t){var n=i.decodeURL(e);if(t=t||!1,n.screen_name=w(e),n.screen_name)return i.url("https://twitter.com/intent/"+(t?"follow":"user"),n)}function x(e){return"string"==typeof e&&c.test(e)}function E(e){return"string"==typeof e&&o.test(e)}e.exports={isHashTag:x,hashTag:function(e,t){if(t=void 0===t||t,x(e))return(t?"#":"")+RegExp.$1},isScreenName:y,screenName:w,isStatus:E,status:function(e){return E(e)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(e){return b(e,!0)},isTwitterURL:function(e){return s.test(e)},isTwimgURL:function(e){return a.test(e)},isIntentURL:function(e){return l.test(e)},isSettingsURL:function(e){return g.test(e)},isWidgetIframeURL:function(e){return m.test(e)},isSearchUrl:function(e){return v.test(e)},regexen:{profile:r},momentId:function(e){return d.test(e)&&RegExp.$1},collectionId:function(e){return u.test(e)&&RegExp.$1},intentType:function(e){return l.test(e)&&RegExp.$1},likesScreenName:function(e){return f.test(e)&&RegExp.$1},listScreenNameAndSlug:function(e){var t,n,i;if(p.test(e)){t=RegExp.$1,n=RegExp.$2;try{i=decodeURIComponent(n)}catch(e){}return{ownerScreenName:t,slug:i||n}}return!1},eventId:function(e){return h.test(e)&&RegExp.$1}}},function(e,t){e.exports=document},function(e,t,n){var i=n(0),r=[!0,1,"1","on","ON","true","TRUE","yes","YES"],o=[!1,0,"0","off","OFF","false","FALSE","no","NO"];function s(e){return null!=e&&""!==e}function a(e){return l(e)&&e%1==0}function c(e){return l(e)&&!a(e)}function l(e){return s(e)&&!isNaN(e)}function u(e){return i.contains(o,e)}function d(e){return i.contains(r,e)}e.exports={hasValue:s,isInt:a,isFloat:c,isNumber:l,isString:function(e){return"string"===i.toType(e)},isArray:function(e){return s(e)&&"array"==i.toType(e)},isTruthValue:d,isFalseValue:u,asInt:function(e){if(a(e))return parseInt(e,10)},asFloat:function(e){if(c(e))return e},asNumber:function(e){if(l(e))return e},asBoolean:function(e){return!(!s(e)||!d(e)&&(u(e)||!e))}}},function(e,t,n){var i=n(1),r=n(21),o=n(48);r.hasPromiseSupport()||(i.Promise=o),e.exports=i.Promise},function(e,t,n){var i=n(0);e.exports=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=i.toRealArray(arguments);return e.apply(t,n.concat(r))}}},function(e,t){e.exports=location},function(e,t,n){var i=n(50);e.exports=new i("__twttr")},function(e,t,n){var i=n(0),r=/\b([\w-_]+)\b/g;function o(e){return new RegExp("\\b"+e+"\\b","g")}function s(e,t){e.classList?e.classList.add(t):o(t).test(e.className)||(e.className+=" "+t)}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(o(t)," ")}function c(e,t){return e.classList?e.classList.contains(t):i.contains(l(e),t)}function l(e){return i.toRealArray(e.classList?e.classList:e.className.match(r))}e.exports={add:s,remove:a,replace:function(e,t,n){if(e.classList&&c(e,t))return a(e,t),void s(e,n);e.className=e.className.replace(o(t),n)},toggle:function(e,t,n){return void 0===n&&e.classList&&e.classList.toggle?e.classList.toggle(t,n):(n?s(e,t):a(e,t),n)},present:c,list:l}},function(e,t,n){var i=n(5),r=n(0);function o(e){return encodeURIComponent(e).replace(/\+/g,"%2B").replace(/'/g,"%27")}function s(e){return decodeURIComponent(e)}function a(e){var t=[];return r.forIn(e,(function(e,n){var s=o(e);r.isType("array",n)||(n=[n]),n.forEach((function(e){i.hasValue(e)&&t.push(s+"="+o(e))}))})),t.sort().join("&")}function c(e){var t={};return e?(e.split("&").forEach((function(e){var n=e.split("="),i=s(n[0]),o=s(n[1]);if(2==n.length){if(!r.isType("array",t[i]))return i in t?(t[i]=[t[i]],void t[i].push(o)):void(t[i]=o);t[i].push(o)}})),t):{}}e.exports={url:function(e,t){return a(t).length>0?r.contains(e,"?")?e+"&"+a(t):e+"?"+a(t):e},decodeURL:function(e){var t=e&&e.split("?");return 2==t.length?c(t[1]):{}},decode:c,encode:a,encodePart:o,decodePart:s}},function(e,t,n){var i=n(8),r=n(1),o=n(0),s={},a=o.contains(i.href,"tw_debug=true");function c(){return r.performance&&+r.performance.now()||+new Date}function l(e,t){if(r.console&&r.console[e])switch(t.length){case 1:r.console[e](t[0]);break;case 2:r.console[e](t[0],t[1]);break;case 3:r.console[e](t[0],t[1],t[2]);break;case 4:r.console[e](t[0],t[1],t[2],t[3]);break;case 5:r.console[e](t[0],t[1],t[2],t[3],t[4]);break;default:0!==t.length&&r.console.warn&&r.console.warn("too many params passed to logger."+e)}}e.exports={devError:function(){},devInfo:function(){},devObject:function(e,t){},publicError:function(){l("error",o.toRealArray(arguments))},publicLog:function(){l("info",o.toRealArray(arguments))},time:function(e){a&&(s[e]=c())},timeEnd:function(e){a&&s[e]&&(c(),s[e])}}},function(e,t,n){var i=n(20),r=n(5),o=n(11),s=n(0),a=n(119);e.exports=function(e){var t=e.href&&e.href.split("?")[1],n=t?o.decode(t):{},c={lang:a(e),width:e.getAttribute("data-width")||e.getAttribute("width"),height:e.getAttribute("data-height")||e.getAttribute("height"),related:e.getAttribute("data-related"),partner:e.getAttribute("data-partner")};return r.asBoolean(e.getAttribute("data-dnt"))&&i.setOn(),s.forIn(c,(function(e,t){var i=n[e];n[e]=r.hasValue(i)?i:t})),s.compact(n)}},function(e,t,n){var i=n(79),r=n(24);e.exports=function(){var e="data-twitter-extracted-"+r.generate();return function(t,n){return i(t,n).filter((function(t){return!t.hasAttribute(e)})).map((function(t){return t.setAttribute(e,"true"),t}))}}},function(e,t){function n(e,t,n,i,r,o,s){this.factory=e,this.Sandbox=t,this.srcEl=o,this.targetEl=r,this.parameters=i,this.className=n,this.options=s}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},e.exports=n},function(e,t){e.exports={DM_BUTTON:"twitter-dm-button",FOLLOW_BUTTON:"twitter-follow-button",HASHTAG_BUTTON:"twitter-hashtag-button",MENTION_BUTTON:"twitter-mention-button",MOMENT:"twitter-moment",PERISCOPE:"periscope-on-air",SHARE_BUTTON:"twitter-share-button",TIMELINE:"twitter-timeline",TWEET:"twitter-tweet"}},function(e,t,n){var i=n(6),r=n(20),o=n(52),s=n(35),a=n(5),c=n(0);e.exports=function(e,t,n){var l;return t=t||{},l="Æ’("+(e=e||[]).join(", ")+", target, [options]);",function(){var u,d,f,p,h=Array.prototype.slice.apply(arguments,[0,e.length]),g=Array.prototype.slice.apply(arguments,[e.length]);return g.forEach((function(e){e&&(e.nodeType!==Node.ELEMENT_NODE?c.isType("function",e)?u=e:c.isType("object",e)&&(d=e):f=e)})),h.length!==e.length||0===g.length?(u&&c.async((function(){u(!1)})),i.reject(new Error("Not enough parameters. Expected: "+l))):f?(d=c.aug({},d||{},t),e.forEach((function(e){d[e]=h.shift()})),a.asBoolean(d.dnt)&&r.setOn(),p=s.getExperiments().then((function(e){return o.addWidget(n(d,f,void 0,e))})),u&&p.then(u,(function(){u(!1)})),p):(u&&c.async((function(){u(!1)})),i.reject(new Error("No target element specified. Expected: "+l)))}}},function(e,t,n){var i=n(100),r=n(2),o=n(0);function s(e,t){return function(){try{t.resolve(e.call(this))}catch(e){t.reject(e)}}}e.exports={sync:function(e,t){e.call(t)},read:function(e,t){var n=new r;return i.read(s(e,n),t),n.promise},write:function(e,t){var n=new r;return i.write(s(e,n),t),n.promise},defer:function(e,t,n){var a=new r;return o.isType("function",e)&&(n=t,t=e,e=1),i.defer(e,s(t,a),n),a.promise}}},function(e,t,n){var i=n(9),r=["https://syndication.twitter.com","https://cdn.syndication.twimg.com","https://localhost.twitter.com:8444"],o=["https://syndication.twitter.com","https://localhost.twitter.com:8445"],s=["https://platform.twitter.com/embed/index.html","https://localhost.twitter.com",/https:\/\/ton\.smf1\.twitter\.com\/syndication-internal\/embed-iframe\/[0-9A-Za-z_-]+\/app\/index\.html/],a=function(e,t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))},c=function(){var e=i.get("backendHost");return e&&a(r,e)?e:"https://cdn.syndication.twimg.com"},l=function(){var e=i.get("settingsSvcHost");return e&&a(o,e)?e:"https://syndication.twitter.com"};function u(e,t){var n=[e];return t.forEach((function(e){n.push(function(e){var t=(e||"").toString(),n="/"===t.slice(0,1)?1:0,i=function(e){return"/"===e.slice(-1)}(t)?-1:void 0;return t.slice(n,i)}(e))})),n.join("/")}e.exports={cookieConsent:function(e){var t=e||[];return t.unshift("cookie/consent"),u(l(),t)},embedIframe:function(){return function(){var e=i.get("embedIframeURL");return e&&a(s,e)?e:"https://platform.twitter.com/embed/index.html"}()},eventVideo:function(e){var t=e||[];return t.unshift("video/event"),u(c(),t)},grid:function(e){var t=e||[];return t.unshift("grid/collection"),u(c(),t)},moment:function(e){var t=e||[];return t.unshift("moments"),u(c(),t)},settings:function(e){var t=e||[];return t.unshift("settings"),u(l(),t)},timeline:function(e){var t=e||[];return t.unshift("timeline"),u(c(),t)},tweetBatch:function(e){var t=e||[];return t.unshift("tweets.json"),u(c(),t)},video:function(e){var t=e||[];return t.unshift("widgets/video"),u(c(),t)}}},function(e,t,n){var i=n(4),r=n(8),o=n(39),s=n(103),a=n(5),c=n(34),l=!1,u=/https?:\/\/([^/]+).*/i;e.exports={setOn:function(){l=!0},enabled:function(e,t){return!!(l||a.asBoolean(c.val("dnt"))||s.isUrlSensitive(t||r.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(e=u.test(e||i.referrer)&&RegExp.$1)&&s.isUrlSensitive(e))}}},function(e,t,n){var i=n(4),r=n(12),o=n(94),s=n(1),a=n(0),c=o.userAgent;function l(e){return/(Trident|MSIE|Edge[/ ]?\d)/.test(e=e||c)}e.exports={retina:function(e){return(e=e||s).devicePixelRatio?e.devicePixelRatio>=1.5:!!e.matchMedia&&e.matchMedia("only screen and (min-resolution: 144dpi)").matches},anyIE:l,ie9:function(e){return/MSIE 9/.test(e=e||c)},ie10:function(e){return/MSIE 10/.test(e=e||c)},ios:function(e){return/(iPad|iPhone|iPod)/.test(e=e||c)},android:function(e){return/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(e=e||c)},canPostMessage:function(e,t){return t=t||c,(e=e||s).postMessage&&!(l(t)&&e.opener)},touch:function(e,t,n){return t=t||o,n=n||c,"ontouchstart"in(e=e||s)||/Opera Mini/.test(n)||t.msMaxTouchPoints>0},cssTransitions:function(){var e=i.body.style;return void 0!==e.transition||void 0!==e.webkitTransition||void 0!==e.mozTransition||void 0!==e.oTransition||void 0!==e.msTransition},hasPromiseSupport:function(){return!!(s.Promise&&s.Promise.resolve&&s.Promise.reject&&s.Promise.all&&s.Promise.race&&(new s.Promise((function(t){e=t})),a.isType("function",e)));var e},hasIntersectionObserverSupport:function(){return!!s.IntersectionObserver},hasPerformanceInformation:function(){return s.performance&&s.performance.getEntriesByType},hasLocalStorageSupport:function(){try{return s.localStorage.setItem("local_storage_support_test","true"),void 0!==s.localStorage}catch(e){return r.devError("window.localStorage is not supported:",e),!1}}}},function(e,t,n){var i=n(47),r=n(4),o=n(20),s=n(33),a=n(71),c=n(32),l=n(9),u=n(3),d=n(0),f=i.version,p=l.get("clientEventEndpoint")||"https://syndication.twitter.com/i/jot";function h(e){return d.aug({client:"tfw"},e||{})}function g(e,t,n){return t=t||{},d.aug({},t,{_category_:e,triggered_on:t.triggered_on||+new Date,dnt:o.enabled(n)})}e.exports={extractTermsFromDOM:function e(t,n){var i;return n=n||{},t&&t.nodeType===Node.ELEMENT_NODE?((i=t.getAttribute("data-scribe"))&&i.split(" ").forEach((function(e){var t=e.trim().split(":"),i=t[0],r=t[1];i&&r&&!n[i]&&(n[i]=r)})),e(t.parentNode,n)):n},clickEventElement:function(e){var t=s.closest("[data-expanded-url]",e),n=t&&t.getAttribute("data-expanded-url");return n&&u.isTwitterURL(n)?"twitter_url":"url"},flattenClientEventPayload:function(e,t){return d.aug({},t,{event_namespace:e})},formatGenericEventData:g,formatClientEventData:function(e,t,n){var i=e&&e.widget_origin||r.referrer;return(e=g("tfw_client_event",e,i)).client_version=f,e.format_version=void 0!==n?n:1,t||(e.widget_origin=i),e},formatClientEventNamespace:h,formatHorizonTweetData:function(e){var t={item_ids:[],item_details:{}};return t.item_ids.push(e),t.item_details[e]={item_type:a.TWEET},t},formatTweetAssociation:function(e,t){var n={};return(t=t||{}).association_namespace=h(e),n[1]=t,n},noticeSeen:function(e){return"notice"===e.element&&"seen"===e.action},splitLogEntry:function(e){var t,n,i,r,o;return e.item_ids&&e.item_ids.length>1?(t=Math.floor(e.item_ids.length/2),n=e.item_ids.slice(0,t),i={},r=e.item_ids.slice(t),o={},n.forEach((function(t){i[t]=e.item_details[t]})),r.forEach((function(t){o[t]=e.item_details[t]})),[d.aug({},e,{item_ids:n,item_details:i}),d.aug({},e,{item_ids:r,item_details:o})]):[e]},stringify:function(e){var t,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,t=c.stringify(e),n&&(Array.prototype.toJSON=n),t},CLIENT_EVENT_ENDPOINT:p,RUFOUS_REDIRECT:"https://platform.twitter.com/jot.html"}},function(e,t,n){var i=n(6),r=n(2);function o(e,t){return e.then(t,t)}function s(e){return e instanceof i}e.exports={always:o,allResolved:function(e){var t;return void 0===e?i.reject(new Error("undefined is not an object")):Array.isArray(e)?(t=e.length)?new i((function(n,i){var r=0,o=[];function a(){(r+=1)===t&&(0===o.length?i():n(o))}function c(e){o.push(e),a()}e.forEach((function(e){s(e)?e.then(c,a):c(e)}))})):i.resolve([]):i.reject(new Error("Type error"))},some:function(e){var t;return t=(e=e||[]).length,e=e.filter(s),t?t!==e.length?i.reject("non-Promise passed to .some"):new i((function(t,n){var i=0;function r(){(i+=1)===e.length&&n()}e.forEach((function(e){e.then(t,r)}))})):i.reject("no promises passed to .some")},isPromise:s,allSettled:function(e){function t(){}return i.all((e||[]).map((function(e){return o(e,t)})))},timeout:function(e,t){var n=new r;return setTimeout((function(){n.reject(new Error("Promise timed out"))}),t),e.then((function(e){n.resolve(e)}),(function(e){n.reject(e)})),n.promise}}},function(e,t){var n=0,i=0;e.exports={generate:function(){return"i"+String(+new Date)+Math.floor(1e5*Math.random())+n++},deterministic:function(){return"i"+String(i++)}}},function(e,t,n){var i=n(49),r=n(51),o=n(0);e.exports=o.aug(i.get("events")||{},r.Emitter)},function(e,t,n){var i=n(27),r=n(109);e.exports=i.build([r])},function(e,t,n){var i=n(40),r=n(106),o=n(7);(i=Object.create(i)).build=o(i.build,null,r),e.exports=i},function(e,t,n){var i=n(40),r=n(41),o=n(7);(i=Object.create(i)).build=o(i.build,null,r),e.exports=i},function(e,t,n){var i=n(81),r=n(75),o=n(82),s=n(8),a=n(70),c=n(74),l=n(20),u=n(5),d=n(24),f=n(0);function p(e){if(!e||!e.headers)throw new Error("unexpected response schema");return{html:e.body,config:e.config,pollInterval:1e3*parseInt(e.headers.xPolling,10)||null,maxCursorPosition:e.headers.maxPosition,minCursorPosition:e.headers.minPosition}}function h(e){if(e&&e.headers)throw new Error(e.headers.status);throw e instanceof Error?e:new Error(e)}e.exports=function(e){e.params({instanceId:{required:!0,fallback:d.deterministic},lang:{required:!0,transform:a.matchLanguage,fallback:"en"},tweetLimit:{transform:u.asInt}}),e.defineProperty("endpoint",{get:function(){throw new Error("endpoint not specified")}}),e.defineProperty("pollEndpoint",{get:function(){return this.endpoint}}),e.define("cbId",(function(e){var t=e?"_new":"_old";return"tl_"+this.params.instanceId+"_"+this.id+t})),e.define("queryParams",(function(){return{lang:this.params.lang,tz:c.getTimezoneOffset(),t:i(),domain:s.host,tweet_limit:this.params.tweetLimit,dnt:l.enabled()}})),e.define("fetch",(function(){return r.fetch(this.endpoint,this.queryParams(),o,this.cbId()).then(p,h)})),e.define("poll",(function(e,t){var n,i;return n={since_id:(e=e||{}).sinceId,max_id:e.maxId,min_position:e.minPosition,max_position:e.maxPosition},i=f.aug(this.queryParams(),n),r.fetch(this.pollEndpoint,i,o,this.cbId(t)).then(p,h)}))}},function(e,t,n){var i=n(51).makeEmitter();e.exports={emitter:i,START:"start",ALL_WIDGETS_RENDER_START:"all_widgets_render_start",ALL_WIDGETS_RENDER_END:"all_widgets_render_end",ALL_WIDGETS_AND_IMAGES_LOADED:"all_widgets_and_images_loaded"}},function(e,t,n){var i=n(4),r=n(0);e.exports=function(e,t,n){var o;if(n=n||i,t=t||{},(e=e||{}).name){try{o=n.createElement('<iframe name="'+e.name+'"></iframe>')}catch(t){(o=n.createElement("iframe")).name=e.name}delete e.name}else o=n.createElement("iframe");return e.id&&(o.id=e.id,delete e.id),o.allowtransparency="true",o.scrolling="no",o.setAttribute("frameBorder",0),o.setAttribute("allowTransparency",!0),r.forIn(e,(function(e,t){o.setAttribute(e,t)})),r.forIn(t,(function(e,t){o.style[e]=t})),o}},function(e,t,n){var i=n(1).JSON;e.exports={stringify:i.stringify||i.encode,parse:i.parse||i.decode}},function(e,t,n){var i=n(0),r=n(43);e.exports={closest:function e(t,n,o){var s;if(n)return o=o||n&&n.ownerDocument,s=i.isType("function",t)?t:function(e){return function(t){return!!t.tagName&&r(t,e)}}(t),n===o?s(n)?n:void 0:s(n)?n:e(s,n.parentNode,o)}}},function(e,t,n){var i,r=n(4);function o(e){var t,n,o,s=0;for(i={},t=(e=e||r).getElementsByTagName("meta");t[s];s++){if(n=t[s],/^twitter:/.test(n.getAttribute("name")))o=n.getAttribute("name").replace(/^twitter:/,"");else{if(!/^twitter:/.test(n.getAttribute("property")))continue;o=n.getAttribute("property").replace(/^twitter:/,"")}i[o]=n.getAttribute("content")||n.getAttribute("value")}}o(),e.exports={init:o,val:function(e){return i[e]}}},function(e,t,n){var i=n(113),r=n(116);function o(e){return i.settingsLoaded().then((function(t){return t[e]}))}function s(){return o("features")}e.exports={shouldObtainCookieConsent:function(){return o("shouldObtainCookieConsent")},getExperiments:s,getExperiment:function(e){return s().then((function(t){if(!t[e])throw new Error("Experiment not found");return t[e]}))},getActiveExperimentDataString:function(){return s().then((function(e){var t=Object.keys(e).reduce((function(t,n){var i;return e[n].version&&(i=n.split("_").slice(-1)[0],t.push(i+";"+e[n].bucket)),t}),[]);return r(t.join(","))}))},getExperimentKeys:function(){return s().then((function(e){return Object.keys(e)}))},load:function(){i.load()}}},function(e,t,n){var i=n(10),r={},o=-1,s={};function a(e){return e.getAttribute("data-twitter-event-id")||(e.setAttribute("data-twitter-event-id",++o),o)}function c(e,t,n){var i=0,r=e&&e.length||0;for(i=0;i<r;i++)if(e[i].call(t,n,t),n.ceaseImmediately)return!1}function l(e,t,n){for(var r=n||e.target||e.srcElement,o=i.list(r).map((function(e){return"."+e})).concat(r.tagName),s=0,a=o.length;s<a;s++)if(!1===c(t[o[s]],r,e))return;e.cease||r!==this&&l.call(this,e,t,r.parentElement||r.parentNode)}function u(e){e&&e.preventDefault?e.preventDefault():e.returnValue=!1}function d(e){e&&(e.cease=!0)&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}e.exports={stop:function(e){return d(e),u(e),!1},stopPropagation:d,stopImmediatePropagation:function(e){e&&(e.ceaseImmediately=!0,d(e),e.stopImmediatePropagation())},preventDefault:u,delegate:function(e,t,n,i){var o=a(e);r[o]=r[o]||{},r[o][t]||(r[o][t]={},function(e,t,n,i){function r(i){l.call(e,i,n[t])}!function(e,t,n,i){e.id&&(s[e.id]=s[e.id]||[],s[e.id].push({el:e,listener:t,type:n,rootId:i}))}(e,r,t,i),e.addEventListener(t,r,!1)}(e,t,r[o],o)),r[o][t][n]=r[o][t][n]||[],r[o][t][n].push(i)},simulate:function(e,t,n){var i=a(t),o=r[i]&&r[i];l.call(t,{target:n},o[e])},removeDelegatesForWidget:function(e){var t=s[e];t&&(t.forEach((function(e){e.el.removeEventListener(e.type,e.listener,!1),delete r[e.rootId]})),delete s[e])}}},function(e,t,n){var i=n(77),r=n(102),o=n(111),s=n(22),a=new(n(112))((function(e){var t,n,a;if(0!==e.length){if(c(e))return l(e);n=(t=i(e,(function(e){return s.noticeSeen(e.input.namespace)}))).true,a=t.false,n&&n.length>0&&(n=n.slice(0,1),o.canFlushOneItem(n[0])||(n[0].input.data.message=""),l(n)),a&&(c(a)?l:function(e){r.init(),e.forEach((function(e){var t=e.input.namespace,n=e.input.data,i=e.input.offsite,o=e.input.version;r.clientEvent(t,n,i,o)})),r.flush().then((function(){e.forEach((function(e){e.taskDoneDeferred.resolve()}))}),(function(){e.forEach((function(e){e.taskDoneDeferred.reject()}))}))})(a)}}));function c(e){return 1===e.length&&o.canFlushOneItem(e[0])}function l(e){e.forEach((function(e){var t=e.input.namespace,n=e.input.data,i=e.input.offsite,r=e.input.version;o.clientEvent(t,n,i,r),e.taskDoneDeferred.resolve()}))}e.exports={scribe:function(e,t,n,i){return a.add({namespace:e,data:t,offsite:n,version:i})},pause:function(){a.pause()},resume:function(){a.resume()}}},function(e,t,n){var i=n(27),r=n(125);e.exports=i.build([r])},function(e,t,n){var i=n(8),r=n(78),o=n(0),s=r.getCanonicalURL()||i.href,a=s;e.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(e){return e&&o.isType("string",e)&&(s=e),s},currentDocumentLocation:function(){return a}}},function(e,t,n){var i=n(104),r=n(105),o=n(0);e.exports={couple:function(){return o.toRealArray(arguments)},build:function(e,t,n){var o=new e;return(t=r(i(t||[]))).forEach((function(e){e.call(null,o)})),o.build(n)}}},function(e,t,n){var i=n(107),r=n(0),o=n(42);function s(){this.Component=this.factory(),this._adviceArgs=[],this._lastArgs=[]}r.aug(s.prototype,{factory:o,build:function(e){var t=this;return this.Component,r.aug(this.Component.prototype.boundParams,e),this._adviceArgs.concat(this._lastArgs).forEach((function(e){(function(e,t,n){var i=this[t];if(!i)throw new Error(t+" does not exist");this[t]=e(i,n)}).apply(t.Component.prototype,e)})),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(e){var t=this.Component.prototype.paramConfigs;e=e||{},this.Component.prototype.paramConfigs=r.aug({},e,t)},define:function(e,t){if(e in this.Component.prototype)throw new Error(e+" has previously been defined");this.override(e,t)},defineStatic:function(e,t){this.Component[e]=t},override:function(e,t){this.Component.prototype[e]=t},defineProperty:function(e,t){if(e in this.Component.prototype)throw new Error(e+" has previously been defined");this.overrideProperty(e,t)},overrideProperty:function(e,t){var n=r.aug({configurable:!0},t);Object.defineProperty(this.Component.prototype,e,n)},before:function(e,t){this._adviceArgs.push([i.before,e,t])},after:function(e,t){this._adviceArgs.push([i.after,e,t])},around:function(e,t){this._adviceArgs.push([i.around,e,t])},last:function(e,t){this._lastArgs.push([i.after,e,t])}}),e.exports=s},function(e,t,n){var i=n(0);function r(){return!0}function o(e){return e}e.exports=function(){function e(e){var t=this;e=e||{},this.params=Object.keys(this.paramConfigs).reduce((function(n,s){var a=[],c=t.boundParams,l=t.paramConfigs[s],u=l.validate||r,d=l.transform||o;if(s in c&&a.push(c[s]),s in e&&a.push(e[s]),a="fallback"in l?a.concat(l.fallback):a,n[s]=function(e,t,n){var r=null;return e.some((function(e){if(e=i.isType("function",e)?e():e,t(e))return r=n(e),!0})),r}(a,u,d),l.required&&null==n[s])throw new Error(s+" is a required parameter");return n}),{}),this.initialize()}return i.aug(e.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),e}},function(e,t,n){var i=n(1).HTMLElement,r=i.prototype.matches||i.prototype.matchesSelector||i.prototype.webkitMatchesSelector||i.prototype.mozMatchesSelector||i.prototype.msMatchesSelector||i.prototype.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t)}},function(e,t,n){var i,r=n(10),o=n(4),s=n(1),a=n(34),c=n(53),l=n(5),u=n(24);e.exports={inlineStyle:function(){var e="csptest"+u.generate(),t=o.createElement("div"),n=o.createElement("style"),d="."+e+" { visibility: hidden; }";return!!o.body&&(l.asBoolean(a.val("widgets:csp"))&&(i=!1),void 0!==i||(t.style.display="none",r.add(t,e),n.type="text/css",n.appendChild(o.createTextNode(d)),o.body.appendChild(n),o.body.appendChild(t),i="hidden"===s.getComputedStyle(t).visibility,c(t),c(n)),i)}}},function(e,t,n){var i=n(1);e.exports=function(e,t,n){var r,o=0;return n=n||null,function s(){var a=n||this,c=arguments,l=+new Date;if(i.clearTimeout(r),l-o>t)return o=l,void e.apply(a,c);r=i.setTimeout((function(){s.apply(a,c)}),t)}}},function(e,t){e.exports=function(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}},function(e){e.exports={version:"219d021:1598982042171"}},function(n,i,r){
/*!
   * @overview es6-promise - a tiny implementation of Promises/A+.
   * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
   * @license   Licensed under MIT license
   *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
   * @version   v4.2.5+7f2b526d
   */
var o;o=function(){"use strict";function n(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,o=void 0,s=void 0,a=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(s?s(g):b())},c="undefined"!=typeof window?window:void 0,l=c||{},u=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(g,1)}}var h=new Array(1e3);function g(){for(var e=0;e<r;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;r=0}var m,v,y,w,b=void 0;function x(e,t){var n=this,i=new this.constructor(_);void 0===i[T]&&j(i);var r=n._state;if(r){var o=arguments[r-1];a((function(){return O(r,i,o,n._result)}))}else L(n,i,e,t);return i}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(_);return A(t,e),t}d?b=function(){return e.nextTick(g)}:u?(v=0,y=new u(g),w=document.createTextNode(""),y.observe(w,{characterData:!0}),b=function(){w.data=v=++v%2}):f?((m=new MessageChannel).port1.onmessage=g,b=function(){return m.port2.postMessage(0)}):b=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(g)}:p()}catch(e){return p()}}():p();var T=Math.random().toString(36).substring(2);function _(){}var S=void 0,N={error:null};function C(e){try{return e.then}catch(e){return N.error=e,N}}function k(e,t,i){t.constructor===e.constructor&&i===x&&t.constructor.resolve===E?function(e,t){1===t._state?P(e,t._result):2===t._state?D(e,t._result):L(t,void 0,(function(t){return A(e,t)}),(function(t){return D(e,t)}))}(e,t):i===N?(D(e,N.error),N.error=null):void 0===i?P(e,t):n(i)?function(e,t,n){a((function(e){var i=!1,r=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,(function(n){i||(i=!0,t!==n?A(e,n):P(e,n))}),(function(t){i||(i=!0,D(e,t))}),e._label);!i&&r&&(i=!0,D(e,r))}),e)}(e,t,i):P(e,t)}function A(e,t){var n,i;e===t?D(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!==i&&"function"!==i?P(e,t):k(e,t,C(t)))}function I(e){e._onerror&&e._onerror(e._result),R(e)}function P(e,t){e._state===S&&(e._result=t,e._state=1,0!==e._subscribers.length&&a(R,e))}function D(e,t){e._state===S&&(e._state=2,e._result=t,a(I,e))}function L(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+1]=n,r[o+2]=i,0===o&&e._state&&a(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?O(n,i,r,o):r(o);e._subscribers.length=0}}function O(e,t,i,r){var o=n(i),s=void 0,a=void 0,c=void 0,l=void 0;if(o){if((s=function(e,t){try{return e(t)}catch(e){return N.error=e,N}}(i,r))===N?(l=!0,a=s.error,s.error=null):c=!0,t===s)return void D(t,new TypeError("A promises callback cannot return that same promise."))}else s=r,c=!0;t._state!==S||(o&&c?A(t,s):l?D(t,a):1===e?P(t,s):2===e&&D(t,s))}var F=0;function j(e){e[T]=F++,e._state=void 0,e._result=void 0,e._subscribers=[]}var M=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[T]||j(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===E){var r=C(e);if(r===x&&e._state!==S)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===B){var o=new n(_);k(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===S&&(this._remaining--,2===e?D(i,n):this._result[t]=n),0===this._remaining&&P(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;L(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),B=function(){function e(t){this[T]=F++,this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t((function(t){A(e,t)}),(function(t){D(e,t)}))}catch(t){D(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return n(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},e}();return B.prototype.then=x,B.all=function(e){return new M(this,e).promise},B.race=function(e){var t=this;return i(e)?new t((function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},B.resolve=E,B.reject=function(e){var t=new this(_);return D(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){a=e},B._asap=a,B.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===i&&!n.cast)return}e.Promise=B},B.Promise=B,B},n.exports=o()},function(e,t,n){var i=n(50);e.exports=new i("twttr")},function(e,t,n){var i=n(1),r=n(0);function o(e){return r.isType("string",e)?e.split("."):r.isType("array",e)?e:[]}function s(e,t){(t=t||i)[e]=t[e]||{},Object.defineProperty(this,"base",{value:t[e]}),Object.defineProperty(this,"name",{value:e})}r.aug(s.prototype,{get:function(e){return o(e).reduce((function(e,t){if(r.isObject(e))return e[t]}),this.base)},set:function(e,t,n){var i=o(e),s=function(e,t){var n=o(t).slice(0,-1);return n.reduce((function(e,t,i){if(e[t]=e[t]||{},!r.isObject(e[t]))throw new Error(n.slice(0,i+1).join(".")+" is already defined with a value.");return e[t]}),e)}(this.base,e),a=i.slice(-1);return n&&a in s?s[a]:s[a]=t},init:function(e,t){return this.set(e,t,!0)},unset:function(e){var t=o(e),n=this.get(t.slice(0,-1));n&&delete n[t.slice(-1)]},aug:function(e){var t=this.get(e),n=r.toRealArray(arguments).slice(1);if(t=void 0!==t?t:{},n.unshift(t),!n.every(r.isObject))throw new Error("Cannot augment non-object.");return this.set(e,r.aug.apply(null,n))},call:function(e){var t=this.get(e),n=r.toRealArray(arguments).slice(1);if(!r.isType("function",t))throw new Error("Function "+e+"does not exist.");return t.apply(null,n)},fullPath:function(e){var t=o(e);return t.unshift(this.name),t.join(".")}}),e.exports=s},function(e,t,n){var i=n(0),r=n(7),o={bind:function(e,t){return this._handlers=this._handlers||{},this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)},unbind:function(e,t){var n;this._handlers&&this._handlers[e]&&(t?(n=this._handlers[e].indexOf(t))>=0&&this._handlers[e].splice(n,1):this._handlers[e]=[])},trigger:function(e,t){var n=this._handlers&&this._handlers[e];(t=t||{}).type=e,n&&n.forEach((function(e){i.async(r(e,this,t))}))}};e.exports={Emitter:o,makeEmitter:function(){return i.aug((function(){}),o)}}},function(e,t,n){var i=n(99),r=n(76),o=n(6),s=n(23),a=n(7),c=n(0),l=new r((function(e){var t=function(e){return e.reduce((function(e,t){return e[t._className]=e[t._className]||[],e[t._className].push(t),e}),{})}(e.map(i.fromRawTask));c.forIn(t,(function(e,t){s.allSettled(t.map((function(e){return e.initialize()}))).then((function(){t.forEach((function(e){o.all([e.hydrate(),e.insertIntoDom()]).then(a(e.render,e)).then(a(e.success,e),a(e.fail,e))}))}))}))}));e.exports={addWidget:function(e){return l.add(e)}}},function(e,t,n){var i=n(18);e.exports=function(e){return i.write((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}))}},function(e,t,n){n(12),e.exports={log:function(e,t){}}},function(e,t,n){var i=n(1);function r(e){return(e=e||i).getSelection&&e.getSelection()}e.exports={getSelection:r,getSelectedText:function(e){var t=r(e);return t?t.toString():""}}},function(e,t,n){var i=n(4),r=n(1),o=n(2);e.exports=function(e){var t=new o,n=i.createElement("img");return n.onload=n.onerror=function(){r.setTimeout(t.resolve,50)},n.src=e,r.setTimeout(t.reject,2e4),t.promise}},function(e,t,n){var i=n(110);e.exports=function(e){e.define("createElement",i),e.define("createFragment",i),e.define("htmlToElement",i),e.define("hasSelectedText",i),e.define("addRootClass",i),e.define("removeRootClass",i),e.define("hasRootClass",i),e.define("prependStyleSheet",i),e.define("appendStyleSheet",i),e.define("prependCss",i),e.define("appendCss",i),e.define("makeVisible",i),e.define("injectWidgetEl",i),e.define("matchHeightToContent",i),e.define("matchWidthToContent",i)}},function(e,t){e.exports=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}}},function(e,t,n){var i=n(15),r=n(120),o=n(60),s=n(16);e.exports=function(e,t,n){return new i(r,o,s.DM_BUTTON,e,t,n)}},function(e,t,n){var i=n(61),r=n(26);e.exports=i.isSupported()?i:r},function(e,t,n){var i=n(27),r=n(121);e.exports=i.build([r])},function(e,t,n){var i=n(15),r=n(124),o=n(38),s=n(16);e.exports=function(e,t,n){return new i(r,o,s.FOLLOW_BUTTON,e,t,n)}},function(e,t,n){var i=n(15),r=n(132),o=n(26),s=n(16);e.exports=function(e,t,n){return new i(r,o,s.MOMENT,e,t,n)}},function(e,t,n){var i=n(15),r=n(134),o=n(26),s=n(16);e.exports=function(e,t,n){return new i(r,o,s.PERISCOPE,e,t,n)}},function(e,t,n){var i=n(80),r=n(136),o=n(140),s=n(142),a=n(144),c=n(146),l={collection:r,event:o,likes:s,list:a,profile:c,url:d},u=[c,s,r,a,o];function d(e){return i(u,(function(t){try{return new t(e)}catch(e){}}))}e.exports=function(e){return e?function(e){var t,n;return t=(e.sourceType+"").toLowerCase(),(n=l[t])?new n(e):null}(e)||d(e):null}},function(e,t,n){var i=n(15),r=n(148),o=n(26),s=n(16);e.exports=function(e,t,n){return new i(r,o,s.TIMELINE,e,t,n)}},function(e,t,n){var i=n(4),r=n(150),o=n(151),s=n(15),a=n(38),c=n(152),l=n(60),u=n(153),d=n(16);e.exports=function(e,t,n,f){var p,h=r.isHorizonTweetEnabled(f,e);return o(f,e.tweetId),h?(p=i.createElement("div"),new s(c,a,d.TWEET,e,t,n,{sandboxWrapperEl:p})):new s(u,l,d.TWEET,e,t,n)}},function(e,t,n){var i=n(15),r=n(155),o=n(38),s=n(16);e.exports=function(e,t,n){var a=e&&e.type||"share",c="hashtag"==a?s.HASHTAG_BUTTON:"mention"==a?s.MENTION_BUTTON:s.SHARE_BUTTON;return new i(r,o,c,e,t,n)}},function(e,t,n){var i=n(37),r=n(39),o=n(0);e.exports=function(e){var t={widget_origin:r.rootDocumentLocation(),widget_frame:r.isFramed()?r.currentDocumentLocation():null,duration_ms:e.duration,item_ids:e.widgetIds||[]},n=o.aug(e.namespace,{page:"page",component:"performance"});i.scribe(n,t)}},function(e,t,n){var i=n(0),r=n(137),o=["ar","fa","he","ur"];e.exports={isRtlLang:function(e){return e=String(e).toLowerCase(),i.contains(o,e)},matchLanguage:function(e){return e=(e=(e||"").toLowerCase()).replace("_","-"),r(e)?e:(e=e.replace(/-.*/,""),r(e)?e:"en")}}},function(e){e.exports={TWEET:0,RETWEET:10,CUSTOM_TIMELINE:17,LIVE_VIDEO_EVENT:28,QUOTE_TWEET:23}},function(e){e.exports={tweetButtonHtmlPath:"/widgets/tweet_button.2d7d9a6d04538bf11c7b23641e75738c.{{lang}}.html",followButtonHtmlPath:"/widgets/follow_button.2d7d9a6d04538bf11c7b23641e75738c.{{lang}}.html",hubHtmlPath:"/widgets/hub.html",widgetIframeHtmlPath:"/widgets/widget_iframe.2d7d9a6d04538bf11c7b23641e75738c.html",resourceBaseUrl:"https://platform.twitter.com"}},function(e,t,n){var i=n(3),r=n(97),o=n(25),s=n(11),a={favorite:["favorite","like"],follow:["follow"],like:["favorite","like"],retweet:["retweet"],tweet:["tweet"]};function c(e){this.srcEl=[],this.element=e}c.open=function(e,t,n){var c=(i.intentType(e)||"").toLowerCase();i.isTwitterURL(e)&&(function(e,t){r.open(e,t)}(e,n),t&&o.trigger("click",{target:t,region:"intent",type:"click",data:{}}),t&&a[c]&&a[c].forEach((function(n){o.trigger(n,{target:t,region:"intent",type:n,data:function(e,t){var n=s.decodeURL(t);switch(e){case"favorite":case"like":return{tweet_id:n.tweet_id};case"follow":return{screen_name:n.screen_name,user_id:n.user_id};case"retweet":return{source_tweet_id:n.tweet_id};default:return{}}}(c,e)})})))},e.exports=c},function(e,t){e.exports={getTimezoneOffset:function(){var e=(new Date).toString().match(/(GMT[+-]?\d+)/);return e&&e[0]||"GMT"}}},function(e,t,n){var i=n(4),r=n(9),o=n(2),s=n(0),a=n(11),c=0;e.exports={fetch:function(e,t,n,l){var u,d,f;return l=function(e){if(e)return e.replace(/[^\w$]/g,"_")}(l||"cb"+c++),u=r.fullPath(["callbacks",l]),d=i.createElement("script"),f=new o,t=s.aug({},t,{callback:u,suppress_response_codes:!0}),r.set(["callbacks",l],(function(e){var t;e=(t=n(e||!1)).resp,t.success?f.resolve(e):f.reject(e),d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),r.unset(["callbacks",l])})),d.onerror=function(){f.reject(new Error("failed to fetch "+d.src))},d.src=a.url(e,t),d.async="async",i.body.appendChild(d),f.promise}}},function(e,t,n){var i=n(2),r=n(101),o=n(7);function s(e){this._inputsQueue=[],this._task=e,this._hasFlushBeenScheduled=!1}s.prototype.add=function(e){var t=new i;return this._inputsQueue.push({input:e,taskDoneDeferred:t}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,r(o(this._flush,this))),t.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(e){this._inputsQueue.forEach((function(t){t.taskDoneDeferred.reject(e)}))}this._inputsQueue=[],this._hasFlushBeenScheduled=!1},e.exports=s},function(e,t){e.exports=function(e,t){return e.reduce((function(e,n){var i=t(n);return e[i]=e[i]||[],e[i].push(n),e}),{})}},function(e,t,n){var i=n(4),r=n(8),o=n(3);function s(e,t){var n,i;return t=t||r,/^https?:\/\//.test(e)?e:/^\/\//.test(e)?t.protocol+e:(n=t.host+(t.port.length?":"+t.port:""),0!==e.indexOf("/")&&((i=t.pathname.split("/")).pop(),i.push(e),e="/"+i.join("/")),[t.protocol,"//",n,e].join(""))}e.exports={absolutize:s,getCanonicalURL:function(){for(var e,t=i.getElementsByTagName("link"),n=0;t[n];n++)if("canonical"==(e=t[n]).rel)return s(e.href)},getScreenNameFromPage:function(){for(var e,t,n,r=[i.getElementsByTagName("a"),i.getElementsByTagName("link")],s=0,a=0,c=/\bme\b/;e=r[s];s++)for(a=0;t=e[a];a++)if(c.test(t.rel)&&(n=o.screenName(t.href)))return n}}},function(e,t,n){var i=n(0),r=n(43);e.exports=function(e,t){return r(e,t)?[e]:i.toRealArray(e.querySelectorAll(t))}},function(e,t){e.exports=function(e,t,n){for(var i,r=0;r<e.length;r++)if(i=t.call(n,e[r],r,e))return i}},function(e,t){e.exports=function(){return Math.floor(+new Date/9e5)}},function(e,t,n){var i=n(12);e.exports=function(e){var t,n;return t=e.headers&&e.headers.status,!(n=e&&!e.error&&200===t)&&e.headers&&e.headers.message&&i.publicError(e.headers.message),{success:n,resp:e}}},function(e,t,n){var i=n(37),r=n(22);e.exports=function(e,t,n,o){i.scribe(r.formatClientEventNamespace({client:"tfw",page:"ddg",section:e,action:"experiment"}),{experiment_key:e,bucket:t,version:n,data:o},!0)}},function(e,t,n){var i,r=n(30),o=0;function s(){i&&i.length===o&&(r.emitter.trigger(r.ALL_WIDGETS_AND_IMAGES_LOADED,i),i=null)}r.emitter.bind(r.ALL_WIDGETS_RENDER_END,(function(e){i=e.widgets,s()})),e.exports={reportImagesLoadForAWidget:function(){o++,s()}}},,,,,,,,,function(e,t,n){var i,r=n(2),o=n(4),s=n(95),a=n(49),c=n(9),l=n(96),u=n(25),d=n(98),f=n(156),p=n(164),h=n(165),g=n(30),m=n(35);n(166),g.emitter.trigger(g.START),c.set("widgets.init",!0),a.set("init",!0),h(),i=new r,s.exposeReadyPromise(i.promise,a.base,"_e"),a.set("widgets",f),a.set("widgets.load",d.load),a.set("events",u),p((function(){m.load(),i.resolve(a.base),l.attachTo(o),d.loadPage()}))},function(e,t){e.exports=navigator},function(e,t,n){var i=n(7);e.exports={exposeReadyPromise:function(e,t,n){t.ready=i(e.then,e),n&&Array.isArray(t[n])&&(t[n].forEach(i(e.then,e)),delete t[n])}}},function(e,t,n){var i=n(8),r=n(36),o=n(33),s=n(73),a=n(3);function c(e){var t,n,c;e.altKey||e.metaKey||e.shiftKey||(t=o.closest((function(e){return"A"===e.tagName||"AREA"===e.tagName}),e.target))&&a.isIntentURL(t.href)&&(n=(n=(n=[c=t.href,"original_referer="+i.href].join(-1==c.indexOf("?")?"?":"&")).replace(/^http[:]/,"https:")).replace(/^\/\//,"https://"),s.open(n,t),r.preventDefault(e))}e.exports={attachTo:function(e){e.addEventListener("click",c,!1)}}},function(e,t,n){var i=n(1),r=n(36),o=n(33),s=n(21),a=n(3),c=n(24);function l(e){this.win=e}l.prototype.open=function(e,t){var n=t&&"click"==t.type&&o.closest("a",t.target),i=t&&(t.altKey||t.metaKey||t.shiftKey),l=n&&(s.ios()||s.android());if(a.isTwitterURL(e))return i||l||(this.name="intent_"+c.generate(),this.popup=this.win.open(e,this.name),t&&r.preventDefault(t)),this},l.open=function(e,t){return new l(i).open(e,t)},e.exports=l},function(e,t,n){var i=n(4),r=n(6),o=n(23),s=n(52),a=n(34),c=n(9),l=n(37),u=n(25),d=n(5),f=n(0),p=n(35),h=n(117),g=n(30);function m(){var e=a.val("widgets:autoload")||!0;return!d.isFalseValue(e)&&(d.isTruthValue(e)?i.body:i.querySelectorAll(e))}function v(e){return p.getExperiments().then((function(t){return function(e,t){var n,r;return e=(e=e||i.body).length?f.toRealArray(e):[e],l.pause(),r=function(e,t){return e.reduce((function(e,n){return e.concat(h.reduce((function(e,i){return e.concat(i(n,t))}),[]))}),[])}(e,t),g.emitter.trigger(g.ALL_WIDGETS_RENDER_START,{widgets:r}),n=o.allResolved(r.map((function(e){return s.addWidget(e)}))).then((function(e){u.trigger("loaded",{widgets:e}),e&&e.length&&g.emitter.trigger(g.ALL_WIDGETS_RENDER_END,{widgets:e})})),o.always(n,(function(){l.resume()})),n}(e,t)}))}e.exports={load:v,loadPage:function(){var e=m();return!1===e?r.resolve():(c.set("widgets.loaded",!0),v(e))},_getPageLoadTarget:m}},function(e,t,n){var i=n(10),r=n(18),o=n(25),s=n(53),a=n(6),c=n(23);function l(e,t){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=e.Sandbox,this._factory=e.factory,this._widgetParams=e.parameters,this._resolve=t,this._className=e.className,this._renderedClassName=e.className+"-rendered",this._errorClassName=e.className+"-error",this._srcEl=e.srcEl,this._targetGlobal=function(e){return(e.srcEl||e.targetEl).ownerDocument.defaultView}(e),this._sandboxWrapperEl=e.options?e.options.sandboxWrapperEl:null,this._insertionStrategy=function(t){var n,i=e.srcEl,r=e.targetEl,o=e.className,s=e.className+"-rendered",a=e.options?e.options.sandboxWrapperEl:null;a?(a.appendChild(t),a.classList.add(o,s),n=a):n=t,i?r.insertBefore(n,i):r.appendChild(n)}}l.fromRawTask=function(e){return new l(e.input,e.taskDoneDeferred.resolve)},l.prototype.initialize=function(){var e=this,t=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,t).then((function(n){return e._widget=n,e._sandbox=t,n._sandboxWrapperEl=e._sandboxWrapperEl,n}))},l.prototype.insertIntoDom=function(){var e=this,t=this._sandboxWrapperEl?"":[this._className,this._renderedClassName].join(" ");return this._widget?this._sandbox.insert(this._widget.id,{class:t},null,this._insertionStrategy).then((function(){e._insertedIntoDom=!0})):a.reject(new Error("cannot insert widget into DOM before it is initialized"))},l.prototype.hydrate=function(){var e=this;return this._widget?this._widget.hydrate().then((function(){e._hydrated=!0})):a.reject(new Error("cannot hydrate widget before it is initialized"))},l.prototype.render=function(){var e=this;function t(t){var n=e._sandboxWrapperEl?e._sandboxWrapperEl:e._sandbox.sandboxEl;return s(n).then((function(){return a.reject(t)}))}return this._hydrated?this._insertedIntoDom?e._widget.render(e._sandbox).then((function(){return e._sandbox.onResize((function(){return e._widget.resize().then((function(){var t=e._sandboxWrapperEl?e._sandboxWrapperEl:e._sandbox.sandboxEl;o.trigger("resize",{target:t})}))})),e._widget.show()})).then((function(){return s(e._srcEl).then((function(){return e._sandbox.sandboxEl}))}),t):t(new Error("cannot render widget before DOM insertion")):t(new Error("cannot render widget before hydration"))},l.prototype.fail=function(){var e=this,t=e._errorClassName,n=e._sandboxWrapperEl?e._sandboxWrapperEl:e._srcEl;return this._srcEl?c.always(r.write((function(){i.add(n,t)})),(function(){o.trigger("rendered",{target:n}),e._resolve(n)})):(e._resolve(),a.resolve())},l.prototype.success=function(){var e=this._sandboxWrapperEl?this._sandboxWrapperEl:this._sandbox.sandboxEl;o.trigger("rendered",{target:e}),this._resolve(e)},e.exports=l},function(e,t,n){var i;!function(){"use strict";var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)};function o(){this.frames=[],this.lastId=0,this.raf=r,this.batch={hash:{},read:[],write:[],mode:null}}o.prototype.read=function(e,t){var n=this.add("read",e,t),i=n.id;return this.batch.read.push(n.id),"reading"===this.batch.mode||this.batch.scheduled||this.scheduleBatch(),i},o.prototype.write=function(e,t){var n=this.add("write",e,t),i=this.batch.mode,r=n.id;return this.batch.write.push(n.id),"writing"===i||"reading"===i||this.batch.scheduled||this.scheduleBatch(),r},o.prototype.defer=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=1);var i=this,r=e-1;return this.schedule(r,(function(){i.run({fn:t,ctx:n})}))},o.prototype.clear=function(e){if("function"==typeof e)return this.clearFrame(e);e=Number(e);var t=this.batch.hash[e];if(t){var n=this.batch[t.type],i=n.indexOf(e);delete this.batch.hash[e],~i&&n.splice(i,1)}},o.prototype.clearFrame=function(e){var t=this.frames.indexOf(e);~t&&this.frames.splice(t,1)},o.prototype.scheduleBatch=function(){var e=this;this.schedule(0,(function(){e.batch.scheduled=!1,e.runBatch()})),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(e){for(var t;t=e.shift();)this.run(this.batch.hash[t])},o.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(e){throw this.runBatch(),e}},o.prototype.add=function(e,t,n){var i=this.uniqueId();return this.batch.hash[i]={id:i,fn:t,ctx:n,type:e}},o.prototype.run=function(e){var t=e.ctx||this,n=e.fn;if(delete this.batch.hash[e.id],!this.onError)return n.call(t);try{n.call(t)}catch(e){this.onError(e)}},o.prototype.loop=function(){var e,t=this,n=this.raf,i=!1;function r(){var e=t.frames.shift();t.frames.length?n(r):t.looping=!1,e&&e()}this.looping||(e=setTimeout((function(){i=!0,r()}),500),n((function(){i||(clearTimeout(e),r())})),this.looping=!0)},o.prototype.schedule=function(e,t){return this.frames[e]?this.schedule(e+1,t):(this.loop(),this.frames[e]=t)};var s=new o;void 0!==e&&e.exports?e.exports=s:void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()},function(e,t,n){var i=n(48).Promise;e.exports=i._asap},function(e,t,n){var i,r,o,s=n(4),a=n(1),c=n(31),l=n(20),u=n(2),d=n(6),f=n(54),p=n(22),h=n(0),g=n(26),m=n(9).get("scribeCallback"),v=Math.floor(1e3*Math.random())+"_",y="rufous-frame-"+v+"-",w="rufous-form-"+v+"-",b=0,x=!1,E=new u;function T(){var e=o.createElement("form"),t=o.createElement("input"),n=o.createElement("input");return b++,e.action=p.CLIENT_EVENT_ENDPOINT,e.method="POST",e.target=y+b,e.id=w+b,t.type="hidden",t.name="dnt",t.value=l.enabled(),n.type="hidden",n.name="tfw_redirect",n.value=p.RUFOUS_REDIRECT,e.appendChild(t),e.appendChild(n),e}function _(){var e=y+b;return c({id:e,name:e,width:0,height:0,border:0},{display:"none"},o.doc)}e.exports={clientEvent:function(e,t,n,r){(function(e,t){var n=!h.isObject(e),i=!!t&&!h.isObject(t);return n||i})(e,t)||(m&&m(arguments),E.promise.then((function(){!function(e,t){var n,r,s;h.isObject(e)&&h.isObject(t)&&(f.log(e,t),s=p.flattenClientEventPayload(e,t),(n=i.firstChild).value=+(+n.value||s.dnt||0),(r=o.createElement("input")).type="hidden",r.name="l",r.value=p.stringify(s),i.appendChild(r))}(p.formatClientEventNamespace(e),p.formatClientEventData(t,n,r))})))},flush:function(){return E.promise.then((function(){var e;return i.children.length<=2?d.reject():(e=d.all([o.doc.body.appendChild(i),o.doc.body.appendChild(r)]).then((function(e){var t=e[0],n=e[1];return n.addEventListener("load",(function(){!function(e,t){return function(){var n=e.parentNode;n&&(n.removeChild(e),n.removeChild(t))}}(t,n)()})),t.submit(),e})),i=T(),r=_(),e)}))},init:function(){return x||((o=new g(a)).insert("rufous-sandbox",null,{display:"none"},(function(e){s.body.appendChild(e)})).then((function(){o.setTitle("Twitter analytics iframe"),i=T(),r=_(),E.resolve([i,r])})),x=!0),E.promise}}},function(e,t,n){var i=n(8),r=/^[^#?]*\.(gov|mil)(:\d+)?([#?].*)?$/i,o={};function s(e){return e in o?o[e]:o[e]=r.test(e)}e.exports={isUrlSensitive:s,isHostPageSensitive:function(){return s(i.host)}}},function(e,t,n){var i=n(0);e.exports=function e(t){var n=[];return t.forEach((function(t){var r=i.isType("array",t)?e(t):[t];n=n.concat(r)})),n}},function(e,t){e.exports=function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))}},function(e,t,n){var i=n(41),r=n(0),o=n(108);function s(){i.apply(this,arguments)}s.prototype=Object.create(i.prototype),r.aug(s.prototype,{factory:o}),e.exports=s},function(e,t,n){var i=n(23),r=n(0),o=n(7);e.exports={before:function(e,t){return function(){var n,r=this,o=arguments;return n=t.apply(this,arguments),i.isPromise(n)?n.then((function(){return e.apply(r,o)})):e.apply(this,arguments)}},after:function(e,t){return function(){var n,r=this,o=arguments;function s(e,t){return i.isPromise(t)?t.then((function(){return e})):e}return n=e.apply(this,arguments),i.isPromise(n)?n.then((function(e){return s(e,t.apply(r,o))})):s(n,t.apply(this,arguments))}},around:function(e,t){return function(){var n=r.toRealArray(arguments);return n.unshift(o(e,this)),t.apply(this,n)}}}},function(e,t,n){var i=n(10),r=n(18),o=n(42),s=n(6),a=n(0);e.exports=function(){var e=o();function t(t){e.apply(this,arguments),Object.defineProperty(this,"targetGlobal",{value:t})}return t.prototype=Object.create(e.prototype),a.aug(t.prototype,{id:null,initialized:!1,width:0,height:0,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(e){var t=this.sandboxEl;return e=Array.isArray(e)?e:[e],r.write((function(){e.forEach((function(e){i.add(t,e)}))}))},removeClass:function(e){var t=this.sandboxEl;return e=Array.isArray(e)?e:[e],r.write((function(){e.forEach((function(e){i.remove(t,e)}))}))},styleSelf:function(e){var t=this;return r.write((function(){a.forIn(e,(function(e,n){t.sandboxEl.style[e]=n}))}))}}),t}},function(e,t,n){var i=n(4),r=n(10),o=n(18),s=n(55),a=n(27),c=n(56),l=n(44),u=n(45),d=n(31),f=n(12),p=n(46),h=n(2),g=n(6),m=n(0),v=n(9),y=n(24),w=n(7),b={allowfullscreen:"true"},x={position:"absolute",visibility:"hidden",display:"block",width:"0px",height:"0px",padding:"0",border:"none"},E={position:"static",visibility:"visible"};function T(e,t,n,i){return t=m.aug({id:e},b,t),n=m.aug({},x,n),d(t,n,i)}function _(e,t,n,r,s){var a=new h,c=y.generate(),l=T(e,t,n,s);return v.set(["sandbox",c],(function(){var e=l.contentWindow.document;o.write((function(){e.write("<!DOCTYPE html><html><head></head><body></body></html>")})).then((function(){e.close(),a.resolve(l)}))})),l.src=["javascript:",'document.write("");',"try { window.parent.document; }",'catch (e) { document.domain="'+i.domain+'"; }',"window.parent."+v.fullPath(["sandbox",c])+"();"].join(""),l.addEventListener("error",a.reject,!1),o.write((function(){r.parentNode.replaceChild(l,r)})),a.promise}e.exports=a.couple(n(57),(function(e){e.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),e.overrideProperty("initialized",{get:function(){return!!this.win}}),e.overrideProperty("width",{get:function(){return this._width}}),e.overrideProperty("height",{get:function(){return this._height}}),e.overrideProperty("sandboxEl",{get:function(){return this.iframeEl}}),e.defineProperty("iframeEl",{get:function(){return this._iframe}}),e.defineProperty("rootEl",{get:function(){return this.doc&&this.doc.documentElement}}),e.defineProperty("widgetEl",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),e.defineProperty("win",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),e.defineProperty("doc",{get:function(){return this.win&&this.win.document}}),e.define("_updateCachedDimensions",(function(){var e=this;return o.read((function(){var t,n=p(e.sandboxEl);"visible"==e.sandboxEl.style.visibility?e._width=n.width:(t=p(e.sandboxEl.parentElement).width,e._width=Math.min(n.width,t)),e._height=n.height}))})),e.define("_setTargetToBlank",(function(){var e=this.createElement("base");e.target="_blank",this.doc.head.appendChild(e)})),e.define("_didResize",(function(){var e=this,t=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then((function(){t.forEach((function(t){t(e)}))}))})),e.define("setTitle",(function(e){this.iframeEl.title=e})),e.override("createElement",(function(e){return this.doc.createElement(e)})),e.override("createFragment",(function(){return this.doc.createDocumentFragment()})),e.override("htmlToElement",(function(e){var t;return(t=this.createElement("div")).innerHTML=e,t.firstElementChild})),e.override("hasSelectedText",(function(){return!!s.getSelectedText(this.win)})),e.override("addRootClass",(function(e){var t=this.rootEl;return e=Array.isArray(e)?e:[e],this.initialized?o.write((function(){e.forEach((function(e){r.add(t,e)}))})):g.reject(new Error("sandbox not initialized"))})),e.override("removeRootClass",(function(e){var t=this.rootEl;return e=Array.isArray(e)?e:[e],this.initialized?o.write((function(){e.forEach((function(e){r.remove(t,e)}))})):g.reject(new Error("sandbox not initialized"))})),e.override("hasRootClass",(function(e){return r.present(this.rootEl,e)})),e.define("addStyleSheet",(function(e,t){var n,i=new h;return this.initialized?((n=this.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e,n.addEventListener("load",i.resolve,!1),n.addEventListener("error",i.reject,!1),o.write(w(t,null,n)).then((function(){return c(e).then(i.resolve,i.reject),i.promise}))):g.reject(new Error("sandbox not initialized"))})),e.override("prependStyleSheet",(function(e){var t=this.doc;return this.addStyleSheet(e,(function(e){var n=t.head.firstElementChild;return n?t.head.insertBefore(e,n):t.head.appendChild(e)}))})),e.override("appendStyleSheet",(function(e){var t=this.doc;return this.addStyleSheet(e,(function(e){return t.head.appendChild(e)}))})),e.define("addCss",(function(e,t){var n;return l.inlineStyle()?((n=this.createElement("style")).type="text/css",n.appendChild(this.doc.createTextNode(e)),o.write(w(t,null,n))):(f.devError("CSP enabled; cannot embed inline styles"),g.resolve())})),e.override("prependCss",(function(e){var t=this.doc;return this.addCss(e,(function(e){var n=t.head.firstElementChild;return n?t.head.insertBefore(e,n):t.head.appendChild(e)}))})),e.override("appendCss",(function(e){var t=this.doc;return this.addCss(e,(function(e){return t.head.appendChild(e)}))})),e.override("makeVisible",(function(){var e=this;return this.styleSelf(E).then((function(){e._updateCachedDimensions()}))})),e.override("injectWidgetEl",(function(e){var t=this;return this.initialized?this.widgetEl?g.reject(new Error("widget already injected")):o.write((function(){t.doc.body.appendChild(e)})):g.reject(new Error("sandbox not initialized"))})),e.override("matchHeightToContent",(function(){var e,t=this;return o.read((function(){e=t.widgetEl?p(t.widgetEl).height:0})),o.write((function(){t.sandboxEl.style.height=e+"px"})).then((function(){return t._updateCachedDimensions()}))})),e.override("matchWidthToContent",(function(){var e,t=this;return o.read((function(){e=t.widgetEl?p(t.widgetEl).width:0})),o.write((function(){t.sandboxEl.style.width=e+"px"})).then((function(){return t._updateCachedDimensions()}))})),e.after("initialize",(function(){this._iframe=null,this._width=this._height=0,this._resizeHandlers=[]})),e.override("insert",(function(e,t,n,i){var r=this,s=new h,a=this.targetGlobal.document,c=T(e,t,n,a);return o.write(w(i,null,c)),c.addEventListener("load",(function(){(function(e){try{e.contentWindow.document}catch(e){return g.reject(e)}return g.resolve(e)})(c).then(null,w(_,null,e,t,n,c,a)).then(s.resolve,s.reject)}),!1),c.addEventListener("error",s.reject,!1),s.promise.then((function(e){var t=u(r._didResize,50,r);return r._iframe=e,r.win.addEventListener("resize",t,!1),g.all([r._setTargetToBlank(),r.addRootClass("SandboxRoot"),r.prependCss(".SandboxRoot { display: none; }")])}))})),e.override("onResize",(function(e){this._resizeHandlers.push(e)})),e.after("styleSelf",(function(){return this._updateCachedDimensions()}))}))},function(e,t){e.exports=function(){throw new Error("unimplemented method")}},function(e,t,n){var i=n(20),r=n(54),o=n(11),s=n(22),a=n(0),c=n(9).get("scribeCallback"),l=2083,u=[],d=o.url(s.CLIENT_EVENT_ENDPOINT,{dnt:0,l:""}),f=encodeURIComponent(d).length;function p(e,t,n,i){var r=!a.isObject(e),o=!!t&&!a.isObject(t);r||o||(c&&c(arguments),h(s.formatClientEventNamespace(e),s.formatClientEventData(t,n,i),s.CLIENT_EVENT_ENDPOINT))}function h(e,t,n){var i,c;n&&a.isObject(e)&&a.isObject(t)&&(r.log(e,t),i=s.flattenClientEventPayload(e,t),c={l:s.stringify(i)},s.noticeSeen(e)&&(c.notice_seen=!0),i.dnt&&(c.dnt=1),y(o.url(n,c)))}function g(e,t,n,i){var r=!a.isObject(e),o=!!t&&!a.isObject(t);if(!r&&!o)return m(s.flattenClientEventPayload(s.formatClientEventNamespace(e),s.formatClientEventData(t,n,i)))}function m(e){return u.push(e),u}function v(e){return encodeURIComponent(e).length+3}function y(e){return(new Image).src=e}e.exports={canFlushOneItem:function(e){var t=v(s.stringify(e));return f+t<l},_enqueueRawObject:m,scribe:h,clientEvent:p,clientEvent2:function(e,t,n){return p(e,t,n,2)},enqueueClientEvent:g,flushClientEvents:function(){var e;return u.length>1&&g({page:"widgets_js",component:"scribe_pixel",action:"batch_log"},{}),e=u,u=[],e.reduce((function(t,n,i){var r=t.length,o=r&&t[r-1];return i+1==e.length&&n.event_namespace&&"batch_log"==n.event_namespace.action&&(n.message=["entries:"+i,"requests:"+r].join("/")),function e(t){return Array.isArray(t)||(t=[t]),t.reduce((function(t,n){var i,r=s.stringify(n),o=v(r);return f+o<l?t=t.concat(r):(i=s.splitLogEntry(n)).length>1&&(t=t.concat(e(i))),t}),[])}(n).forEach((function(e){var n=v(e);(!o||o.urlLength+n>l)&&(o={urlLength:f,items:[]},t.push(o)),o.urlLength+=n,o.items.push(e)})),t}),[]).map((function(e){var t={l:e.items};return i.enabled()&&(t.dnt=1),y(o.url(s.CLIENT_EVENT_ENDPOINT,t))}))},interaction:function(e,t,n,i){var r=s.extractTermsFromDOM(e.target||e.srcElement);r.action=i||"click",p(r,t,n)}}},function(e,t,n){var i=n(2),r=n(7);function o(e,t){this._inputsQueue=[],this._task=e,this._isPaused=!1,this._flushDelay=t&&t.flushDelay||100,this._pauseLength=t&&t.pauseLength||3e3,this._flushTimeout=void 0}o.prototype.add=function(e){var t=new i;return this._inputsQueue.push({input:e,taskDoneDeferred:t}),this._scheduleFlush(),t.promise},o.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(r(this._flush,this),this._flushDelay))},o.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(e){this._inputsQueue.forEach((function(t){t.taskDoneDeferred.reject(e)}))}this._inputsQueue=[],this._flushTimeout=void 0},o.prototype.pause=function(e){clearTimeout(this._flushTimeout),this._isPaused=!0,!e&&this._pauseLength&&setTimeout(r(this.resume,this),this._pauseLength)},o.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},e.exports=o},function(e,t,n){var i,r=n(72),o=n(31),s=n(2),a=n(4),c=n(19),l=n(21),u=n(32),d=n(8),f=n(12),p=n(114),h=n(58),g=n(9),m=n(11),v=n(115),y=n(3),w=n(0),b=n(1),x=h((function(){return new s}));function E(e){var t=e||{should_obtain_cookie_consent:!0,features:{}},n=t.features?t.features:t.experiments;return new v(t.should_obtain_cookie_consent,n)}e.exports={load:function(){var e,t,n,s;if(l.ie9()||l.ie10()||"http:"!==d.protocol&&"https:"!==d.protocol)return f.devError("Using default settings due to unsupported browser or protocol."),i=E(),void x().resolve();e={origin:d.origin},c.settings().indexOf("localhost")>-1&&(e.localSettings=!0),t=m.url(r.resourceBaseUrl+r.widgetIframeHtmlPath,e),n=function(e){var n,r,o,s;if(r=y.isTwitterURL(e.origin),o=t.substr(0,e.origin.length)===e.origin,s=y.isTwimgURL(e.origin),o&&r||s)try{(n="string"==typeof e.data?u.parse(e.data):e.data).namespace===p.settings&&(i=E(n.settings),x().resolve())}catch(e){f.devError(e)}},b.addEventListener("message",n),s=o({src:t,title:"Twitter settings iframe"},{display:"none"}),a.body.appendChild(s)},settingsLoaded:function(){var e,t,n;return e=new s,t=g.get("experimentOverride"),x().promise.then((function(){t&&t.name&&t.assignment&&((n={})[t.name]={bucket:t.assignment},i.features=w.aug(i.features,n)),e.resolve(i)})).catch((function(t){e.reject(t)})),e.promise}}},function(e,t){e.exports={settings:"twttr.settings"}},function(e,t){e.exports=function(e,t){this.shouldObtainCookieConsent=e,this.features=t||{}}},function(e,t){e.exports=function(e){return e.split("").map((function(e){return e.charCodeAt(0).toString(16)})).join("")}},function(e,t,n){e.exports=[n(118),n(123),n(131),n(133),n(135),n(149),n(154)]},function(e,t,n){var i=n(11),r=n(5),o=n(0),s=n(13),a=n(14)(),c=n(59);e.exports=function(e){return a(e,"a.twitter-dm-button").map((function(e){return c(function(e){var t=e.getAttribute("data-show-screen-name"),n=s(e),a=e.getAttribute("href"),c=e.getAttribute("data-screen-name"),l=t?r.asBoolean(t):null,u=e.getAttribute("data-size"),d=i.decodeURL(a),f=d.recipient_id,p=e.getAttribute("data-text")||d.text,h=e.getAttribute("data-welcome-message-id")||d.welcomeMessageId;return o.aug(n,{screenName:c,showScreenName:l,size:u,text:p,userId:f,welcomeMessageId:h})}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(0);e.exports=function e(t){var n;if(t)return n=t.lang||t.getAttribute("data-lang"),i.isType("string",n)?n:e(t.parentElement)}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return n.e(2).then(function(i){var o;try{o=n(85),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(122),r=n(1),o=n(10),s=n(36),a=n(18),c=n(55),l=n(27),u=n(56),d=n(44),f=n(46),p=n(7),h=n(45),g=n(6),m=n(0),v={position:"absolute",visibility:"hidden",display:"block",transform:"rotate(0deg)"},y={position:"static",visibility:"visible"};e.exports=l.couple(n(57),(function(e){e.defineStatic("isSupported",(function(){return!!r.HTMLElement.prototype.attachShadow&&d.inlineStyle()})),e.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),e.overrideProperty("initialized",{get:function(){return!!this._shadowHost}}),e.overrideProperty("width",{get:function(){return this._width}}),e.overrideProperty("height",{get:function(){return this._height}}),e.overrideProperty("sandboxEl",{get:function(){return this._shadowHost}}),e.define("_updateCachedDimensions",(function(){var e=this;return a.read((function(){var t,n=f(e.sandboxEl);"visible"==e.sandboxEl.style.visibility?e._width=n.width:(t=f(e.sandboxEl.parentElement).width,e._width=Math.min(n.width,t)),e._height=n.height}))})),e.define("_didResize",(function(){var e=this,t=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then((function(){t.forEach((function(t){t(e)}))}))})),e.override("createElement",(function(e){return this.targetGlobal.document.createElement(e)})),e.override("createFragment",(function(){return this.targetGlobal.document.createDocumentFragment()})),e.override("htmlToElement",(function(e){var t;return(t=this.createElement("div")).innerHTML=e,t.firstElementChild})),e.override("hasSelectedText",(function(){return!!c.getSelectedText(this.targetGlobal)})),e.override("addRootClass",(function(e){var t=this._shadowRootBody;return e=Array.isArray(e)?e:[e],this.initialized?a.write((function(){e.forEach((function(e){o.add(t,e)}))})):g.reject(new Error("sandbox not initialized"))})),e.override("removeRootClass",(function(e){var t=this._shadowRootBody;return e=Array.isArray(e)?e:[e],this.initialized?a.write((function(){e.forEach((function(e){o.remove(t,e)}))})):g.reject(new Error("sandbox not initialized"))})),e.override("hasRootClass",(function(e){return o.present(this._shadowRootBody,e)})),e.override("addStyleSheet",(function(e,t){return this.addCss('@import url("'+e+'");',t).then((function(){return u(e)}))})),e.override("prependStyleSheet",(function(e){var t=this._shadowRoot;return this.addStyleSheet(e,(function(e){var n=t.firstElementChild;return n?t.insertBefore(e,n):t.appendChild(e)}))})),e.override("appendStyleSheet",(function(e){var t=this._shadowRoot;return this.addStyleSheet(e,(function(e){return t.appendChild(e)}))})),e.override("addCss",(function(e,t){var n;return this.initialized?d.inlineStyle()?((n=this.createElement("style")).type="text/css",n.appendChild(this.targetGlobal.document.createTextNode(e)),a.write(p(t,null,n))):g.resolve():g.reject(new Error("sandbox not initialized"))})),e.override("prependCss",(function(e){var t=this._shadowRoot;return this.addCss(e,(function(e){var n=t.firstElementChild;return n?t.insertBefore(e,n):t.appendChild(e)}))})),e.override("appendCss",(function(e){var t=this._shadowRoot;return this.addCss(e,(function(e){return t.appendChild(e)}))})),e.override("makeVisible",(function(){return this.styleSelf(y)})),e.override("injectWidgetEl",(function(e){var t=this;return this.initialized?this._shadowRootBody.firstElementChild?g.reject(new Error("widget already injected")):a.write((function(){t._shadowRootBody.appendChild(e)})).then((function(){return t._updateCachedDimensions()})).then((function(){var e=h(t._didResize,50,t);new i(t._shadowRootBody,e)})):g.reject(new Error("sandbox not initialized"))})),e.override("matchHeightToContent",(function(){return g.resolve()})),e.override("matchWidthToContent",(function(){return g.resolve()})),e.override("insert",(function(e,t,n,i){var r=this.targetGlobal.document,o=this._shadowHost=r.createElement("twitter-widget"),c=this._shadowRoot=o.attachShadow({mode:"open"}),l=this._shadowRootBody=r.createElement("div");return m.forIn(t||{},(function(e,t){o.setAttribute(e,t)})),o.id=e,c.appendChild(l),s.delegate(l,"click","A",(function(e,t){t.hasAttribute("target")||t.setAttribute("target","_blank")})),g.all([this.styleSelf(v),this.addRootClass("SandboxRoot"),this.prependCss(".SandboxRoot { display: none; max-height: 10000px; }"),a.write(i.bind(null,o))])})),e.override("onResize",(function(e){this._resizeHandlers.push(e)})),e.after("initialize",(function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height=0,this._resizeHandlers=[]})),e.after("styleSelf",(function(){return this._updateCachedDimensions()}))}))},function(e,t){var i;(i=function(e,t){function r(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new function(){var e,t;this.q=[],this.add=function(e){this.q.push(e)},this.call=function(){for(e=0,t=this.q.length;e<t;e++)this.q[e].call()}},e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=n,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),{fixed:1,absolute:1}[function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}(e,"position")]||(e.style.position="relative");var r,o,s=e.resizeSensor.childNodes[0],a=s.childNodes[0],c=e.resizeSensor.childNodes[1],l=(c.childNodes[0],function(){a.style.width=s.offsetWidth+10+"px",a.style.height=s.offsetHeight+10+"px",s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight,r=e.offsetWidth,o=e.offsetHeight});l();var u=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)},d=function(){e.offsetWidth==r&&e.offsetHeight==o||e.resizedAttached&&e.resizedAttached.call(),l()};u(s,"scroll",d),u(c,"scroll",d)}var o=Object.prototype.toString.call(e),s="[object Array]"===o||"[object NodeList]"===o||"[object HTMLCollection]"===o||void 0!==n&&e instanceof n||"undefined"!=typeof Elements&&e instanceof Elements;if(s)for(var a=0,c=e.length;a<c;a++)r(e[a],t);else r(e,t);this.detach=function(){if(s)for(var t=0,n=e.length;t<n;t++)i.detach(e[t]);else i.detach(e)}}).detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},void 0!==e&&void 0!==e.exports?e.exports=i:window.ResizeSensor=i},function(e,t,n){var i=n(3),r=n(0),o=n(13),s=n(14)(),a=n(62),c=n(5);e.exports=function(e){return s(e,"a.twitter-follow-button").map((function(e){return a(function(e){var t=o(e),n={screenName:i.screenName(e.href),showScreenName:"false"!==e.getAttribute("data-show-screen-name"),showCount:"false"!==e.getAttribute("data-show-count"),size:e.getAttribute("data-size"),count:e.getAttribute("data-count"),preview:e.getAttribute("data-preview")};return r.forIn(n,(function(e,n){var i=t[e];t[e]=c.hasValue(i)?i:n})),t.screenName=t.screenName||t.screen_name,t}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return n.e(3).then(function(i){var o;try{o=n(86),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(18),r=n(126),o=n(58),s=n(31),a=n(2),c=n(6),l=n(7),u=n(0),d={allowfullscreen:"true"},f={position:"absolute",visibility:"hidden",width:"0px",height:"0px"},p={position:"static",visibility:"visible"},h={};r((function(e,t,n){var i=h[e];if(i)return t=t||1,n=n||1,i.styleSelf({width:t+"px",height:n+"px"}).then((function(){i.didResize()}))}),(function(e){var t=h[e];if(t)return t._results.resolve()}),(function(e){var t=h[e];if(t)return t._rendered.resolve()}),(function(e,t){var n=h[e];n&&t&&n.setIframeVersion(t)}),(function(e){var t=h[e];if(t)return t._results.reject()})),e.exports=function(e){e.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),e.overrideProperty("initialized",{get:function(){return!!this.iframeEl}}),e.overrideProperty("width",{get:function(){return this._width}}),e.overrideProperty("height",{get:function(){return this._height}}),e.overrideProperty("sandboxEl",{get:function(){return this.iframeEl}}),e.defineProperty("iframeEl",{get:function(){return this._iframe}}),e.defineProperty("iframeVersion",{get:function(){return this._iframeVersion}}),e.define("updateCachedDimensions",(function(){var e=this;return this.initialized?i.read((function(){e._width=e.sandboxEl.offsetWidth,e._height=e.sandboxEl.offsetHeight})):c.resolve()})),e.define("setTitle",(function(e){this.iframeEl.title=e})),e.define("setWaitToSwapUntilRendered",(function(e){this._waitToSwapUntilRendered=e})),e.define("setIframeVersion",(function(e){this._iframeVersion=e})),e.define("getResultsPromise",(function(){return this._results.promise})),e.define("getRenderedPromise",(function(){return this._rendered.promise})),e.define("makeVisible",(function(){return this.styleSelf(p)})),e.define("didResize",(function(){var e=this,t=e._resizeHandlers.length>0;return this.updateCachedDimensions().then((function(){t&&e._resizeHandlers.forEach((function(t){t(e)}))}))})),e.define("loadDocument",(function(e){var t=new a;return this.initialized?this.iframeEl.src?c.reject(new Error("widget already loaded")):(this.iframeEl.addEventListener("load",t.resolve,!1),this.iframeEl.addEventListener("error",t.reject,!1),this.iframeEl.src=e,t.promise):c.reject(new Error("sandbox not initialized"))})),e.after("initialize",(function(){var e=new a,t=new a;this._iframe=null,this._iframeVersion=null,this._width=this._height=0,this._resizeHandlers=[],this._rendered=e,this._results=t,this._waitToSwapUntilRendered=!1})),e.override("insert",(function(e,t,n,r){var a=this;return t=u.aug({id:e},d,t),n=u.aug({},f,n),this._iframe=s(t,n),h[e]=this,a._waitToSwapUntilRendered||this.onResize(o((function(){a.makeVisible()}))),i.write(l(r,null,this._iframe))})),e.override("onResize",(function(e){this._resizeHandlers.push(e)})),e.after("styleSelf",(function(){return this.updateCachedDimensions()}))}},function(e,t,n){var i=n(1),r=n(127),o=n(129),s=n(25),a=n(5),c=n(130);e.exports=function(e,t,n,l,u){function d(e){var t=c(this);s.trigger(e.type,{target:t,region:e.region,type:e.type,data:e.data||{}})}function f(t){var n=c(this),i=n&&n.id,r=a.asInt(t.width),o=a.asInt(t.height);i&&void 0!==r&&void 0!==o&&e(i,r,o)}(new r).attachReceiver(new o.Receiver(i,"twttr.button")).bind("twttr.private.trigger",d).bind("twttr.private.resizeButton",f),(new r).attachReceiver(new o.Receiver(i,"twttr.embed")).bind("twttr.private.initialized",(function(e){var t=c(this),n=t&&t.id,i=e.iframe_version;n&&i&&l&&l(n,i)})).bind("twttr.private.trigger",d).bind("twttr.private.results",(function(){var e=c(this),n=e&&e.id;n&&t&&t(n)})).bind("twttr.private.rendered",(function(){var e=c(this),t=e&&e.id;t&&n&&n(t)})).bind("twttr.private.no_results",(function(){var e=c(this),t=e&&e.id;t&&u&&u(t)})).bind("twttr.private.resize",f)}},function(e,t,n){var i=n(32),r=n(128),o=n(0),s=n(6),a=n(23),c="2.0";function l(e){this.registry=e||{}}function u(e){var t,n;return t=o.isType("string",e),n=o.isType("number",e),t||n||null===e}function d(e,t){return{jsonrpc:c,id:u(e)?e:null,error:t}}l.prototype._invoke=function(e,t){var n,i,r;n=this.registry[e.method],i=e.params||[],i=o.isType("array",i)?i:[i];try{r=n.apply(t.source||null,i)}catch(e){r=s.reject(e.message)}return a.isPromise(r)?r:s.resolve(r)},l.prototype._processRequest=function(e,t){var n,i;return function(e){var t,n,i;return!!o.isObject(e)&&(t=e.jsonrpc===c,n=o.isType("string",e.method),i=!("id"in e)||u(e.id),t&&n&&i)}(e)?(n="params"in e&&(i=e.params,!o.isObject(i)||o.isType("function",i))?s.resolve(d(e.id,r.INVALID_PARAMS)):this.registry[e.method]?this._invoke(e,{source:t}).then((function(t){return n=e.id,{jsonrpc:c,id:n,result:t};var n}),(function(){return d(e.id,r.INTERNAL_ERROR)})):s.resolve(d(e.id,r.METHOD_NOT_FOUND)),null!=e.id?n:s.resolve()):s.resolve(d(e.id,r.INVALID_REQUEST))},l.prototype.attachReceiver=function(e){return e.attachTo(this),this},l.prototype.bind=function(e,t){return this.registry[e]=t,this},l.prototype.receive=function(e,t){var n,a,c,l=this;try{c=e,e=o.isType("string",c)?i.parse(c):c}catch(e){return s.resolve(d(null,r.PARSE_ERROR))}return t=t||null,a=((n=o.isType("array",e))?e:[e]).map((function(e){return l._processRequest(e,t)})),n?function(e){return s.all(e).then((function(e){return(e=e.filter((function(e){return void 0!==e}))).length?e:void 0}))}(a):a[0]},e.exports=l},function(e){e.exports={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INTERNAL_ERROR:{code:-32603,message:"Internal error"}}},function(e,t,n){var i=n(8),r=n(1),o=n(32),s=n(2),a=n(21),c=n(0),l=n(3),u=n(7),d=a.ie9();function f(e,t,n){var i;e&&e.postMessage&&(d?i=(n||"")+o.stringify(t):n?(i={})[n]=t:i=t,e.postMessage(i,"*"))}function p(e){return c.isType("string",e)?e:"JSONRPC"}function h(e,t){return t?c.isType("string",e)&&0===e.indexOf(t)?e.substring(t.length):e&&e[t]?e[t]:void 0:e}function g(e,t){var n=e.document;this.filter=p(t),this.server=null,this.isTwitterFrame=l.isTwitterURL(n.location.href),e.addEventListener("message",u(this._onMessage,this),!1)}function m(e,t){this.pending={},this.target=e,this.isTwitterHost=l.isTwitterURL(i.href),this.filter=p(t),r.addEventListener("message",u(this._onMessage,this),!1)}c.aug(g.prototype,{_onMessage:function(e){var t,n=this;this.server&&(this.isTwitterFrame&&!l.isTwitterURL(e.origin)||(t=h(e.data,this.filter))&&this.server.receive(t,e.source).then((function(t){t&&f(e.source,t,n.filter)})))},attachTo:function(e){this.server=e},detach:function(){this.server=null}}),c.aug(m.prototype,{_processResponse:function(e){var t=this.pending[e.id];t&&(t.resolve(e),delete this.pending[e.id])},_onMessage:function(e){var t;if((!this.isTwitterHost||l.isTwitterURL(e.origin))&&(t=h(e.data,this.filter))){if(c.isType("string",t))try{t=o.parse(t)}catch(e){return}(t=c.isType("array",t)?t:[t]).forEach(u(this._processResponse,this))}},send:function(e){var t=new s;return e.id?this.pending[e.id]=t:t.resolve(),f(this.target,e,this.filter),t.promise}}),e.exports={Receiver:g,Dispatcher:m,_stringifyPayload:function(e){return arguments.length>0&&(d=!!e),d}}},function(e,t,n){var i=n(4);e.exports=function(e){for(var t,n=i.getElementsByTagName("iframe"),r=0;n[r];r++)if((t=n[r]).contentWindow===e)return t}},function(e,t,n){var i=n(5),r=n(0),o=n(3),s=n(13),a=n(14)(),c=n(63);e.exports=function(e){return a(e,"a.twitter-moment").map((function(e){return c(function(e){var t=s(e),n={momentId:o.momentId(e.href),chrome:e.getAttribute("data-chrome"),limit:e.getAttribute("data-limit")};return r.forIn(n,(function(e,n){var r=t[e];t[e]=i.hasValue(r)?r:n})),t}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return Promise.all([n.e(0),n.e(4)]).then(function(i){var o;try{o=n(87),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(0),r=n(13),o=n(14)(),s=n(64),a=/^https?:\/\/(?:www\.)?(?:periscope|pscp)\.tv\/@?([a-zA-Z0-9_]+)\/?$/i;e.exports=function(e){return o(e,"a.periscope-on-air").map((function(e){return s(function(e){var t=r(e),n=e.getAttribute("href"),o=e.getAttribute("data-size"),s=a.exec(n)[1];return i.aug(t,{username:s,size:o})}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return n.e(5).then(function(i){var o;try{o=n(88),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(5),r=n(0),o=n(65),s=n(13),a=n(14)(),c=n(66),l=n(3),u=n(12);e.exports=function(e){return a(e,"a.twitter-timeline,div.twitter-timeline,a.twitter-grid").map((function(e){return c(function(e){var t=s(e),n=e.getAttribute("data-show-replies"),a={isPreconfigured:!!e.getAttribute("data-widget-id"),chrome:e.getAttribute("data-chrome"),tweetLimit:e.getAttribute("data-tweet-limit")||e.getAttribute("data-limit"),ariaLive:e.getAttribute("data-aria-polite"),theme:e.getAttribute("data-theme"),borderColor:e.getAttribute("data-border-color"),showReplies:n?i.asBoolean(n):null,profileScreenName:e.getAttribute("data-screen-name"),profileUserId:e.getAttribute("data-user-id"),favoritesScreenName:e.getAttribute("data-favorites-screen-name"),favoritesUserId:e.getAttribute("data-favorites-user-id"),likesScreenName:e.getAttribute("data-likes-screen-name"),likesUserId:e.getAttribute("data-likes-user-id"),listOwnerScreenName:e.getAttribute("data-list-owner-screen-name"),listOwnerUserId:e.getAttribute("data-list-owner-id"),listId:e.getAttribute("data-list-id"),listSlug:e.getAttribute("data-list-slug"),customTimelineId:e.getAttribute("data-custom-timeline-id"),staticContent:e.getAttribute("data-static-content"),url:e.href};return a.isPreconfigured&&(l.isSearchUrl(a.url)?u.publicError("Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.",e):u.publicLog("You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.",e)),"twitter-grid"===e.className&&u.publicLog("Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.",e),(a=r.aug(a,t)).dataSource=o(a),a.id=a.dataSource&&a.dataSource.id,a}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(28);e.exports=i.build([n(29),n(139)])},function(e,t,n){var i=n(0),r=n(138);e.exports=function(e){return"en"===e||i.contains(r,e)}},function(e,t){e.exports=["hi","zh-cn","fr","zh-tw","msa","fil","fi","sv","pl","ja","ko","de","it","pt","es","ru","id","tr","da","no","nl","hu","fa","ar","ur","he","th","cs","uk","vi","ro","bn","el","en-gb","gu","kn","mr","ta","bg","ca","hr","sr","sk"]},function(e,t,n){var i=n(3),r=n(0),o=n(19);function s(e,t){return i.collectionId(e)||t}e.exports=function(e){e.params({id:{},url:{}}),e.overrideProperty("id",{get:function(){return"collection:"+s(this.params.url,this.params.id)}}),e.overrideProperty("endpoint",{get:function(){return o.timeline(["collection"])}}),e.around("queryParams",(function(e){return r.aug(e(),{collection_id:s(this.params.url,this.params.id)})})),e.before("initialize",(function(){if(!s(this.params.url,this.params.id))throw new Error("one of url or id is required")}))}},function(e,t,n){var i=n(28);e.exports=i.build([n(29),n(141)])},function(e,t,n){var i=n(3),r=n(0),o=n(19);function s(e,t){return i.eventId(e)||t}e.exports=function(e){e.params({id:{},url:{}}),e.overrideProperty("id",{get:function(){return"event:"+s(this.params.url,this.params.id)}}),e.overrideProperty("endpoint",{get:function(){return o.timeline(["event"])}}),e.around("queryParams",(function(e){return r.aug(e(),{event_id:s(this.params.url,this.params.id)})})),e.before("initialize",(function(){if(!s(this.params.url,this.params.id))throw new Error("one of url or id is required")}))}},function(e,t,n){var i=n(28);e.exports=i.build([n(29),n(143)])},function(e,t,n){var i=n(3),r=n(0),o=n(19);function s(e){return i.likesScreenName(e.url)||e.screenName}e.exports=function(e){e.params({screenName:{},userId:{},url:{}}),e.overrideProperty("id",{get:function(){return"likes:"+(s(this.params)||this.params.userId)}}),e.overrideProperty("endpoint",{get:function(){return o.timeline(["likes"])}}),e.define("_getLikesQueryParam",(function(){var e=s(this.params);return e?{screen_name:e}:{user_id:this.params.userId}})),e.around("queryParams",(function(e){return r.aug(e(),this._getLikesQueryParam())})),e.before("initialize",(function(){if(!s(this.params)&&!this.params.userId)throw new Error("screen name or user id is required")}))}},function(e,t,n){var i=n(28);e.exports=i.build([n(29),n(145)])},function(e,t,n){var i=n(3),r=n(0),o=n(19),s="list:";function a(e){var t=i.listScreenNameAndSlug(e.url)||e;return r.compact({screen_name:t.ownerScreenName,user_id:t.ownerUserId,list_slug:t.slug})}e.exports=function(e){e.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),e.overrideProperty("id",{get:function(){var e,t,n;return this.params.id?s+this.params.id:(t=(e=a(this.params))&&e.list_slug.replace(/-/g,"_"),n=e&&(e.screen_name||e.user_id),s+(n+":")+t)}}),e.overrideProperty("endpoint",{get:function(){return o.timeline(["list"])}}),e.define("_getListQueryParam",(function(){return this.params.id?{list_id:this.params.id}:a(this.params)})),e.around("queryParams",(function(e){return r.aug(e(),this._getListQueryParam())})),e.before("initialize",(function(){var e=a(this.params);if(r.isEmptyObject(e)&&!this.params.id)throw new Error("qualified slug or list id required")}))}},function(e,t,n){var i=n(28);e.exports=i.build([n(29),n(147)])},function(e,t,n){var i=n(3),r=n(5),o=n(0),s=n(19);function a(e,t){return i.screenName(e)||t}e.exports=function(e){e.params({showReplies:{fallback:!1,transform:r.asBoolean},screenName:{},userId:{},url:{}}),e.overrideProperty("id",{get:function(){return"profile:"+(a(this.params.url,this.params.screenName)||this.params.userId)}}),e.overrideProperty("endpoint",{get:function(){return s.timeline(["profile"])}}),e.define("_getProfileQueryParam",(function(){var e=a(this.params.url,this.params.screenName),t=e?{screen_name:e}:{user_id:this.params.userId};return o.aug(t,{with_replies:this.params.showReplies?"true":"false"})})),e.around("queryParams",(function(e){return o.aug(e(),this._getProfileQueryParam())})),e.before("initialize",(function(){if(!a(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error("screen name or user id is required")}))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return Promise.all([n.e(0),n.e(6)]).then(function(i){var o;try{o=n(89),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(10),r=n(3),o=n(0),s=n(13),a=n(14)(),c=n(67),l=/\btw-align-(left|right|center)\b/;e.exports=function(e,t){return a(e,"blockquote.twitter-tweet, blockquote.twitter-video").map((function(e){return c(function(e){var t=s(e),n=e.getElementsByTagName("A"),a=n&&n[n.length-1],c=a&&r.status(a.href),u=e.getAttribute("data-conversation"),d="none"==u||"hidden"==u||i.present(e,"tw-hide-thread"),f=e.getAttribute("data-cards"),p="none"==f||"hidden"==f||i.present(e,"tw-hide-media"),h=e.getAttribute("data-align")||e.getAttribute("align"),g=e.getAttribute("data-theme");return!h&&l.test(e.className)&&(h=RegExp.$1),o.aug(t,{tweetId:c,hideThread:d,hideCard:p,align:h,theme:g,id:c})}(e),e.parentNode,e,t)}))}},function(e,t){var n="tfw_horizon_tweet_embed_9555";e.exports={isHorizonTweetEnabled:function(e){return!(e&&e[n]&&"control"===e[n].bucket)}}},function(e,t,n){var i=n(83),r=n(22),o="tfw_horizon_tweet_embed_9555";e.exports=function(e,t){var n;e&&(n=e[o])&&n.bucket&&i(o,n.bucket,n.version,r.formatHorizonTweetData(t))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return n.e(7).then(function(i){var o;try{o=n(90),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return Promise.all([n.e(0),n.e(8)]).then(function(i){var o;try{o=n(91),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(10),r=n(0),o=n(13),s=n(14)(),a=n(68),c=n(5);e.exports=function(e){return s(e,"a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button").map((function(e){return a(function(e){var t=o(e),n={screenName:e.getAttribute("data-button-screen-name"),text:e.getAttribute("data-text"),type:e.getAttribute("data-type"),size:e.getAttribute("data-size"),url:e.getAttribute("data-url"),hashtags:e.getAttribute("data-hashtags"),via:e.getAttribute("data-via"),buttonHashtag:e.getAttribute("data-button-hashtag")};return r.forIn(n,(function(e,n){var i=t[e];t[e]=c.hasValue(i)?i:n})),t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag,i.present(e,"twitter-hashtag-button")&&(t.type="hashtag"),i.present(e,"twitter-mention-button")&&(t.type="mention"),t}(e),e.parentNode,e)}))}},function(e,t,n){var i=n(2);e.exports=function(e,t){var r=new i;return n.e(3).then(function(i){var o;try{o=n(92),r.resolve(new o(e,t))}catch(e){r.reject(e)}}.bind(null,n)).catch((function(e){r.reject(e)})),r.promise}},function(e,t,n){var i=n(0);e.exports=i.aug({},n(157),n(158),n(159),n(160),n(161),n(162),n(163))},function(e,t,n){var i=n(59),r=n(17)(["userId"],{},i);e.exports={createDMButton:r}},function(e,t,n){var i=n(62),r=n(17)(["screenName"],{},i);e.exports={createFollowButton:r}},function(e,t,n){var i=n(63),r=n(17)(["momentId"],{},i);e.exports={createMoment:r}},function(e,t,n){var i=n(64),r=n(17)(["username"],{},i);e.exports={createPeriscopeOnAirButton:r}},function(e,t,n){var i=n(8),r=n(12),o=n(3),s=n(0),a=n(5),c=n(65),l=n(66),u=n(17)([],{},l),d=n(6),f="Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.",p={createTimeline:h,createGridFromCollection:function(e){var t=s.toRealArray(arguments).slice(1),n={sourceType:"collection",id:e};return t.unshift(n),r.publicLog(f),h.apply(this,t)}};function h(e){var t,n=s.toRealArray(arguments).slice(1);return a.isString(e)||a.isNumber(e)?d.reject("Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295."):s.isObject(e)?(e=e||{},n.forEach((function(e){s.isType("object",e)&&function(e){e.ariaLive=e.ariaPolite}(t=e)})),t||(t={},n.push(t)),e.lang=t.lang,e.tweetLimit=t.tweetLimit,e.showReplies=t.showReplies,t.dataSource=c(e),u.apply(this,n)):d.reject("data source must be an object.")}o.isTwitterURL(i.href)&&(p.createTimelinePreview=function(e,t,n){var i={previewParams:e,useLegacyDefaults:!0,isPreviewTimeline:!0};return i.dataSource=c(i),u(t,i,n)}),e.exports=p},function(e,t,n){var i,r=n(0),o=n(67),s=n(17),a=(i=s(["tweetId"],{},o),function(){return r.toRealArray(arguments).slice(1).forEach((function(e){r.isType("object",e)&&(e.hideCard="none"==e.cards||"hidden"==e.cards,e.hideThread="none"==e.conversation||"hidden"==e.conversation)})),i.apply(this,arguments)});e.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(e,t,n){var i=n(0),r=n(68),o=n(17),s=o(["url"],{type:"share"},r),a=o(["buttonHashtag"],{type:"hashtag"},r),c=o(["screenName"],{type:"mention"},r);function l(e){return function(){return i.toRealArray(arguments).slice(1).forEach((function(e){i.isType("object",e)&&(e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag)})),e.apply(this,arguments)}}e.exports={createShareButton:l(s),createHashtagButton:l(a),createMentionButton:l(c)}},function(e,t,n){var i,r,o,s=n(4),a=n(1),c=0,l=[],u=s.createElement("a");function d(){var e,t;for(c=1,e=0,t=l.length;e<t;e++)l[e]()}/^loade|c/.test(s.readyState)&&(c=1),s.addEventListener&&s.addEventListener("DOMContentLoaded",r=function(){s.removeEventListener("DOMContentLoaded",r,!1),d()},!1),u.doScroll&&s.attachEvent("onreadystatechange",i=function(){/^c/.test(s.readyState)&&(s.detachEvent("onreadystatechange",i),d())}),o=u.doScroll?function(e){a.self!=a.top?c?e():l.push(e):function(){try{u.doScroll("left")}catch(t){return setTimeout((function(){o(e)}),50)}e()}()}:function(e){c?e():l.push(e)},e.exports=o},function(e,t,n){var i=n(47),r=n(9);e.exports=function(){r.set("buildVersion",i.version)}},function(e,t,n){n(167),n(84),n(170)},function(e,t,n){var i=n(168),r=n(30),o=n(69),s=new i,a=function(e){e.widgets&&1===e.widgets.length&&(s.start(),r.emitter.unbind(r.ALL_WIDGETS_RENDER_START,a))},c=function(e){var t;e.widgets&&1===e.widgets.length&&(t=e.widgets[0],s.end(),t.dataset&&t.dataset.tweetId&&o({duration:s.duration(),namespace:{element:"tweet",action:"render"},widgetIds:[t.dataset.tweetId]})),r.emitter.unbind(r.ALL_WIDGETS_RENDER_END,c)};r.emitter.bind(r.ALL_WIDGETS_RENDER_START,a),r.emitter.bind(r.ALL_WIDGETS_RENDER_END,c)},function(e,t,n){var i=n(169);function r(){}r.prototype.start=function(){this._startTime=i()},r.prototype.end=function(){this._duration=i()-this._startTime},r.prototype.duration=function(){return this._duration},e.exports=r},function(e,t,n){var i=n(1);e.exports=function(){return i.performance&&i.performance.now?i.performance.now():Date.now()}},function(e,t,n){var i=n(30),r=n(69),o=n(171),s=n(3),a=n(1),c=n(0),l=n(21),u=n(61);function d(e){return e.performance.getEntriesByType("resource").filter((function(e){return s.isTwimgURL(e.name)||s.isTwitterURL(e.name)})).reduce((function(e,t){return e[t.name]=t.duration,e}),{})}i.emitter.bind(i.ALL_WIDGETS_AND_IMAGES_LOADED,(function(e){var t,n,i=[];l.hasPerformanceInformation()&&(t=d(a),u.isSupported()||(i=function(e){return e.reduce((function(e,t){return c.aug(e,d(t.contentDocument.defaultView))}),{})}(e)),n=c.aug({},t,i),Object.keys(o).forEach((function(e){!function(e,t,n){var i=Object.keys(e).reduce((function(t,i){return n(i)?t+e[i]:t}),0);r({duration:i,namespace:{element:t,action:"resource"}})}(n,e,o[e])})))}))},function(e,t,n){var i=n(3),r={all:function(){return!0},image:function(e){return i.isTwimgURL(e)},settings:function(e){return i.isSettingsURL(e)},widget_iframe:function(e){return i.isWidgetIframeURL(e)}};e.exports=r}])))}).call(this,n("8oxB"),n("yLpj"),n("EVdn"))}},[["e6Wu",1,2]]]);